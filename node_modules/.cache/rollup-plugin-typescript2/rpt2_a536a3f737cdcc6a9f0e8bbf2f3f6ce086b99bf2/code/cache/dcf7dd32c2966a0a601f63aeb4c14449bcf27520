{"code":"import { isNil } from 'lodash';\r\nimport { getTooltipDefaultOptions, getAutoAdjustPosition, setContainerStyle, } from \"../../utils/tooltip\";\r\nimport { TOOLTIP_PREFIX_CLS, TOOLTIP_CONTAINER_CLS, } from \"../../common/constant/tooltip\";\r\nimport './index.less';\r\n/**\r\n * Base tooltips component\r\n */\r\nvar BaseTooltip = /** @class */ (function () {\r\n    function BaseTooltip(spreadsheet) {\r\n        this.position = { x: 0, y: 0 }; // tooltips position info\r\n        this.spreadsheet = spreadsheet;\r\n    }\r\n    /**\r\n     * Show toolTips\r\n     * @param position\r\n     * @param data\r\n     * @param options {@link TooltipOptions}\r\n     * @param content\r\n     */\r\n    BaseTooltip.prototype.show = function (showOptions) {\r\n        var position = showOptions.position, options = showOptions.options, content = showOptions.content;\r\n        var enterable = getTooltipDefaultOptions(options).enterable;\r\n        var container = this.getContainer();\r\n        var autoAdjustBoundary = (this.spreadsheet.options.tooltip || {}).autoAdjustBoundary;\r\n        this.options = showOptions;\r\n        this.renderContent(content);\r\n        var _a = getAutoAdjustPosition({\r\n            spreadsheet: this.spreadsheet,\r\n            position: position,\r\n            tooltipContainer: container,\r\n            autoAdjustBoundary: autoAdjustBoundary,\r\n        }), x = _a.x, y = _a.y;\r\n        this.position = {\r\n            x: x,\r\n            y: y,\r\n        };\r\n        setContainerStyle(container, {\r\n            style: {\r\n                left: \"\".concat(x, \"px\"),\r\n                top: \"\".concat(y, \"px\"),\r\n                pointerEvents: enterable ? 'all' : 'none',\r\n            },\r\n            className: \"\".concat(TOOLTIP_CONTAINER_CLS, \"-show\"),\r\n        });\r\n    };\r\n    BaseTooltip.prototype.hide = function () {\r\n        if (!this.container) {\r\n            return;\r\n        }\r\n        var container = this.getContainer();\r\n        setContainerStyle(container, {\r\n            style: {\r\n                pointerEvents: 'none',\r\n            },\r\n            className: \"\".concat(TOOLTIP_CONTAINER_CLS, \"-hide\"),\r\n        });\r\n        this.resetPosition();\r\n    };\r\n    BaseTooltip.prototype.destroy = function () {\r\n        var _a;\r\n        var container = this.getContainer();\r\n        if (container) {\r\n            this.resetPosition();\r\n            (_a = container.remove) === null || _a === void 0 ? void 0 : _a.call(container);\r\n        }\r\n    };\r\n    BaseTooltip.prototype.renderContent = function (content) {\r\n        this.clearContent();\r\n        var contentFromOptions = (this.spreadsheet.options.tooltip || {}).content;\r\n        var container = this.getContainer();\r\n        var displayContent = content !== null && content !== void 0 ? content : contentFromOptions;\r\n        // 兼容 displayContent = '' 空字符串的场景\r\n        if (isNil(displayContent)) {\r\n            return;\r\n        }\r\n        if (typeof displayContent === 'string') {\r\n            container.innerHTML = displayContent;\r\n            return;\r\n        }\r\n        if (displayContent instanceof Element) {\r\n            container.appendChild(displayContent);\r\n        }\r\n    };\r\n    BaseTooltip.prototype.clearContent = function () {\r\n        var container = this.getContainer();\r\n        container.innerHTML = '';\r\n    };\r\n    BaseTooltip.prototype.disablePointerEvent = function () {\r\n        if (!this.container) {\r\n            return;\r\n        }\r\n        if (this.container.style.pointerEvents === 'none') {\r\n            return;\r\n        }\r\n        setContainerStyle(this.container, {\r\n            style: {\r\n                pointerEvents: 'none',\r\n            },\r\n        });\r\n    };\r\n    BaseTooltip.prototype.resetPosition = function () {\r\n        this.position = { x: 0, y: 0 };\r\n    };\r\n    /**\r\n     * ToolTips container element\r\n     */\r\n    BaseTooltip.prototype.getContainer = function () {\r\n        var _a, _b;\r\n        if (!this.container) {\r\n            var rootContainer = ((_b = (_a = this.spreadsheet.options.tooltip).getContainer) === null || _b === void 0 ? void 0 : _b.call(_a)) || document.body;\r\n            var container = document.createElement('div');\r\n            rootContainer.appendChild(container);\r\n            this.container = container;\r\n        }\r\n        this.container.className = \"\".concat(TOOLTIP_PREFIX_CLS, \"-container\");\r\n        return this.container;\r\n    };\r\n    return BaseTooltip;\r\n}());\r\nexport { BaseTooltip };\r\n//# sourceMappingURL=index.js.map","references":["F:/Ismart/S2-master/node_modules/@types/lodash/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/sheet-type/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/index.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/tooltip.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/tooltip.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/ui/tooltip/index.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"F:/Ismart/S2-master/packages/s2-core/node_modules/.cache/rollup-plugin-typescript2/placeholder/ui/tooltip/index.d.ts","writeByteOrderMark":false,"text":"import type { SpreadSheet } from \"../../sheet-type\";\r\nimport { TooltipContentType, TooltipPosition, TooltipShowOptions } from \"../../common/interface\";\r\nimport './index.less';\r\n/**\r\n * Base tooltips component\r\n */\r\nexport declare class BaseTooltip {\r\n    spreadsheet: SpreadSheet;\r\n    container: HTMLElement;\r\n    options: TooltipShowOptions;\r\n    position: TooltipPosition;\r\n    constructor(spreadsheet: SpreadSheet);\r\n    /**\r\n     * Show toolTips\r\n     * @param position\r\n     * @param data\r\n     * @param options {@link TooltipOptions}\r\n     * @param content\r\n     */\r\n    show<T = Element | string>(showOptions: TooltipShowOptions<T>): void;\r\n    hide(): void;\r\n    destroy(): void;\r\n    renderContent<T = TooltipContentType>(content: T): void;\r\n    clearContent(): void;\r\n    disablePointerEvent(): void;\r\n    private resetPosition;\r\n    /**\r\n     * ToolTips container element\r\n     */\r\n    protected getContainer(): HTMLElement;\r\n}\r\n"}}
