{"code":"import { __assign, __extends } from \"tslib\";\r\nimport { isEmpty } from 'lodash';\r\nimport { isEqualDisplaySiblingNodeId } from './../utils/hide-columns';\r\nimport { HeaderCell } from './header-cell';\r\nimport { shouldAddResizeArea } from \"../utils/interaction/resize\";\r\nimport { CellTypes, HORIZONTAL_RESIZE_AREA_KEY_PRE, KEY_GROUP_COL_RESIZE_AREA, ResizeAreaEffect, ResizeDirectionType, S2Event, } from \"../common/constant\";\r\nimport { CellBorderPosition, } from \"../common/interface\";\r\nimport { getBorderPositionAndStyle, getTextAndFollowingIconPosition, getTextAreaRange, adjustColHeaderScrollingViewport, adjustColHeaderScrollingTextPostion, } from \"../utils/cell/cell\";\r\nimport { renderIcon, renderLine, renderRect } from \"../utils/g-renders\";\r\nimport { isLastColumnAfterHidden } from \"../utils/hide-columns\";\r\nimport { getOrCreateResizeAreaGroupById, getResizeAreaAttrs, } from \"../utils/interaction/resize\";\r\nvar ColCell = /** @class */ (function (_super) {\r\n    __extends(ColCell, _super);\r\n    function ColCell() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(ColCell.prototype, \"cellType\", {\r\n        get: function () {\r\n            return CellTypes.COL_CELL;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ColCell.prototype.initCell = function () {\r\n        _super.prototype.initCell.call(this);\r\n        // 1、draw rect background\r\n        this.drawBackgroundShape();\r\n        // interactive background shape\r\n        this.drawInteractiveBgShape();\r\n        // draw text\r\n        this.drawTextShape();\r\n        // draw action icons\r\n        this.drawActionIcons();\r\n        // draw borders\r\n        this.drawBorders();\r\n        // draw resize ares\r\n        this.drawResizeArea();\r\n        this.addExpandColumnIconShapes();\r\n        this.update();\r\n    };\r\n    ColCell.prototype.drawBackgroundShape = function () {\r\n        var backgroundColor = this.getStyle().cell.backgroundColor;\r\n        this.backgroundShape = renderRect(this, __assign(__assign({}, this.getCellArea()), { fill: backgroundColor }));\r\n    };\r\n    // 交互使用的背景色\r\n    ColCell.prototype.drawInteractiveBgShape = function () {\r\n        this.stateShapes.set('interactiveBgShape', renderRect(this, __assign(__assign({}, this.getCellArea()), { fill: 'transparent', stroke: 'transparent' })));\r\n    };\r\n    ColCell.prototype.getOriginalTextStyle = function () {\r\n        var _a = this.meta, isLeaf = _a.isLeaf, isTotals = _a.isTotals;\r\n        var _b = this.getStyle(), text = _b.text, bolderText = _b.bolderText;\r\n        return isLeaf && !isTotals ? text : bolderText;\r\n    };\r\n    ColCell.prototype.getTextStyle = function () {\r\n        var isLeaf = this.meta.isLeaf;\r\n        var textStyle = this.getOriginalTextStyle();\r\n        var hideMeasureColumn = this.spreadsheet.options.style.colCfg.hideMeasureColumn;\r\n        var textAlign;\r\n        var textBaseline;\r\n        if (isLeaf && !hideMeasureColumn) {\r\n            textAlign = this.theme.dataCell.text.textAlign;\r\n            textBaseline = this.theme.dataCell.text.textBaseline;\r\n        }\r\n        else {\r\n            // 为方便 getTextAreaRange 计算文字位置\r\n            // textAlign 固定为 center\r\n            textAlign = 'center';\r\n            textBaseline = 'middle';\r\n        }\r\n        return __assign(__assign({}, textStyle), { textAlign: textAlign, textBaseline: textBaseline });\r\n    };\r\n    ColCell.prototype.getMaxTextWidth = function () {\r\n        var width = this.getContentArea().width;\r\n        return width - this.getActionIconsWidth();\r\n    };\r\n    ColCell.prototype.getIconPosition = function () {\r\n        var isLeaf = this.meta.isLeaf;\r\n        var iconStyle = this.getIconStyle();\r\n        if (isLeaf) {\r\n            return _super.prototype.getIconPosition.call(this, this.getActionIconsCount());\r\n        }\r\n        var position = this.textAreaPosition;\r\n        var totalSpace = this.actualTextWidth +\r\n            this.getActionIconsWidth() -\r\n            iconStyle.margin.right;\r\n        var startX = position.x - totalSpace / 2;\r\n        return {\r\n            x: startX + this.actualTextWidth + iconStyle.margin.left,\r\n            y: position.y - iconStyle.size / 2,\r\n        };\r\n    };\r\n    ColCell.prototype.getTextPosition = function () {\r\n        var _a;\r\n        var isLeaf = this.meta.isLeaf;\r\n        var _b = this.headerConfig, width = _b.width, scrollContainsRowHeader = _b.scrollContainsRowHeader, cornerWidth = _b.cornerWidth, scrollX = _b.scrollX;\r\n        var textStyle = this.getTextStyle();\r\n        var contentBox = this.getContentArea();\r\n        var iconStyle = this.getIconStyle();\r\n        if (isLeaf) {\r\n            return getTextAndFollowingIconPosition(contentBox, textStyle, this.actualTextWidth, iconStyle, this.getActionIconsCount()).text;\r\n        }\r\n        /**\r\n         *  p(x, y)\r\n         *  +----------------------+            x\r\n         *  |                    +--------------->\r\n         *  | viewport           | |ColCell  |\r\n         *  |                    |-|---------+\r\n         *  +--------------------|-+\r\n         *                       |\r\n         *                     y |\r\n         *                       v\r\n         *\r\n         * 将 viewport 坐标(p)映射到 col header 的坐标体系中，简化计算逻辑\r\n         *\r\n         */\r\n        var viewport = {\r\n            start: scrollX - (scrollContainsRowHeader ? cornerWidth : 0),\r\n            width: width + (scrollContainsRowHeader ? cornerWidth : 0),\r\n        };\r\n        var textAlign = this.getOriginalTextStyle().textAlign;\r\n        var adjustedViewport = adjustColHeaderScrollingViewport(viewport, textAlign, (_a = this.getStyle().cell) === null || _a === void 0 ? void 0 : _a.padding);\r\n        var iconCount = this.getActionIconsCount();\r\n        var textAndIconSpace = this.actualTextWidth +\r\n            this.getActionIconsWidth() -\r\n            (iconCount ? iconStyle.margin.right : 0);\r\n        var textAreaRange = getTextAreaRange(adjustedViewport, { start: contentBox.x, width: contentBox.width }, textAndIconSpace);\r\n        // textAreaRange.start 是以文字样式为 center 计算出的文字绘制点\r\n        // 此处按实际样式(left or right)调整\r\n        var startX = adjustColHeaderScrollingTextPostion(textAreaRange.start, textAreaRange.width - textAndIconSpace, textAlign);\r\n        var textY = contentBox.y + contentBox.height / 2;\r\n        this.textAreaPosition = { x: startX, y: textY };\r\n        return {\r\n            x: startX - textAndIconSpace / 2 + this.actualTextWidth / 2,\r\n            y: textY,\r\n        };\r\n    };\r\n    ColCell.prototype.getActionIconsWidth = function () {\r\n        var _a = this.getStyle().icon, size = _a.size, margin = _a.margin;\r\n        var iconCount = this.getActionIconsCount();\r\n        return (size + margin.left) * iconCount + iconCount > 0 ? margin.right : 0;\r\n    };\r\n    ColCell.prototype.getColResizeAreaKey = function () {\r\n        return this.meta.key;\r\n    };\r\n    ColCell.prototype.getColResizeArea = function () {\r\n        return getOrCreateResizeAreaGroupById(this.spreadsheet, KEY_GROUP_COL_RESIZE_AREA);\r\n    };\r\n    ColCell.prototype.getHorizontalResizeAreaName = function () {\r\n        return \"\".concat(HORIZONTAL_RESIZE_AREA_KEY_PRE).concat(this.meta.key);\r\n    };\r\n    ColCell.prototype.drawHorizontalResizeArea = function () {\r\n        if (!this.shouldDrawResizeAreaByType('colCellVertical')) {\r\n            return;\r\n        }\r\n        var _a = this.headerConfig, cornerWidth = _a.cornerWidth, headerWidth = _a.viewportWidth;\r\n        var _b = this.meta, y = _b.y, height = _b.height;\r\n        var resizeStyle = this.getResizeAreaStyle();\r\n        var resizeArea = this.getColResizeArea();\r\n        var resizeAreaName = this.getHorizontalResizeAreaName();\r\n        var existedHorizontalResizeArea = resizeArea.find(function (element) { return element.attrs.name === resizeAreaName; });\r\n        // 如果已经绘制当前列高调整热区热区，则不再绘制\r\n        if (existedHorizontalResizeArea) {\r\n            return;\r\n        }\r\n        var resizeAreaWidth = cornerWidth + headerWidth;\r\n        // 列高调整热区\r\n        resizeArea.addShape('rect', {\r\n            attrs: __assign(__assign({}, getResizeAreaAttrs({\r\n                theme: resizeStyle,\r\n                type: ResizeDirectionType.Vertical,\r\n                id: this.getColResizeAreaKey(),\r\n                effect: ResizeAreaEffect.Field,\r\n                offsetX: 0,\r\n                offsetY: y,\r\n                width: resizeAreaWidth,\r\n                height: height,\r\n            })), { name: resizeAreaName, x: 0, y: y + height - resizeStyle.size / 2, width: resizeAreaWidth }),\r\n        });\r\n    };\r\n    ColCell.prototype.shouldAddVerticalResizeArea = function () {\r\n        var _a = this.meta, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n        var _b = this.headerConfig, scrollX = _b.scrollX, scrollY = _b.scrollY, scrollContainsRowHeader = _b.scrollContainsRowHeader, cornerWidth = _b.cornerWidth, headerHeight = _b.height, headerWidth = _b.width;\r\n        var resizeStyle = this.getResizeAreaStyle();\r\n        var resizeAreaBBox = {\r\n            x: x + width - resizeStyle.size / 2,\r\n            y: y,\r\n            width: resizeStyle.size,\r\n            height: height,\r\n        };\r\n        var resizeClipAreaBBox = {\r\n            x: scrollContainsRowHeader ? -cornerWidth : 0,\r\n            y: 0,\r\n            width: scrollContainsRowHeader ? cornerWidth + headerWidth : headerWidth,\r\n            height: headerHeight,\r\n        };\r\n        return shouldAddResizeArea(resizeAreaBBox, resizeClipAreaBBox, {\r\n            scrollX: scrollX,\r\n            scrollY: scrollY,\r\n        });\r\n    };\r\n    ColCell.prototype.getVerticalResizeAreaOffset = function () {\r\n        var _a = this.meta, x = _a.x, y = _a.y;\r\n        var _b = this.headerConfig, scrollX = _b.scrollX, position = _b.position;\r\n        return {\r\n            x: position.x + x - scrollX,\r\n            y: position.y + y,\r\n        };\r\n    };\r\n    ColCell.prototype.drawVerticalResizeArea = function () {\r\n        if (!this.meta.isLeaf ||\r\n            !this.shouldDrawResizeAreaByType('colCellHorizontal')) {\r\n            return;\r\n        }\r\n        var _a = this.meta, label = _a.label, width = _a.width, height = _a.height, parent = _a.parent;\r\n        var resizeStyle = this.getResizeAreaStyle();\r\n        var resizeArea = this.getColResizeArea();\r\n        if (!this.shouldAddVerticalResizeArea()) {\r\n            return;\r\n        }\r\n        var _b = this.getVerticalResizeAreaOffset(), offsetX = _b.x, offsetY = _b.y;\r\n        // 列宽调整热区\r\n        // 基准线是根据container坐标来的，因此把热区画在container\r\n        resizeArea.addShape('rect', {\r\n            attrs: __assign(__assign({}, getResizeAreaAttrs({\r\n                theme: resizeStyle,\r\n                type: ResizeDirectionType.Horizontal,\r\n                effect: ResizeAreaEffect.Cell,\r\n                id: parent.isTotals ? '' : label,\r\n                offsetX: offsetX,\r\n                offsetY: offsetY,\r\n                width: width,\r\n                height: height,\r\n            })), { x: offsetX + width - resizeStyle.size / 2, y: offsetY, height: height }),\r\n        });\r\n    };\r\n    // 绘制热区\r\n    ColCell.prototype.drawResizeArea = function () {\r\n        this.drawHorizontalResizeArea();\r\n        this.drawVerticalResizeArea();\r\n    };\r\n    ColCell.prototype.drawHorizontalBorder = function () {\r\n        var _a = getBorderPositionAndStyle(CellBorderPosition.TOP, this.meta, this.theme.colCell.cell), position = _a.position, style = _a.style;\r\n        renderLine(this, position, style);\r\n    };\r\n    ColCell.prototype.drawVerticalBorder = function () {\r\n        var _a = getBorderPositionAndStyle(CellBorderPosition.RIGHT, this.meta, this.theme.colCell.cell), position = _a.position, style = _a.style;\r\n        renderLine(this, position, style);\r\n    };\r\n    ColCell.prototype.drawBorders = function () {\r\n        this.drawHorizontalBorder();\r\n        this.drawVerticalBorder();\r\n    };\r\n    ColCell.prototype.hasHiddenColumnCell = function () {\r\n        var _this = this;\r\n        var _a = this.spreadsheet.options, _b = _a.interaction.hiddenColumnFields, hiddenColumnFields = _b === void 0 ? [] : _b, operation = _a.tooltip.operation;\r\n        var hiddenColumnsDetail = this.spreadsheet.store.get('hiddenColumnsDetail', []);\r\n        if (isEmpty(hiddenColumnsDetail) ||\r\n            isEmpty(hiddenColumnFields) ||\r\n            !operation.hiddenColumns) {\r\n            return false;\r\n        }\r\n        return !!hiddenColumnsDetail.find(function (column) {\r\n            return isEqualDisplaySiblingNodeId(column === null || column === void 0 ? void 0 : column.displaySiblingNode, _this.meta.id);\r\n        });\r\n    };\r\n    ColCell.prototype.getExpandIconTheme = function () {\r\n        var themeCfg = this.getStyle();\r\n        return themeCfg.icon;\r\n    };\r\n    ColCell.prototype.addExpandColumnSplitLine = function () {\r\n        var _a = this.meta, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n        var _b = this.theme.splitLine, horizontalBorderColor = _b.horizontalBorderColor, horizontalBorderWidth = _b.horizontalBorderWidth, horizontalBorderColorOpacity = _b.horizontalBorderColorOpacity;\r\n        var lineX = this.isLastColumn() ? x + width - horizontalBorderWidth : x;\r\n        renderLine(this, {\r\n            x1: lineX,\r\n            y1: y,\r\n            x2: lineX,\r\n            y2: y + height,\r\n        }, {\r\n            stroke: horizontalBorderColor,\r\n            lineWidth: horizontalBorderWidth,\r\n            strokeOpacity: horizontalBorderColorOpacity,\r\n        });\r\n    };\r\n    ColCell.prototype.addExpandColumnIconShapes = function () {\r\n        if (!this.hasHiddenColumnCell()) {\r\n            return;\r\n        }\r\n        this.addExpandColumnSplitLine();\r\n        this.addExpandColumnIcon();\r\n    };\r\n    ColCell.prototype.addExpandColumnIcon = function () {\r\n        var _this = this;\r\n        var iconConfig = this.getExpandColumnIconConfig();\r\n        var icon = renderIcon(this, __assign(__assign({}, iconConfig), { name: 'ExpandColIcon', cursor: 'pointer' }));\r\n        icon.on('click', function () {\r\n            _this.spreadsheet.emit(S2Event.LAYOUT_COLS_EXPANDED, _this.meta);\r\n        });\r\n    };\r\n    // 在隐藏的下一个兄弟节点的起始坐标显示隐藏提示线和展开按钮, 如果是尾元素, 则显示在前一个兄弟节点的结束坐标\r\n    ColCell.prototype.getExpandColumnIconConfig = function () {\r\n        var size = this.getExpandIconTheme().size;\r\n        var _a = this.getCellArea(), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n        var baseIconX = x - size;\r\n        var iconX = this.isLastColumn() ? baseIconX + width : baseIconX;\r\n        var iconY = y + height / 2 - size / 2;\r\n        return {\r\n            x: iconX,\r\n            y: iconY,\r\n            width: size * 2,\r\n            height: size,\r\n        };\r\n    };\r\n    ColCell.prototype.isLastColumn = function () {\r\n        return isLastColumnAfterHidden(this.spreadsheet, this.meta.id);\r\n    };\r\n    return ColCell;\r\n}(HeaderCell));\r\nexport { ColCell };\r\n//# sourceMappingURL=col-cell.js.map","references":["F:/Ismart/S2-master/node_modules/@antv/g-canvas/lib/index.d.ts","F:/Ismart/S2-master/node_modules/@types/lodash/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/hide-columns.ts","F:/Ismart/S2-master/packages/s2-core/src/cell/header-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/interaction/resize.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/scroll.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/header/col.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/cell/cell.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/g-renders.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/hide-columns.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/interaction/resize.ts"],"map":"{\"version\":3,\"file\":\"col-cell.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/cell/col-cell.ts\"],\"names\":[],\"mappings\":\"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\"}"}
