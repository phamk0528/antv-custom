{"code":"import { __assign, __read } from \"tslib\";\r\nimport { Wheel } from '@antv/g-gesture';\r\nimport { interpolateArray } from 'd3-interpolate';\r\nimport { timer } from 'd3-timer';\r\nimport { Group } from '@antv/g-canvas';\r\nimport { debounce, each, find, get, isUndefined, last, reduce } from 'lodash';\r\nimport { CornerBBox } from './bbox/cornerBBox';\r\nimport { PanelBBox } from './bbox/panelBBox';\r\nimport { calculateInViewIndexes, getCellRange, optimizeScrollXY, translateGroup, } from './utils';\r\nimport { S2Event, KEY_GROUP_COL_RESIZE_AREA, KEY_GROUP_CORNER_RESIZE_AREA, KEY_GROUP_ROW_INDEX_RESIZE_AREA, KEY_GROUP_ROW_RESIZE_AREA, MIN_SCROLL_BAR_HEIGHT, InterceptType, ScrollbarPositionType, } from \"../common/constant\";\r\nimport { getAllChildCells } from \"../utils/get-all-child-cells\";\r\nimport { ColHeader, CornerHeader, Frame, RowHeader, SeriesNumberHeader, } from \"./header\";\r\nimport { ScrollBar, ScrollType } from \"../ui/scrollbar\";\r\nimport { isMobile } from \"../utils/is-mobile\";\r\nimport { DebuggerUtil, DEBUG_HEADER_LAYOUT, DEBUG_VIEW_RENDER, } from \"../common/debug\";\r\nimport { updateMergedCells } from \"../utils/interaction/merge-cell\";\r\nimport { diffPanelIndexes } from \"../utils/indexes\";\r\nimport { DataCell } from \"../cell\";\r\nvar BaseFacet = /** @class */ (function () {\r\n    function BaseFacet(cfg) {\r\n        var _this = this;\r\n        this.scrollFrameId = null;\r\n        this.hideScrollBar = function () {\r\n            var _a, _b, _c;\r\n            (_a = _this.hRowScrollBar) === null || _a === void 0 ? void 0 : _a.hide();\r\n            (_b = _this.hScrollBar) === null || _b === void 0 ? void 0 : _b.hide();\r\n            (_c = _this.vScrollBar) === null || _c === void 0 ? void 0 : _c.hide();\r\n        };\r\n        this.delayHideScrollBar = debounce(this.hideScrollBar, 1000);\r\n        this.delayHideScrollbarOnMobile = function () {\r\n            if (isMobile()) {\r\n                _this.delayHideScrollBar();\r\n            }\r\n        };\r\n        this.showVerticalScrollBar = function () {\r\n            var _a;\r\n            (_a = _this.vScrollBar) === null || _a === void 0 ? void 0 : _a.show();\r\n        };\r\n        this.showHorizontalScrollBar = function () {\r\n            var _a, _b;\r\n            (_a = _this.hRowScrollBar) === null || _a === void 0 ? void 0 : _a.show();\r\n            (_b = _this.hScrollBar) === null || _b === void 0 ? void 0 : _b.show();\r\n        };\r\n        this.onContainerWheel = function () {\r\n            _this.onContainerWheelForPc();\r\n            _this.onContainerWheelForMobile();\r\n        };\r\n        this.onContainerWheelForPc = function () {\r\n            var canvas = _this.spreadsheet.container.get('el');\r\n            canvas === null || canvas === void 0 ? void 0 : canvas.addEventListener('wheel', _this.onWheel);\r\n        };\r\n        this.onContainerWheelForMobile = function () {\r\n            // mock wheel event fo mobile\r\n            _this.mobileWheel = new Wheel(_this.spreadsheet.container);\r\n            _this.mobileWheel.on('wheel', function (ev) {\r\n                _this.spreadsheet.hideTooltip();\r\n                var originEvent = ev.event;\r\n                var deltaX = ev.deltaX, deltaY = ev.deltaY, x = ev.x, y = ev.y;\r\n                // The coordinates of mobile and pc are three times different\r\n                _this.onWheel(__assign(__assign({}, originEvent), { deltaX: deltaX, deltaY: deltaY, layerX: x, layerY: y }));\r\n            });\r\n        };\r\n        this.bindEvents = function () {\r\n            _this.onContainerWheel();\r\n            _this.emitPaginationEvent();\r\n        };\r\n        this.setScrollOffset = function (scrollOffset) {\r\n            Object.keys(scrollOffset).forEach(function (key) {\r\n                var offset = scrollOffset[key];\r\n                if (!isUndefined(offset)) {\r\n                    _this.spreadsheet.store.set(key, Math.floor(offset));\r\n                }\r\n            });\r\n        };\r\n        this.getScrollOffset = function () {\r\n            var store = _this.spreadsheet.store;\r\n            return {\r\n                scrollX: store.get('scrollX', 0),\r\n                scrollY: store.get('scrollY', 0),\r\n                hRowScrollX: store.get('hRowScrollX', 0),\r\n            };\r\n        };\r\n        this.emitPaginationEvent = function () {\r\n            var pagination = _this.cfg.pagination;\r\n            if (pagination) {\r\n                var current = pagination.current, pageSize = pagination.pageSize;\r\n                var total = _this.viewCellHeights.getTotalLength();\r\n                var pageCount = Math.floor((total - 1) / pageSize) + 1;\r\n                _this.cfg.spreadsheet.emit(S2Event.LAYOUT_PAGINATION, {\r\n                    pageSize: pageSize,\r\n                    pageCount: pageCount,\r\n                    total: total,\r\n                    current: current,\r\n                });\r\n            }\r\n        };\r\n        this.unbindEvents = function () {\r\n            var canvas = _this.spreadsheet.container.get('el');\r\n            canvas === null || canvas === void 0 ? void 0 : canvas.removeEventListener('wheel', _this.onWheel);\r\n            _this.mobileWheel.destroy();\r\n        };\r\n        this.clipPanelGroup = function () {\r\n            var _a;\r\n            _this.foregroundGroup = _this.spreadsheet.foregroundGroup;\r\n            _this.backgroundGroup = _this.spreadsheet.backgroundGroup;\r\n            _this.panelGroup = _this.spreadsheet.panelGroup;\r\n            var _b = _this.panelBBox, width = _b.width, height = _b.height;\r\n            (_a = _this.spreadsheet.panelScrollGroup) === null || _a === void 0 ? void 0 : _a.setClip({\r\n                type: 'rect',\r\n                attrs: {\r\n                    x: 0,\r\n                    y: _this.cornerBBox.height,\r\n                    width: width,\r\n                    height: height,\r\n                },\r\n            });\r\n        };\r\n        this.calculateCellWidthHeight = function () {\r\n            var colLeafNodes = _this.layoutResult.colLeafNodes;\r\n            var widths = reduce(colLeafNodes, function (result, node) {\r\n                result.push(last(result) + node.width);\r\n                return result;\r\n            }, [0]);\r\n            _this.viewCellWidths = widths;\r\n            _this.viewCellHeights = _this.getViewCellHeights(_this.layoutResult);\r\n        };\r\n        this.getRealScrollX = function (scrollX, hRowScroll) {\r\n            if (hRowScroll === void 0) { hRowScroll = 0; }\r\n            return _this.cfg.spreadsheet.isScrollContainsRowHeader()\r\n                ? scrollX\r\n                : hRowScroll;\r\n        };\r\n        this.calculatePanelBBox = function () {\r\n            _this.panelBBox = new PanelBBox(_this, true);\r\n        };\r\n        this.getRealWidth = function () {\r\n            return last(_this.viewCellWidths);\r\n        };\r\n        this.getRealHeight = function () {\r\n            var pagination = _this.cfg.pagination;\r\n            var heights = _this.viewCellHeights;\r\n            if (pagination) {\r\n                var _a = _this.getCellRange(), start = _a.start, end = _a.end;\r\n                return heights.getCellOffsetY(end + 1) - heights.getCellOffsetY(start);\r\n            }\r\n            return heights.getTotalHeight();\r\n        };\r\n        this.clearAllGroup = function () {\r\n            var children = _this.panelGroup.getChildren() || [];\r\n            for (var i = children.length - 1; i >= 0; i--) {\r\n                var child = children[i];\r\n                if (child instanceof Group) {\r\n                    child.set('children', []);\r\n                }\r\n                else {\r\n                    children[i].remove();\r\n                }\r\n            }\r\n            _this.foregroundGroup.set('children', []);\r\n            _this.backgroundGroup.set('children', []);\r\n        };\r\n        this.scrollWithAnimation = function (offsetConfig, duration, cb) {\r\n            if (duration === void 0) { duration = 200; }\r\n            var _a = _this.getAdjustedScrollOffset({\r\n                scrollX: offsetConfig.offsetX.value || 0,\r\n                scrollY: offsetConfig.offsetY.value || 0,\r\n            }), adjustedScrollX = _a.scrollX, adjustedScrollY = _a.scrollY;\r\n            if (_this.timer) {\r\n                _this.timer.stop();\r\n            }\r\n            var oldOffset = Object.values(_this.getScrollOffset());\r\n            var newOffset = [\r\n                adjustedScrollX === undefined ? oldOffset[0] : adjustedScrollX,\r\n                adjustedScrollY === undefined ? oldOffset[1] : adjustedScrollY,\r\n            ];\r\n            var interpolate = interpolateArray(oldOffset, newOffset);\r\n            _this.timer = timer(function (elapsed) {\r\n                var ratio = Math.min(elapsed / duration, 1);\r\n                var _a = __read(interpolate(ratio), 2), scrollX = _a[0], scrollY = _a[1];\r\n                _this.setScrollOffset({ scrollX: scrollX, scrollY: scrollY });\r\n                _this.startScroll(adjustedScrollX, adjustedScrollY);\r\n                if (elapsed > duration) {\r\n                    _this.timer.stop();\r\n                    cb === null || cb === void 0 ? void 0 : cb();\r\n                }\r\n            });\r\n        };\r\n        this.scrollImmediately = function (offsetConfig) {\r\n            var _a = _this.getAdjustedScrollOffset({\r\n                scrollX: offsetConfig.offsetX.value || 0,\r\n                scrollY: offsetConfig.offsetY.value || 0,\r\n            }), scrollX = _a.scrollX, scrollY = _a.scrollY;\r\n            _this.setScrollOffset({ scrollX: scrollX, scrollY: scrollY });\r\n            _this.startScroll(scrollX, scrollY);\r\n        };\r\n        this.startScroll = function (newX, newY) {\r\n            var _a, _b;\r\n            var _c = _this.getScrollOffset(), scrollX = _c.scrollX, scrollY = _c.scrollY;\r\n            if (newX !== undefined) {\r\n                (_a = _this.hScrollBar) === null || _a === void 0 ? void 0 : _a.onlyUpdateThumbOffset(_this.getScrollBarOffset(scrollX, _this.hScrollBar));\r\n            }\r\n            if (newY !== undefined) {\r\n                (_b = _this.vScrollBar) === null || _b === void 0 ? void 0 : _b.onlyUpdateThumbOffset(_this.getScrollBarOffset(scrollY, _this.vScrollBar));\r\n            }\r\n            _this.dynamicRenderCell();\r\n        };\r\n        this.getRendererHeight = function () {\r\n            var _a = _this.getCellRange(), start = _a.start, end = _a.end;\r\n            return (_this.viewCellHeights.getCellOffsetY(end + 1) -\r\n                _this.viewCellHeights.getCellOffsetY(start));\r\n        };\r\n        this.getAdjustedRowScrollX = function (hRowScrollX) {\r\n            if (hRowScrollX + _this.cornerBBox.width >= _this.cornerBBox.originalWidth) {\r\n                return _this.cornerBBox.originalWidth - _this.cornerBBox.width;\r\n            }\r\n            return hRowScrollX;\r\n        };\r\n        this.getAdjustedScrollX = function (scrollX) {\r\n            var colsHierarchyWidth = _this.layoutResult.colsHierarchy.width;\r\n            var panelWidth = _this.panelBBox.width;\r\n            if (scrollX + panelWidth >= colsHierarchyWidth &&\r\n                colsHierarchyWidth > panelWidth) {\r\n                return colsHierarchyWidth - panelWidth;\r\n            }\r\n            return Math.max(0, scrollX);\r\n        };\r\n        this.getAdjustedScrollY = function (scrollY) {\r\n            var rendererHeight = _this.getRendererHeight();\r\n            var panelHeight = _this.panelBBox.height;\r\n            if (scrollY + panelHeight >= rendererHeight &&\r\n                rendererHeight > panelHeight) {\r\n                return rendererHeight - panelHeight;\r\n            }\r\n            // 当数据为空时，rendererHeight 可能为 0，此时 scrollY 为负值，需要调整为 0。\r\n            if (scrollY < 0) {\r\n                return 0;\r\n            }\r\n            return Math.max(0, scrollY);\r\n        };\r\n        this.getAdjustedScrollOffset = function (_a) {\r\n            var scrollX = _a.scrollX, scrollY = _a.scrollY, hRowScrollX = _a.hRowScrollX;\r\n            return {\r\n                scrollX: _this.getAdjustedScrollX(scrollX),\r\n                scrollY: _this.getAdjustedScrollY(scrollY),\r\n                hRowScrollX: _this.getAdjustedRowScrollX(hRowScrollX),\r\n            };\r\n        };\r\n        this.renderRowScrollBar = function (rowScrollX) {\r\n            if (!_this.cfg.spreadsheet.isScrollContainsRowHeader() &&\r\n                _this.cornerBBox.width < _this.cornerBBox.originalWidth) {\r\n                var maxOffset_1 = _this.cornerBBox.originalWidth - _this.cornerBBox.width;\r\n                var maxY = _this.getScrollbarPosition().maxY;\r\n                var thumbLen = (_this.cornerBBox.width * _this.cornerBBox.width) /\r\n                    _this.cornerBBox.originalWidth;\r\n                _this.hRowScrollBar = new ScrollBar({\r\n                    isHorizontal: true,\r\n                    trackLen: _this.cornerBBox.width,\r\n                    thumbLen: thumbLen,\r\n                    position: {\r\n                        x: _this.cornerBBox.minX + _this.scrollBarSize / 2,\r\n                        y: maxY,\r\n                    },\r\n                    thumbOffset: (rowScrollX * (_this.cornerBBox.width - thumbLen)) / maxOffset_1,\r\n                    theme: _this.scrollBarTheme,\r\n                    scrollTargetMaxOffset: maxOffset_1,\r\n                });\r\n                _this.hRowScrollBar.on(ScrollType.ScrollChange, function (_a) {\r\n                    var _b, _c;\r\n                    var offset = _a.offset;\r\n                    var newOffset = _this.getValidScrollBarOffset(offset, maxOffset_1);\r\n                    var hRowScrollX = newOffset;\r\n                    _this.setScrollOffset({ hRowScrollX: hRowScrollX });\r\n                    (_b = _this.rowHeader) === null || _b === void 0 ? void 0 : _b.onRowScrollX(hRowScrollX, KEY_GROUP_ROW_RESIZE_AREA);\r\n                    (_c = _this.rowIndexHeader) === null || _c === void 0 ? void 0 : _c.onRowScrollX(hRowScrollX, KEY_GROUP_ROW_INDEX_RESIZE_AREA);\r\n                    _this.cornerHeader.onRowScrollX(hRowScrollX, KEY_GROUP_CORNER_RESIZE_AREA);\r\n                    _this.hRowScrollBar.updateThumbOffset(_this.getScrollBarOffset(newOffset, _this.hRowScrollBar), false);\r\n                });\r\n                _this.foregroundGroup.add(_this.hRowScrollBar);\r\n            }\r\n        };\r\n        this.getValidScrollBarOffset = function (offset, maxOffset) {\r\n            if (offset > maxOffset) {\r\n                return maxOffset;\r\n            }\r\n            if (offset < 0) {\r\n                return 0;\r\n            }\r\n            return offset;\r\n        };\r\n        this.renderHScrollBar = function (width, realWidth, scrollX) {\r\n            if (Math.floor(width) < Math.floor(realWidth)) {\r\n                var halfScrollSize = _this.scrollBarSize / 2;\r\n                var maxY = _this.getScrollbarPosition().maxY;\r\n                var finalWidth = width +\r\n                    (_this.cfg.spreadsheet.isScrollContainsRowHeader()\r\n                        ? _this.cornerBBox.width\r\n                        : 0);\r\n                var finalPosition = {\r\n                    x: _this.panelBBox.minX +\r\n                        (_this.cfg.spreadsheet.isScrollContainsRowHeader()\r\n                            ? -_this.cornerBBox.width + halfScrollSize\r\n                            : halfScrollSize),\r\n                    y: maxY,\r\n                };\r\n                var finaleRealWidth = realWidth +\r\n                    (_this.cfg.spreadsheet.isScrollContainsRowHeader()\r\n                        ? _this.cornerBBox.width\r\n                        : 0);\r\n                var maxOffset_2 = finaleRealWidth - finalWidth;\r\n                var thumbLen = (finalWidth / finaleRealWidth) * finalWidth;\r\n                // TODO abstract\r\n                _this.hScrollBar = new ScrollBar({\r\n                    isHorizontal: true,\r\n                    trackLen: finalWidth,\r\n                    thumbLen: thumbLen,\r\n                    // position: this.viewport.bl,\r\n                    position: finalPosition,\r\n                    thumbOffset: (scrollX * (finalWidth - thumbLen)) / maxOffset_2,\r\n                    theme: _this.scrollBarTheme,\r\n                    scrollTargetMaxOffset: maxOffset_2,\r\n                });\r\n                _this.hScrollBar.on(ScrollType.ScrollChange, function (_a) {\r\n                    var offset = _a.offset, updateThumbOffset = _a.updateThumbOffset;\r\n                    var newScrollX = _this.getValidScrollBarOffset(offset, maxOffset_2);\r\n                    if (updateThumbOffset) {\r\n                        _this.hScrollBar.updateThumbOffset(_this.getScrollBarOffset(newScrollX, _this.hScrollBar), false);\r\n                    }\r\n                    _this.setScrollOffset({\r\n                        scrollX: newScrollX,\r\n                    });\r\n                    _this.dynamicRenderCell();\r\n                });\r\n                _this.foregroundGroup.add(_this.hScrollBar);\r\n            }\r\n        };\r\n        this.getScrollbarPosition = function () {\r\n            var _a = _this.panelBBox, maxX = _a.maxX, maxY = _a.maxY;\r\n            var _b = _this.getCanvasHW(), width = _b.width, height = _b.height;\r\n            var isContentMode = _this.spreadsheet.options.interaction.scrollbarPosition ===\r\n                ScrollbarPositionType.CONTENT;\r\n            return {\r\n                maxX: (isContentMode ? maxX : width) - _this.scrollBarSize,\r\n                maxY: isContentMode ? maxY : height - _this.scrollBarSize,\r\n            };\r\n        };\r\n        this.renderVScrollBar = function (height, realHeight, scrollY) {\r\n            if (height < realHeight) {\r\n                var thumbHeight = Math.max((height / realHeight) * height, MIN_SCROLL_BAR_HEIGHT);\r\n                var maxOffset_3 = realHeight - height;\r\n                var maxX = _this.getScrollbarPosition().maxX;\r\n                _this.vScrollBar = new ScrollBar({\r\n                    isHorizontal: false,\r\n                    trackLen: height,\r\n                    thumbLen: thumbHeight,\r\n                    thumbOffset: (scrollY * (height - thumbHeight)) / maxOffset_3,\r\n                    position: {\r\n                        x: maxX,\r\n                        y: _this.panelBBox.minY,\r\n                    },\r\n                    theme: _this.scrollBarTheme,\r\n                    scrollTargetMaxOffset: maxOffset_3,\r\n                });\r\n                _this.vScrollBar.on(ScrollType.ScrollChange, function (_a) {\r\n                    var offset = _a.offset, updateThumbOffset = _a.updateThumbOffset;\r\n                    var newScrollY = _this.getValidScrollBarOffset(offset, maxOffset_3);\r\n                    if (updateThumbOffset) {\r\n                        _this.vScrollBar.updateThumbOffset(_this.getScrollBarOffset(newScrollY, _this.vScrollBar), false);\r\n                    }\r\n                    _this.setScrollOffset({ scrollY: newScrollY });\r\n                    _this.dynamicRenderCell();\r\n                });\r\n                _this.foregroundGroup.add(_this.vScrollBar);\r\n            }\r\n        };\r\n        // (滑动 offset / 最大 offset（滚动对象真正长度 - 轨道长）) = (滑块 offset / 最大滑动距离（轨道长 - 滑块长）)\r\n        this.getScrollBarOffset = function (offset, scrollbar) {\r\n            var trackLen = scrollbar.trackLen, thumbLen = scrollbar.thumbLen, scrollTargetMaxOffset = scrollbar.scrollTargetMaxOffset;\r\n            return (offset * (trackLen - thumbLen)) / scrollTargetMaxOffset;\r\n        };\r\n        this.isScrollOverThePanelArea = function (_a) {\r\n            var layerX = _a.layerX, layerY = _a.layerY;\r\n            return (layerX > _this.panelBBox.minX &&\r\n                layerX < _this.panelBBox.maxX &&\r\n                layerY > _this.panelBBox.minY &&\r\n                layerY < _this.panelBBox.maxY);\r\n        };\r\n        this.isScrollOverTheCornerArea = function (_a) {\r\n            var layerX = _a.layerX, layerY = _a.layerY;\r\n            return (layerX > _this.cornerBBox.minX &&\r\n                layerX < _this.cornerBBox.maxX &&\r\n                layerY > _this.cornerBBox.minY &&\r\n                layerY < _this.cornerBBox.maxY + _this.panelBBox.height);\r\n        };\r\n        this.updateHorizontalRowScrollOffset = function (_a) {\r\n            var _b;\r\n            var offset = _a.offset, layerX = _a.layerX, layerY = _a.layerY;\r\n            // 在行头区域滚动时 才更新行头水平滚动条\r\n            if (_this.isScrollOverTheCornerArea({ layerX: layerX, layerY: layerY })) {\r\n                (_b = _this.hRowScrollBar) === null || _b === void 0 ? void 0 : _b.emitScrollChange(offset);\r\n            }\r\n        };\r\n        this.updateHorizontalScrollOffset = function (_a) {\r\n            var _b;\r\n            var offset = _a.offset, layerX = _a.layerX, layerY = _a.layerY;\r\n            // 1.行头没有滚动条 2.在数值区域滚动时 才更新数值区域水平滚动条\r\n            if (!_this.hRowScrollBar ||\r\n                _this.isScrollOverThePanelArea({ layerX: layerX, layerY: layerY })) {\r\n                (_b = _this.hScrollBar) === null || _b === void 0 ? void 0 : _b.emitScrollChange(offset);\r\n            }\r\n        };\r\n        this.isScrollToLeft = function (deltaX) {\r\n            if (!_this.hScrollBar) {\r\n                return true;\r\n            }\r\n            var isScrollRowHeaderToLeft = !_this.hRowScrollBar || _this.hRowScrollBar.thumbOffset <= 0;\r\n            var isScrollPanelToLeft = deltaX <= 0 && _this.hScrollBar.thumbOffset <= 0;\r\n            return isScrollPanelToLeft && isScrollRowHeaderToLeft;\r\n        };\r\n        this.isScrollToRight = function (deltaX) {\r\n            var _a, _b;\r\n            if (!_this.hScrollBar) {\r\n                return true;\r\n            }\r\n            var viewportWidth = _this.spreadsheet.isFrozenRowHeader()\r\n                ? (_a = _this.panelBBox) === null || _a === void 0 ? void 0 : _a.width\r\n                : (_b = _this.panelBBox) === null || _b === void 0 ? void 0 : _b.maxX;\r\n            var isScrollRowHeaderToRight = !_this.hRowScrollBar ||\r\n                _this.hRowScrollBar.thumbOffset + _this.hRowScrollBar.thumbLen >=\r\n                    _this.cornerBBox.width;\r\n            var isScrollPanelToRight = _this.hScrollBar.thumbOffset + _this.hScrollBar.thumbLen >= viewportWidth;\r\n            return deltaX >= 0 && isScrollPanelToRight && isScrollRowHeaderToRight;\r\n        };\r\n        this.isScrollToTop = function (deltaY) {\r\n            var _a;\r\n            if (!_this.vScrollBar) {\r\n                return true;\r\n            }\r\n            return deltaY <= 0 && ((_a = _this.vScrollBar) === null || _a === void 0 ? void 0 : _a.thumbOffset) <= 0;\r\n        };\r\n        this.isScrollToBottom = function (deltaY) {\r\n            var _a, _b, _c;\r\n            if (!_this.vScrollBar) {\r\n                return true;\r\n            }\r\n            return (deltaY >= 0 &&\r\n                ((_a = _this.vScrollBar) === null || _a === void 0 ? void 0 : _a.thumbOffset) + ((_b = _this.vScrollBar) === null || _b === void 0 ? void 0 : _b.thumbLen) >=\r\n                    ((_c = _this.panelBBox) === null || _c === void 0 ? void 0 : _c.height));\r\n        };\r\n        this.isVerticalScrollOverTheViewport = function (deltaY) {\r\n            return !_this.isScrollToTop(deltaY) && !_this.isScrollToBottom(deltaY);\r\n        };\r\n        this.isHorizontalScrollOverTheViewport = function (deltaX) {\r\n            return !_this.isScrollToLeft(deltaX) && !_this.isScrollToRight(deltaX);\r\n        };\r\n        /**\r\n          在当前表格滚动分两种情况:\r\n          1. 当前表格无滚动条: 无需阻止外部容器滚动\r\n          2. 当前表格有滚动条:\r\n            - 未滚动到顶部或底部: 当前表格滚动, 阻止外部容器滚动\r\n            - 滚动到顶部或底部: 恢复外部容器滚动\r\n        */\r\n        this.isScrollOverTheViewport = function (deltaX, deltaY, layerY) {\r\n            var isScrollOverTheHeader = layerY <= _this.cornerBBox.maxY;\r\n            // 光标在角头或列头时, 不触发表格自身滚动\r\n            if (isScrollOverTheHeader) {\r\n                return false;\r\n            }\r\n            if (deltaY !== 0) {\r\n                return _this.isVerticalScrollOverTheViewport(deltaY);\r\n            }\r\n            if (deltaX !== 0) {\r\n                return _this.isHorizontalScrollOverTheViewport(deltaX);\r\n            }\r\n            return false;\r\n        };\r\n        this.cancelScrollFrame = function () {\r\n            if (isMobile() && _this.scrollFrameId) {\r\n                return false;\r\n            }\r\n            cancelAnimationFrame(_this.scrollFrameId);\r\n            return true;\r\n        };\r\n        this.clearScrollFrameIdOnMobile = function () {\r\n            if (isMobile()) {\r\n                _this.scrollFrameId = null;\r\n            }\r\n        };\r\n        this.onWheel = function (event) {\r\n            var _a;\r\n            var ratio = _this.spreadsheet.options.interaction.scrollSpeedRatio;\r\n            var deltaX = event.deltaX, deltaY = event.deltaY, layerX = event.layerX, layerY = event.layerY;\r\n            var _b = __read(optimizeScrollXY(deltaX, deltaY, ratio), 2), optimizedDeltaX = _b[0], optimizedDeltaY = _b[1];\r\n            _this.spreadsheet.hideTooltip();\r\n            _this.spreadsheet.interaction.clearHoverTimer();\r\n            if (!_this.isScrollOverTheViewport(optimizedDeltaX, optimizedDeltaY, layerY)) {\r\n                return;\r\n            }\r\n            (_a = event === null || event === void 0 ? void 0 : event.preventDefault) === null || _a === void 0 ? void 0 : _a.call(event);\r\n            _this.spreadsheet.interaction.addIntercepts([InterceptType.HOVER]);\r\n            if (!_this.cancelScrollFrame()) {\r\n                return;\r\n            }\r\n            _this.scrollFrameId = requestAnimationFrame(function () {\r\n                var _a;\r\n                var _b = _this.getScrollOffset(), currentScrollX = _b.scrollX, currentScrollY = _b.scrollY, hRowScrollX = _b.hRowScrollX;\r\n                if (optimizedDeltaX !== 0) {\r\n                    _this.showHorizontalScrollBar();\r\n                    _this.updateHorizontalRowScrollOffset({\r\n                        layerX: layerX,\r\n                        layerY: layerY,\r\n                        offset: optimizedDeltaX + hRowScrollX,\r\n                    });\r\n                    _this.updateHorizontalScrollOffset({\r\n                        layerX: layerX,\r\n                        layerY: layerY,\r\n                        offset: optimizedDeltaX + currentScrollX,\r\n                    });\r\n                }\r\n                if (optimizedDeltaY !== 0) {\r\n                    _this.showVerticalScrollBar();\r\n                    (_a = _this.vScrollBar) === null || _a === void 0 ? void 0 : _a.emitScrollChange(optimizedDeltaY + currentScrollY);\r\n                }\r\n                _this.delayHideScrollbarOnMobile();\r\n                _this.clearScrollFrameIdOnMobile();\r\n            });\r\n        };\r\n        this.addCell = function (cell) {\r\n            var panelScrollGroup = _this.spreadsheet.panelScrollGroup;\r\n            panelScrollGroup === null || panelScrollGroup === void 0 ? void 0 : panelScrollGroup.add(cell);\r\n        };\r\n        this.realCellRender = function (scrollX, scrollY) {\r\n            var indexes = _this.calculateXYIndexes(scrollX, scrollY);\r\n            DebuggerUtil.getInstance().logger('renderIndex:', _this.preCellIndexes, indexes);\r\n            var _a = diffPanelIndexes(_this.preCellIndexes, indexes), add = _a.add, remove = _a.remove;\r\n            DebuggerUtil.getInstance().debugCallback(DEBUG_VIEW_RENDER, function () {\r\n                // add new cell in panelCell\r\n                each(add, function (_a) {\r\n                    var _b = __read(_a, 2), i = _b[0], j = _b[1];\r\n                    var viewMeta = _this.layoutResult.getCellMeta(j, i);\r\n                    if (viewMeta) {\r\n                        var cell = _this.cfg.dataCell(viewMeta);\r\n                        // mark cell for removing\r\n                        cell.set('name', \"\".concat(i, \"-\").concat(j));\r\n                        _this.addCell(cell);\r\n                    }\r\n                });\r\n                var allCells = getAllChildCells(_this.panelGroup.getChildren(), DataCell);\r\n                // remove cell from panelCell\r\n                each(remove, function (_a) {\r\n                    var _b = __read(_a, 2), i = _b[0], j = _b[1];\r\n                    var findOne = find(allCells, function (cell) { return cell.get('name') === \"\".concat(i, \"-\").concat(j); });\r\n                    findOne === null || findOne === void 0 ? void 0 : findOne.remove(true);\r\n                });\r\n                updateMergedCells(_this.spreadsheet);\r\n                DebuggerUtil.getInstance().logger(\"Render Cell Panel: \".concat(allCells === null || allCells === void 0 ? void 0 : allCells.length, \", Add: \").concat(add === null || add === void 0 ? void 0 : add.length, \", Remove: \").concat(remove === null || remove === void 0 ? void 0 : remove.length));\r\n            });\r\n            _this.preCellIndexes = indexes;\r\n        };\r\n        /**\r\n         * How long about the delay period, need be re-considered,\r\n         * for now only delay, oppose to immediately\r\n         * @private\r\n         */\r\n        this.debounceRenderCell = function (scrollX, scrollY) {\r\n            _this.realCellRender(scrollX, scrollY);\r\n        };\r\n        this.onAfterScroll = debounce(function () {\r\n            var interaction = _this.spreadsheet.interaction;\r\n            // 如果是选中单元格状态, 则继续保留 hover 拦截, 避免滚动后 hover 清空已选单元格\r\n            if (!interaction.isSelectedState()) {\r\n                _this.spreadsheet.interaction.removeIntercepts([InterceptType.HOVER]);\r\n            }\r\n        }, 300);\r\n        this.cfg = cfg;\r\n        this.spreadsheet = cfg.spreadsheet;\r\n        this.init();\r\n    }\r\n    Object.defineProperty(BaseFacet.prototype, \"scrollBarTheme\", {\r\n        get: function () {\r\n            return this.spreadsheet.theme.scrollBar;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseFacet.prototype, \"scrollBarSize\", {\r\n        get: function () {\r\n            return this.scrollBarTheme.size;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Start render, call from outside\r\n     */\r\n    BaseFacet.prototype.render = function () {\r\n        this.adjustScrollOffset();\r\n        this.renderHeaders();\r\n        this.renderScrollBars();\r\n        this.renderBackground();\r\n        this.dynamicRenderCell(false);\r\n    };\r\n    /**\r\n     * 在每次render, 校验scroll offset是否在合法范围中\r\n     * 比如在滚动条已经滚动到100%的状态的前提下：（ maxAvailableScrollOffsetX = colsHierarchy.width - viewportBBox.width ）\r\n     *     此时changeSheetSize，sheet从 small width 变为 big width\r\n     *     导致后者 viewport 区域更大，其结果就是后者的 maxAvailableScrollOffsetX 更小\r\n     *     此时就需要重置 scrollOffsetX，否则就会导致滚动过多，出现空白区域\r\n     */\r\n    BaseFacet.prototype.adjustScrollOffset = function () {\r\n        var _a = this.getAdjustedScrollOffset(this.getScrollOffset()), scrollX = _a.scrollX, scrollY = _a.scrollY, hRowScrollX = _a.hRowScrollX;\r\n        this.setScrollOffset({\r\n            scrollX: scrollX,\r\n            scrollY: scrollY,\r\n            hRowScrollX: hRowScrollX,\r\n        });\r\n    };\r\n    BaseFacet.prototype.getSeriesNumberWidth = function () {\r\n        var showSeriesNumber = this.cfg.showSeriesNumber;\r\n        return showSeriesNumber\r\n            ? this.spreadsheet.theme.rowCell.seriesNumberWidth\r\n            : 0;\r\n    };\r\n    BaseFacet.prototype.getCanvasHW = function () {\r\n        return {\r\n            width: this.cfg.width,\r\n            height: this.cfg.height,\r\n        };\r\n    };\r\n    BaseFacet.prototype.getContentHeight = function () {\r\n        var _a = this.layoutResult, rowsHierarchy = _a.rowsHierarchy, colsHierarchy = _a.colsHierarchy;\r\n        return rowsHierarchy.height + colsHierarchy.height;\r\n    };\r\n    BaseFacet.prototype.updateScrollOffset = function (offsetConfig) {\r\n        if (offsetConfig.offsetX.value !== undefined) {\r\n            if (offsetConfig.offsetX.animate) {\r\n                this.scrollWithAnimation(offsetConfig);\r\n            }\r\n            else {\r\n                this.scrollImmediately(offsetConfig);\r\n            }\r\n            return;\r\n        }\r\n        if (offsetConfig.offsetY.value !== undefined) {\r\n            if (offsetConfig.offsetY.animate) {\r\n                this.scrollWithAnimation(offsetConfig);\r\n            }\r\n            else {\r\n                this.scrollImmediately(offsetConfig);\r\n            }\r\n        }\r\n    };\r\n    BaseFacet.prototype.getPaginationScrollY = function () {\r\n        var pagination = this.cfg.pagination;\r\n        if (pagination) {\r\n            var current = pagination.current, pageSize = pagination.pageSize;\r\n            var heights = this.viewCellHeights;\r\n            var offset = Math.max((current - 1) * pageSize, 0);\r\n            return heights.getCellOffsetY(offset);\r\n        }\r\n        return 0;\r\n    };\r\n    BaseFacet.prototype.destroy = function () {\r\n        this.unbindEvents();\r\n        this.clearAllGroup();\r\n        this.preCellIndexes = null;\r\n        cancelAnimationFrame(this.scrollFrameId);\r\n    };\r\n    /**\r\n     * The purpose of this rewrite is to take into account that when rowHeader supports scrollbars\r\n     the panel viewable area must vary with the horizontal distance of the scroll\r\n     * @param scrollX\r\n     * @param scrollY\r\n     * @public\r\n     */\r\n    BaseFacet.prototype.calculateXYIndexes = function (scrollX, scrollY) {\r\n        var _a = this.panelBBox, height = _a.viewportHeight, width = _a.viewportWidth;\r\n        var indexes = calculateInViewIndexes(scrollX, scrollY, this.viewCellWidths, this.viewCellHeights, {\r\n            width: width,\r\n            height: height,\r\n            x: 0,\r\n            y: 0,\r\n        }, this.getRealScrollX(this.cornerBBox.width));\r\n        return {\r\n            center: indexes,\r\n        };\r\n    };\r\n    BaseFacet.prototype.calculateCornerBBox = function () {\r\n        this.cornerBBox = new CornerBBox(this, true);\r\n    };\r\n    BaseFacet.prototype.getCellRange = function () {\r\n        var pagination = this.cfg.pagination;\r\n        return getCellRange(this.viewCellHeights, pagination);\r\n    };\r\n    BaseFacet.prototype.clip = function (scrollX, scrollY) {\r\n        var _a;\r\n        var isFrozenRowHeader = this.cfg.spreadsheet.isFrozenRowHeader();\r\n        (_a = this.spreadsheet.panelScrollGroup) === null || _a === void 0 ? void 0 : _a.setClip({\r\n            type: 'rect',\r\n            attrs: {\r\n                x: isFrozenRowHeader ? scrollX : 0,\r\n                y: scrollY,\r\n                width: this.panelBBox.width + (isFrozenRowHeader ? 0 : scrollX),\r\n                height: this.panelBBox.height,\r\n            },\r\n        });\r\n    };\r\n    /**\r\n     * Translate panelGroup, rowHeader, cornerHeader, columnHeader ect\r\n     * according to new scroll offset\r\n     * @param scrollX\r\n     * @param scrollY\r\n     * @param hRowScroll\r\n     * @protected\r\n     */\r\n    BaseFacet.prototype.translateRelatedGroups = function (scrollX, scrollY, hRowScroll) {\r\n        var _a, _b;\r\n        translateGroup(this.spreadsheet.panelScrollGroup, this.cornerBBox.width - scrollX, this.cornerBBox.height - scrollY);\r\n        (_a = this.rowHeader) === null || _a === void 0 ? void 0 : _a.onScrollXY(this.getRealScrollX(scrollX, hRowScroll), scrollY, KEY_GROUP_ROW_RESIZE_AREA);\r\n        (_b = this.rowIndexHeader) === null || _b === void 0 ? void 0 : _b.onScrollXY(this.getRealScrollX(scrollX, hRowScroll), scrollY, KEY_GROUP_ROW_INDEX_RESIZE_AREA);\r\n        this.cornerHeader.onCorScroll(this.getRealScrollX(scrollX, hRowScroll), KEY_GROUP_CORNER_RESIZE_AREA);\r\n        this.centerFrame.onChangeShadowVisibility(scrollX, this.getRealWidth() - this.panelBBox.width);\r\n        this.centerFrame.onBorderScroll(this.getRealScrollX(scrollX));\r\n        this.columnHeader.onColScroll(scrollX, KEY_GROUP_COL_RESIZE_AREA);\r\n    };\r\n    BaseFacet.prototype.init = function () {\r\n        var _this = this;\r\n        // layout\r\n        DebuggerUtil.getInstance().debugCallback(DEBUG_HEADER_LAYOUT, function () {\r\n            _this.layoutResult = _this.doLayout();\r\n            _this.saveInitColumnLeafNodes(_this.layoutResult.colLeafNodes);\r\n            _this.spreadsheet.emit(S2Event.LAYOUT_AFTER_HEADER_LAYOUT, _this.layoutResult);\r\n        });\r\n        // all cell's width&height\r\n        this.calculateCellWidthHeight();\r\n        this.calculateCornerBBox();\r\n        this.calculatePanelBBox();\r\n        this.clipPanelGroup();\r\n        this.bindEvents();\r\n    };\r\n    BaseFacet.prototype.renderBackground = function () {\r\n        var _a = this.getCanvasHW(), width = _a.width, height = _a.height;\r\n        var color = get(this.cfg, 'spreadsheet.theme.background.color');\r\n        var opacity = get(this.cfg, 'spreadsheet.theme.background.opacity');\r\n        this.backgroundGroup.addShape('rect', {\r\n            attrs: {\r\n                fill: color,\r\n                opacity: opacity,\r\n                x: 0,\r\n                y: 0,\r\n                width: width,\r\n                height: height,\r\n            },\r\n        });\r\n    };\r\n    /**\r\n     * Render all scrollbars, default horizontal scrollbar only control viewport\r\n     * area(it means not contains row header)\r\n     * 1. individual row scrollbar\r\n     * 2. horizontal scroll bar(can control whether contains row header)\r\n     * 3. vertical scroll bar\r\n     */\r\n    BaseFacet.prototype.renderScrollBars = function () {\r\n        var _a = this.getScrollOffset(), scrollX = _a.scrollX, scrollY = _a.scrollY, hRowScrollX = _a.hRowScrollX;\r\n        var _b = this.panelBBox, width = _b.width, height = _b.height;\r\n        var realWidth = this.layoutResult.colsHierarchy.width;\r\n        var realHeight = this.getRealHeight();\r\n        // scroll row header separate from the whole canvas\r\n        this.renderRowScrollBar(hRowScrollX);\r\n        // render horizontal scroll bar(default not contains row header)\r\n        this.renderHScrollBar(width, realWidth, scrollX);\r\n        // render vertical scroll bar\r\n        this.renderVScrollBar(height, realHeight, scrollY);\r\n    };\r\n    /**\r\n     * Render all headers in {@link #foregroundGroup}, contains:\r\n     * 1. row header\r\n     * 2. col header\r\n     * 3. center frame\r\n     * 4. corner header\r\n     * 5. series number header\r\n     */\r\n    BaseFacet.prototype.renderHeaders = function () {\r\n        var seriesNumberWidth = this.getSeriesNumberWidth();\r\n        this.rowHeader = this.getRowHeader();\r\n        this.columnHeader = this.getColHeader();\r\n        if (seriesNumberWidth > 0 && !this.rowIndexHeader) {\r\n            this.rowIndexHeader = this.getSeriesNumberHeader();\r\n        }\r\n        this.cornerHeader = this.getCornerHeader();\r\n        this.centerFrame = this.getCenterFrame();\r\n        if (this.rowIndexHeader) {\r\n            this.foregroundGroup.add(this.rowIndexHeader);\r\n        }\r\n        if (this.rowHeader) {\r\n            this.foregroundGroup.add(this.rowHeader);\r\n        }\r\n        this.foregroundGroup.add(this.columnHeader);\r\n        this.foregroundGroup.add(this.cornerHeader);\r\n        this.foregroundGroup.add(this.centerFrame);\r\n    };\r\n    BaseFacet.prototype.getRowHeader = function () {\r\n        var _a, _b, _c;\r\n        if (!this.rowHeader) {\r\n            var _d = this.panelBBox, y = _d.y, viewportHeight = _d.viewportHeight, viewportWidth = _d.viewportWidth, height = _d.height;\r\n            var seriesNumberWidth = this.getSeriesNumberWidth();\r\n            return new RowHeader({\r\n                width: this.cornerBBox.width,\r\n                height: height,\r\n                viewportWidth: viewportWidth,\r\n                viewportHeight: viewportHeight,\r\n                position: { x: 0, y: y },\r\n                data: this.layoutResult.rowNodes,\r\n                hierarchyType: this.cfg.hierarchyType,\r\n                linkFields: (_c = (_b = (_a = this.cfg.spreadsheet.options) === null || _a === void 0 ? void 0 : _a.interaction) === null || _b === void 0 ? void 0 : _b.linkFields) !== null && _c !== void 0 ? _c : [],\r\n                seriesNumberWidth: seriesNumberWidth,\r\n                spreadsheet: this.spreadsheet,\r\n            });\r\n        }\r\n        return this.rowHeader;\r\n    };\r\n    BaseFacet.prototype.getColHeader = function () {\r\n        if (!this.columnHeader) {\r\n            var _a = this.panelBBox, x = _a.x, width = _a.width, viewportHeight = _a.viewportHeight, viewportWidth = _a.viewportWidth;\r\n            return new ColHeader({\r\n                width: width,\r\n                cornerWidth: this.cornerBBox.width,\r\n                height: this.cornerBBox.height,\r\n                viewportWidth: viewportWidth,\r\n                viewportHeight: viewportHeight,\r\n                position: { x: x, y: 0 },\r\n                data: this.layoutResult.colNodes,\r\n                scrollContainsRowHeader: this.cfg.spreadsheet.isScrollContainsRowHeader(),\r\n                sortParam: this.cfg.spreadsheet.store.get('sortParam'),\r\n                spreadsheet: this.spreadsheet,\r\n            });\r\n        }\r\n        return this.columnHeader;\r\n    };\r\n    BaseFacet.prototype.getCornerHeader = function () {\r\n        if (!this.cornerHeader) {\r\n            return CornerHeader.getCornerHeader(this.panelBBox, this.cornerBBox, this.getSeriesNumberWidth(), this.cfg, this.layoutResult, this.spreadsheet);\r\n        }\r\n        return this.cornerHeader;\r\n    };\r\n    BaseFacet.prototype.getSeriesNumberHeader = function () {\r\n        return SeriesNumberHeader.getSeriesNumberHeader(this.panelBBox, this.getSeriesNumberWidth(), this.layoutResult.rowsHierarchy.getNodes(0), this.spreadsheet, this.cornerBBox.width);\r\n    };\r\n    BaseFacet.prototype.getCenterFrame = function () {\r\n        var _a;\r\n        if (!this.centerFrame) {\r\n            var _b = this.panelBBox, viewportWidth = _b.viewportWidth, viewportHeight = _b.viewportHeight;\r\n            var cornerWidth = this.cornerBBox.width;\r\n            var cornerHeight = this.cornerBBox.height;\r\n            var frame = (_a = this.cfg) === null || _a === void 0 ? void 0 : _a.frame;\r\n            var frameCfg = {\r\n                position: {\r\n                    x: this.cornerBBox.x,\r\n                    y: this.cornerBBox.y,\r\n                },\r\n                width: cornerWidth,\r\n                height: cornerHeight,\r\n                viewportWidth: viewportWidth,\r\n                viewportHeight: viewportHeight,\r\n                showViewportLeftShadow: false,\r\n                showViewportRightShadow: false,\r\n                scrollContainsRowHeader: this.cfg.spreadsheet.isScrollContainsRowHeader(),\r\n                isPivotMode: this.cfg.spreadsheet.isPivotMode(),\r\n                spreadsheet: this.cfg.spreadsheet,\r\n            };\r\n            return frame ? frame(frameCfg) : new Frame(frameCfg);\r\n        }\r\n        return this.centerFrame;\r\n    };\r\n    /**\r\n     * When scroll behavior happened, only render one time in a period,\r\n     * but render immediately in initiate\r\n     * @param delay debounce render cell\r\n     * @protected\r\n     */\r\n    BaseFacet.prototype.dynamicRenderCell = function (delay) {\r\n        if (delay === void 0) { delay = true; }\r\n        var _a = this.getScrollOffset(), scrollX = _a.scrollX, sy = _a.scrollY, hRowScrollX = _a.hRowScrollX;\r\n        var scrollY = sy + this.getPaginationScrollY();\r\n        var maxScrollY = Math.max(0, this.viewCellHeights.getTotalHeight() - this.panelBBox.viewportHeight);\r\n        if (scrollY > maxScrollY) {\r\n            scrollY = maxScrollY;\r\n        }\r\n        if (delay) {\r\n            this.debounceRenderCell(scrollX, scrollY);\r\n        }\r\n        else {\r\n            this.realCellRender(scrollX, scrollY);\r\n        }\r\n        this.translateRelatedGroups(scrollX, scrollY, hRowScrollX);\r\n        this.clip(scrollX, scrollY);\r\n        this.spreadsheet.emit(S2Event.LAYOUT_CELL_SCROLL, { scrollX: scrollX, scrollY: scrollY });\r\n        this.onAfterScroll();\r\n    };\r\n    BaseFacet.prototype.saveInitColumnLeafNodes = function (columnNodes) {\r\n        if (columnNodes === void 0) { columnNodes = []; }\r\n        var _a = this.spreadsheet, store = _a.store, options = _a.options;\r\n        var hiddenColumnFields = options.interaction.hiddenColumnFields;\r\n        // 当前显示的 + 被隐藏的\r\n        var originalColumnsLength = columnNodes.length + hiddenColumnFields.length;\r\n        var initColumnLeafNodes = store.get('initColumnLeafNodes', []);\r\n        if (originalColumnsLength !== initColumnLeafNodes.length) {\r\n            store.set('initColumnLeafNodes', columnNodes);\r\n        }\r\n    };\r\n    return BaseFacet;\r\n}());\r\nexport { BaseFacet };\r\n//# sourceMappingURL=base-facet.js.map","references":["F:/Ismart/S2-master/node_modules/@antv/g-canvas/lib/index.d.ts","F:/Ismart/S2-master/node_modules/@antv/g-gesture/lib/index.d.ts","F:/Ismart/S2-master/node_modules/@types/d3-interpolate/index.d.ts","F:/Ismart/S2-master/node_modules/@types/d3-timer/index.d.ts","F:/Ismart/S2-master/node_modules/@antv/g-canvas/lib/index.d.ts","F:/Ismart/S2-master/node_modules/@types/lodash/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/bbox/cornerBBox.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/bbox/panelBBox.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/utils.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/scroll.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/get-all-child-cells.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/header/index.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/layout/interface.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/layout/node.ts","F:/Ismart/S2-master/packages/s2-core/src/sheet-type/index.ts","F:/Ismart/S2-master/packages/s2-core/src/ui/scrollbar/index.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/is-mobile.ts","F:/Ismart/S2-master/packages/s2-core/src/common/debug/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/index.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/interaction/merge-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/indexes.ts","F:/Ismart/S2-master/packages/s2-core/src/cell/index.ts"],"map":"{\"version\":3,\"file\":\"base-facet.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/facet/base-facet.ts\"],\"names\":[],\"mappings\":\";AACA,OAAO,EAAgB,KAAK,EAAE,MAAM,iBAAiB,CAAC;AACtD,OAAO,EAAE,gBAAgB,EAAE,MAAM,gBAAgB,CAAC;AAClD,OAAO,EAAE,KAAK,EAAS,MAAM,UAAU,CAAC;AACxC,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AACvC,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,WAAW,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,QAAQ,CAAC;AAC9E,OAAO,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAC;AAC/C,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EACL,sBAAsB,EACtB,YAAY,EACZ,gBAAgB,EAChB,cAAc,GACf,MAAM,SAAS,CAAC;AACjB,OAAO,EACL,OAAO,EACP,yBAAyB,EACzB,4BAA4B,EAC5B,+BAA+B,EAC/B,yBAAyB,EACzB,qBAAqB,EACrB,aAAa,EACb,qBAAqB,GACtB,2BAA0B;AAE3B,OAAO,EAAE,gBAAgB,EAAE,qCAAoC;AAC/D,OAAO,EACL,SAAS,EACT,YAAY,EACZ,KAAK,EACL,SAAS,EACT,kBAAkB,GACnB,iBAAuB;AAIxB,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,wBAAuB;AACvD,OAAO,EAAE,QAAQ,EAAE,2BAA0B;AAC7C,OAAO,EACL,YAAY,EACZ,mBAAmB,EACnB,iBAAiB,GAClB,wBAAuB;AASxB,OAAO,EAAE,iBAAiB,EAAE,wCAAuC;AACnE,OAAO,EAAgB,gBAAgB,EAAE,yBAAwB;AACjE,OAAO,EAAE,QAAQ,EAAE,gBAAe;AAElC;IAiEE,mBAAmB,GAAwB;QAA3C,iBAIC;QAhBS,kBAAa,GAA6C,IAAI,CAAC;QAkBzE,kBAAa,GAAG;;YACd,MAAA,KAAI,CAAC,aAAa,0CAAE,IAAI,EAAE,CAAC;YAC3B,MAAA,KAAI,CAAC,UAAU,0CAAE,IAAI,EAAE,CAAC;YACxB,MAAA,KAAI,CAAC,UAAU,0CAAE,IAAI,EAAE,CAAC;QAC1B,CAAC,CAAC;QAEF,uBAAkB,GAAG,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QAExD,+BAA0B,GAAG;YAC3B,IAAI,QAAQ,EAAE,EAAE;gBACd,KAAI,CAAC,kBAAkB,EAAE,CAAC;aAC3B;QACH,CAAC,CAAC;QAEF,0BAAqB,GAAG;;YACtB,MAAA,KAAI,CAAC,UAAU,0CAAE,IAAI,EAAE,CAAC;QAC1B,CAAC,CAAC;QAEF,4BAAuB,GAAG;;YACxB,MAAA,KAAI,CAAC,aAAa,0CAAE,IAAI,EAAE,CAAC;YAC3B,MAAA,KAAI,CAAC,UAAU,0CAAE,IAAI,EAAE,CAAC;QAC1B,CAAC,CAAC;QAEF,qBAAgB,GAAG;YACjB,KAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,KAAI,CAAC,yBAAyB,EAAE,CAAC;QACnC,CAAC,CAAC;QAEF,0BAAqB,GAAG;YACtB,IAAM,MAAM,GAAG,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAsB,CAAC;YACzE,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,gBAAgB,CAAC,OAAO,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC,CAAC;QAEF,8BAAyB,GAAG;YAC1B,6BAA6B;YAC7B,KAAI,CAAC,WAAW,GAAG,IAAI,KAAK,CAAC,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;YAEzD,KAAI,CAAC,WAAW,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,EAAgB;gBAC5C,KAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;gBAC/B,IAAM,WAAW,GAAG,EAAE,CAAC,KAAK,CAAC;gBACrB,IAAA,MAAM,GAAmB,EAAE,OAArB,EAAE,MAAM,GAAW,EAAE,OAAb,EAAE,CAAC,GAAQ,EAAE,EAAV,EAAE,CAAC,GAAK,EAAE,EAAP,CAAQ;gBACpC,6DAA6D;gBAC7D,KAAI,CAAC,OAAO,CAAC,sBACR,WAAW,KACd,MAAM,QAAA,EACN,MAAM,QAAA,EACN,MAAM,EAAE,CAAC,EACT,MAAM,EAAE,CAAC,GACiB,CAAC,CAAC;YAChC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,eAAU,GAAG;YACX,KAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,KAAI,CAAC,mBAAmB,EAAE,CAAC;QAC7B,CAAC,CAAC;QAuFF,oBAAe,GAAG,UAAC,YAA0B;YAC3C,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,UAAC,GAAuB;gBACxD,IAAM,MAAM,GAAG,YAAY,CAAC,GAAG,CAAC,CAAC;gBACjC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE;oBACxB,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAqB,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;iBACzE;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,oBAAe,GAAG;YACR,IAAA,KAAK,GAAK,KAAI,CAAC,WAAW,MAArB,CAAsB;YACnC,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,GAAG,CAAqB,SAAS,EAAE,CAAC,CAAC;gBACpD,OAAO,EAAE,KAAK,CAAC,GAAG,CAAqB,SAAS,EAAE,CAAC,CAAC;gBACpD,WAAW,EAAE,KAAK,CAAC,GAAG,CAAqB,aAAa,EAAE,CAAC,CAAC;aAC7D,CAAC;QACJ,CAAC,CAAC;QAEF,wBAAmB,GAAG;YACZ,IAAA,UAAU,GAAK,KAAI,CAAC,GAAG,WAAb,CAAc;YAChC,IAAI,UAAU,EAAE;gBACN,IAAA,OAAO,GAAe,UAAU,QAAzB,EAAE,QAAQ,GAAK,UAAU,SAAf,CAAgB;gBACzC,IAAM,KAAK,GAAG,KAAI,CAAC,eAAe,CAAC,cAAc,EAAE,CAAC;gBAEpD,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;gBAEzD,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE;oBACnD,QAAQ,UAAA;oBACR,SAAS,WAAA;oBACT,KAAK,OAAA;oBACL,OAAO,SAAA;iBACR,CAAC,CAAC;aACJ;QACH,CAAC,CAAC;QAEM,iBAAY,GAAG;YACrB,IAAM,MAAM,GAAG,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAgB,CAAC;YACnE,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,mBAAmB,CAAC,OAAO,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC;YACnD,KAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;QAC7B,CAAC,CAAC;QAEF,mBAAc,GAAG;;YACf,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,WAAW,CAAC,eAAe,CAAC;YACxD,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,WAAW,CAAC,eAAe,CAAC;YACxD,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC;YACxC,IAAA,KAAoB,KAAI,CAAC,SAAS,EAAhC,KAAK,WAAA,EAAE,MAAM,YAAmB,CAAC;YAEzC,MAAA,KAAI,CAAC,WAAW,CAAC,gBAAgB,0CAAE,OAAO,CAAC;gBACzC,IAAI,EAAE,MAAM;gBACZ,KAAK,EAAE;oBACL,CAAC,EAAE,CAAC;oBACJ,CAAC,EAAE,KAAI,CAAC,UAAU,CAAC,MAAM;oBACzB,KAAK,OAAA;oBACL,MAAM,QAAA;iBACP;aACF,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,6BAAwB,GAAG;YACjB,IAAA,YAAY,GAAK,KAAI,CAAC,YAAY,aAAtB,CAAuB;YAC3C,IAAM,MAAM,GAAG,MAAM,CACnB,YAAY,EACZ,UAAC,MAAgB,EAAE,IAAU;gBAC3B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;gBACvC,OAAO,MAAM,CAAC;YAChB,CAAC,EACD,CAAC,CAAC,CAAC,CACJ,CAAC;YAEF,KAAI,CAAC,cAAc,GAAG,MAAM,CAAC;YAC7B,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,kBAAkB,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC;QACpE,CAAC,CAAC;QA+BF,mBAAc,GAAG,UAAC,OAAe,EAAE,UAAc;YAAd,2BAAA,EAAA,cAAc;YAC/C,OAAO,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,yBAAyB,EAAE;gBACrD,CAAC,CAAC,OAAO;gBACT,CAAC,CAAC,UAAU,CAAC;QACjB,CAAC,CAAC;QAMQ,uBAAkB,GAAG;YAC7B,KAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,KAAI,EAAE,IAAI,CAAC,CAAC;QAC7C,CAAC,CAAC;QAEF,iBAAY,GAAG;YACb,OAAO,IAAI,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC;QACnC,CAAC,CAAC;QAOF,kBAAa,GAAG;YACN,IAAA,UAAU,GAAK,KAAI,CAAC,GAAG,WAAb,CAAc;YAChC,IAAM,OAAO,GAAG,KAAI,CAAC,eAAe,CAAC;YAErC,IAAI,UAAU,EAAE;gBACR,IAAA,KAAiB,KAAI,CAAC,YAAY,EAAE,EAAlC,KAAK,WAAA,EAAE,GAAG,SAAwB,CAAC;gBAE3C,OAAO,OAAO,CAAC,cAAc,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;aACxE;YACD,OAAO,OAAO,CAAC,cAAc,EAAE,CAAC;QAClC,CAAC,CAAC;QAEF,kBAAa,GAAG;YACd,IAAM,QAAQ,GAAG,KAAI,CAAC,UAAU,CAAC,WAAW,EAAE,IAAI,EAAE,CAAC;YACrD,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;gBAC7C,IAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC1B,IAAI,KAAK,YAAY,KAAK,EAAE;oBAC1B,KAAK,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;iBAC3B;qBAAM;oBACL,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;iBACtB;aACF;YACD,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;YACzC,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QAC3C,CAAC,CAAC;QAEF,wBAAmB,GAAG,UACpB,YAA0B,EAC1B,QAAc,EACd,EAAe;YADf,yBAAA,EAAA,cAAc;YAGR,IAAA,KACJ,KAAI,CAAC,uBAAuB,CAAC;gBAC3B,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC;gBACxC,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC;aACzC,CAAC,EAJa,eAAe,aAAA,EAAW,eAAe,aAItD,CAAC;YACL,IAAI,KAAI,CAAC,KAAK,EAAE;gBACd,KAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;aACnB;YACD,IAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,eAAe,EAAE,CAAC,CAAC;YACxD,IAAM,SAAS,GAAa;gBAC1B,eAAe,KAAK,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe;gBAC9D,eAAe,KAAK,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe;aAC/D,CAAC;YACF,IAAM,WAAW,GAAG,gBAAgB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;YAC3D,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC,UAAC,OAAO;gBACzB,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,QAAQ,EAAE,CAAC,CAAC,CAAC;gBACxC,IAAA,KAAA,OAAqB,WAAW,CAAC,KAAK,CAAC,IAAA,EAAtC,OAAO,QAAA,EAAE,OAAO,QAAsB,CAAC;gBAC9C,KAAI,CAAC,eAAe,CAAC,EAAE,OAAO,SAAA,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;gBAC3C,KAAI,CAAC,WAAW,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;gBACnD,IAAI,OAAO,GAAG,QAAQ,EAAE;oBACtB,KAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;oBAClB,EAAE,aAAF,EAAE,uBAAF,EAAE,EAAI,CAAC;iBACR;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,sBAAiB,GAAG,UAAC,YAA0B;YACvC,IAAA,KAAuB,KAAI,CAAC,uBAAuB,CAAC;gBACxD,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC;gBACxC,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC;aACzC,CAAC,EAHM,OAAO,aAAA,EAAE,OAAO,aAGtB,CAAC;YACH,KAAI,CAAC,eAAe,CAAC,EAAE,OAAO,SAAA,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;YAC3C,KAAI,CAAC,WAAW,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACrC,CAAC,CAAC;QAEF,gBAAW,GAAG,UAAC,IAAY,EAAE,IAAY;;YACjC,IAAA,KAAuB,KAAI,CAAC,eAAe,EAAE,EAA3C,OAAO,aAAA,EAAE,OAAO,aAA2B,CAAC;YACpD,IAAI,IAAI,KAAK,SAAS,EAAE;gBACtB,MAAA,KAAI,CAAC,UAAU,0CAAE,qBAAqB,CACpC,KAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,KAAI,CAAC,UAAU,CAAC,CAClD,CAAC;aACH;YACD,IAAI,IAAI,KAAK,SAAS,EAAE;gBACtB,MAAA,KAAI,CAAC,UAAU,0CAAE,qBAAqB,CACpC,KAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,KAAI,CAAC,UAAU,CAAC,CAClD,CAAC;aACH;YACD,KAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC,CAAC;QAEF,sBAAiB,GAAG;YACZ,IAAA,KAAiB,KAAI,CAAC,YAAY,EAAE,EAAlC,KAAK,WAAA,EAAE,GAAG,SAAwB,CAAC;YAC3C,OAAO,CACL,KAAI,CAAC,eAAe,CAAC,cAAc,CAAC,GAAG,GAAG,CAAC,CAAC;gBAC5C,KAAI,CAAC,eAAe,CAAC,cAAc,CAAC,KAAK,CAAC,CAC3C,CAAC;QACJ,CAAC,CAAC;QAEM,0BAAqB,GAAG,UAAC,WAAmB;YAClD,IAAI,WAAW,GAAG,KAAI,CAAC,UAAU,CAAC,KAAK,IAAI,KAAI,CAAC,UAAU,CAAC,aAAa,EAAE;gBACxE,OAAO,KAAI,CAAC,UAAU,CAAC,aAAa,GAAG,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC;aAC9D;YACD,OAAO,WAAW,CAAC;QACrB,CAAC,CAAC;QAEM,uBAAkB,GAAG,UAAC,OAAe;YAC3C,IAAM,kBAAkB,GAAG,KAAI,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC;YACjE,IAAM,UAAU,GAAG,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC;YACxC,IACE,OAAO,GAAG,UAAU,IAAI,kBAAkB;gBAC1C,kBAAkB,GAAG,UAAU,EAC/B;gBACA,OAAO,kBAAkB,GAAG,UAAU,CAAC;aACxC;YACD,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;QAC9B,CAAC,CAAC;QAEM,uBAAkB,GAAG,UAAC,OAAe;YAC3C,IAAM,cAAc,GAAG,KAAI,CAAC,iBAAiB,EAAE,CAAC;YAChD,IAAM,WAAW,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAC1C,IACE,OAAO,GAAG,WAAW,IAAI,cAAc;gBACvC,cAAc,GAAG,WAAW,EAC5B;gBACA,OAAO,cAAc,GAAG,WAAW,CAAC;aACrC;YACD,sDAAsD;YACtD,IAAI,OAAO,GAAG,CAAC,EAAE;gBACf,OAAO,CAAC,CAAC;aACV;YACD,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;QAC9B,CAAC,CAAC;QAEM,4BAAuB,GAAG,UAAC,EAIpB;gBAHb,OAAO,aAAA,EACP,OAAO,aAAA,EACP,WAAW,iBAAA;YAEX,OAAO;gBACL,OAAO,EAAE,KAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC;gBACzC,OAAO,EAAE,KAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC;gBACzC,WAAW,EAAE,KAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC;aACrD,CAAC;QACJ,CAAC,CAAC;QAEF,uBAAkB,GAAG,UAAC,UAAkB;YACtC,IACE,CAAC,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,yBAAyB,EAAE;gBACjD,KAAI,CAAC,UAAU,CAAC,KAAK,GAAG,KAAI,CAAC,UAAU,CAAC,aAAa,EACrD;gBACA,IAAM,WAAS,GAAG,KAAI,CAAC,UAAU,CAAC,aAAa,GAAG,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC;gBAChE,IAAA,IAAI,GAAK,KAAI,CAAC,oBAAoB,EAAE,KAAhC,CAAiC;gBAC7C,IAAM,QAAQ,GACZ,CAAC,KAAI,CAAC,UAAU,CAAC,KAAK,GAAG,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC;oBAC/C,KAAI,CAAC,UAAU,CAAC,aAAa,CAAC;gBAChC,KAAI,CAAC,aAAa,GAAG,IAAI,SAAS,CAAC;oBACjC,YAAY,EAAE,IAAI;oBAClB,QAAQ,EAAE,KAAI,CAAC,UAAU,CAAC,KAAK;oBAC/B,QAAQ,UAAA;oBACR,QAAQ,EAAE;wBACR,CAAC,EAAE,KAAI,CAAC,UAAU,CAAC,IAAI,GAAG,KAAI,CAAC,aAAa,GAAG,CAAC;wBAChD,CAAC,EAAE,IAAI;qBACR;oBACD,WAAW,EACT,CAAC,UAAU,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC,GAAG,WAAS;oBAC/D,KAAK,EAAE,KAAI,CAAC,cAAc;oBAC1B,qBAAqB,EAAE,WAAS;iBACjC,CAAC,CAAC;gBAEH,KAAI,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,CAAC,YAAY,EAAE,UAAC,EAAU;;wBAAR,MAAM,YAAA;oBACtD,IAAM,SAAS,GAAG,KAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,WAAS,CAAC,CAAC;oBAClE,IAAM,WAAW,GAAG,SAAS,CAAC;oBAC9B,KAAI,CAAC,eAAe,CAAC,EAAE,WAAW,aAAA,EAAE,CAAC,CAAC;oBACtC,MAAA,KAAI,CAAC,SAAS,0CAAE,YAAY,CAAC,WAAW,EAAE,yBAAyB,CAAC,CAAC;oBACrE,MAAA,KAAI,CAAC,cAAc,0CAAE,YAAY,CAC/B,WAAW,EACX,+BAA+B,CAChC,CAAC;oBACF,KAAI,CAAC,YAAY,CAAC,YAAY,CAC5B,WAAW,EACX,4BAA4B,CAC7B,CAAC;oBACF,KAAI,CAAC,aAAa,CAAC,iBAAiB,CAClC,KAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,KAAI,CAAC,aAAa,CAAC,EACtD,KAAK,CACN,CAAC;gBACJ,CAAC,CAAC,CAAC;gBACH,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC;aAC9C;QACH,CAAC,CAAC;QAEF,4BAAuB,GAAG,UAAC,MAAc,EAAE,SAAiB;YAC1D,IAAI,MAAM,GAAG,SAAS,EAAE;gBACtB,OAAO,SAAS,CAAC;aAClB;YACD,IAAI,MAAM,GAAG,CAAC,EAAE;gBACd,OAAO,CAAC,CAAC;aACV;YACD,OAAO,MAAM,CAAC;QAChB,CAAC,CAAC;QAEF,qBAAgB,GAAG,UAAC,KAAa,EAAE,SAAiB,EAAE,OAAe;YACnE,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;gBAC7C,IAAM,cAAc,GAAG,KAAI,CAAC,aAAa,GAAG,CAAC,CAAC;gBAEtC,IAAA,IAAI,GAAK,KAAI,CAAC,oBAAoB,EAAE,KAAhC,CAAiC;gBAC7C,IAAM,UAAU,GACd,KAAK;oBACL,CAAC,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,yBAAyB,EAAE;wBAC/C,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,KAAK;wBACvB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACT,IAAM,aAAa,GAAG;oBACpB,CAAC,EACC,KAAI,CAAC,SAAS,CAAC,IAAI;wBACnB,CAAC,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,yBAAyB,EAAE;4BAC/C,CAAC,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,KAAK,GAAG,cAAc;4BACzC,CAAC,CAAC,cAAc,CAAC;oBACrB,CAAC,EAAE,IAAI;iBACR,CAAC;gBACF,IAAM,eAAe,GACnB,SAAS;oBACT,CAAC,KAAI,CAAC,GAAG,CAAC,WAAW,CAAC,yBAAyB,EAAE;wBAC/C,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,KAAK;wBACvB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACT,IAAM,WAAS,GAAG,eAAe,GAAG,UAAU,CAAC;gBAC/C,IAAM,QAAQ,GAAG,CAAC,UAAU,GAAG,eAAe,CAAC,GAAG,UAAU,CAAC;gBAE7D,gBAAgB;gBAChB,KAAI,CAAC,UAAU,GAAG,IAAI,SAAS,CAAC;oBAC9B,YAAY,EAAE,IAAI;oBAClB,QAAQ,EAAE,UAAU;oBACpB,QAAQ,UAAA;oBACR,8BAA8B;oBAC9B,QAAQ,EAAE,aAAa;oBACvB,WAAW,EAAE,CAAC,OAAO,GAAG,CAAC,UAAU,GAAG,QAAQ,CAAC,CAAC,GAAG,WAAS;oBAC5D,KAAK,EAAE,KAAI,CAAC,cAAc;oBAC1B,qBAAqB,EAAE,WAAS;iBACjC,CAAC,CAAC;gBAEH,KAAI,CAAC,UAAU,CAAC,EAAE,CAChB,UAAU,CAAC,YAAY,EACvB,UAAC,EAA6B;wBAA3B,MAAM,YAAA,EAAE,iBAAiB,uBAAA;oBAC1B,IAAM,UAAU,GAAG,KAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,WAAS,CAAC,CAAC;oBACnE,IAAI,iBAAiB,EAAE;wBACrB,KAAI,CAAC,UAAU,CAAC,iBAAiB,CAC/B,KAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,KAAI,CAAC,UAAU,CAAC,EACpD,KAAK,CACN,CAAC;qBACH;oBAED,KAAI,CAAC,eAAe,CAAC;wBACnB,OAAO,EAAE,UAAU;qBACpB,CAAC,CAAC;oBACH,KAAI,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,CAAC,CACF,CAAC;gBAEF,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC;aAC3C;QACH,CAAC,CAAC;QAEM,yBAAoB,GAAG;YACvB,IAAA,KAAiB,KAAI,CAAC,SAAS,EAA7B,IAAI,UAAA,EAAE,IAAI,UAAmB,CAAC;YAChC,IAAA,KAAoB,KAAI,CAAC,WAAW,EAAE,EAApC,KAAK,WAAA,EAAE,MAAM,YAAuB,CAAC;YAC7C,IAAM,aAAa,GACjB,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB;gBACtD,qBAAqB,CAAC,OAAO,CAAC;YAEhC,OAAO;gBACL,IAAI,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,KAAI,CAAC,aAAa;gBACzD,IAAI,EAAE,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,GAAG,KAAI,CAAC,aAAa;aACzD,CAAC;QACJ,CAAC,CAAC;QAEF,qBAAgB,GAAG,UAAC,MAAc,EAAE,UAAkB,EAAE,OAAe;YACrE,IAAI,MAAM,GAAG,UAAU,EAAE;gBACvB,IAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAC1B,CAAC,MAAM,GAAG,UAAU,CAAC,GAAG,MAAM,EAC9B,qBAAqB,CACtB,CAAC;gBACF,IAAM,WAAS,GAAG,UAAU,GAAG,MAAM,CAAC;gBAC9B,IAAA,IAAI,GAAK,KAAI,CAAC,oBAAoB,EAAE,KAAhC,CAAiC;gBAE7C,KAAI,CAAC,UAAU,GAAG,IAAI,SAAS,CAAC;oBAC9B,YAAY,EAAE,KAAK;oBACnB,QAAQ,EAAE,MAAM;oBAChB,QAAQ,EAAE,WAAW;oBACrB,WAAW,EAAE,CAAC,OAAO,GAAG,CAAC,MAAM,GAAG,WAAW,CAAC,CAAC,GAAG,WAAS;oBAC3D,QAAQ,EAAE;wBACR,CAAC,EAAE,IAAI;wBACP,CAAC,EAAE,KAAI,CAAC,SAAS,CAAC,IAAI;qBACvB;oBACD,KAAK,EAAE,KAAI,CAAC,cAAc;oBAC1B,qBAAqB,EAAE,WAAS;iBACjC,CAAC,CAAC;gBAEH,KAAI,CAAC,UAAU,CAAC,EAAE,CAChB,UAAU,CAAC,YAAY,EACvB,UAAC,EAA6B;wBAA3B,MAAM,YAAA,EAAE,iBAAiB,uBAAA;oBAC1B,IAAM,UAAU,GAAG,KAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,WAAS,CAAC,CAAC;oBACnE,IAAI,iBAAiB,EAAE;wBACrB,KAAI,CAAC,UAAU,CAAC,iBAAiB,CAC/B,KAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,KAAI,CAAC,UAAU,CAAC,EACpD,KAAK,CACN,CAAC;qBACH;oBAED,KAAI,CAAC,eAAe,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC,CAAC;oBAC9C,KAAI,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,CAAC,CACF,CAAC;gBAEF,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC;aAC3C;QACH,CAAC,CAAC;QAEF,4EAA4E;QAC5E,uBAAkB,GAAG,UAAC,MAAc,EAAE,SAAoB;YAChD,IAAA,QAAQ,GAAsC,SAAS,SAA/C,EAAE,QAAQ,GAA4B,SAAS,SAArC,EAAE,qBAAqB,GAAK,SAAS,sBAAd,CAAe;YAChE,OAAO,CAAC,MAAM,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,CAAC,GAAG,qBAAqB,CAAC;QAClE,CAAC,CAAC;QAEF,6BAAwB,GAAG,UAAC,EAAyC;gBAAvC,MAAM,YAAA,EAAE,MAAM,YAAA;YAC1C,OAAO,CACL,MAAM,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI;gBAC5B,MAAM,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI;gBAC5B,MAAM,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI;gBAC5B,MAAM,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI,CAC7B,CAAC;QACJ,CAAC,CAAC;QAEF,8BAAyB,GAAG,UAAC,EAAyC;gBAAvC,MAAM,YAAA,EAAE,MAAM,YAAA;YAC3C,OAAO,CACL,MAAM,GAAG,KAAI,CAAC,UAAU,CAAC,IAAI;gBAC7B,MAAM,GAAG,KAAI,CAAC,UAAU,CAAC,IAAI;gBAC7B,MAAM,GAAG,KAAI,CAAC,UAAU,CAAC,IAAI;gBAC7B,MAAM,GAAG,KAAI,CAAC,UAAU,CAAC,IAAI,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CACtD,CAAC;QACJ,CAAC,CAAC;QAEF,oCAA+B,GAAG,UAAC,EAA0B;;gBAAxB,MAAM,YAAA,EAAE,MAAM,YAAA,EAAE,MAAM,YAAA;YACzD,sBAAsB;YACtB,IAAI,KAAI,CAAC,yBAAyB,CAAC,EAAE,MAAM,QAAA,EAAE,MAAM,QAAA,EAAE,CAAC,EAAE;gBACtD,MAAA,KAAI,CAAC,aAAa,0CAAE,gBAAgB,CAAC,MAAM,CAAC,CAAC;aAC9C;QACH,CAAC,CAAC;QAEF,iCAA4B,GAAG,UAAC,EAA0B;;gBAAxB,MAAM,YAAA,EAAE,MAAM,YAAA,EAAE,MAAM,YAAA;YACtD,oCAAoC;YACpC,IACE,CAAC,KAAI,CAAC,aAAa;gBACnB,KAAI,CAAC,wBAAwB,CAAC,EAAE,MAAM,QAAA,EAAE,MAAM,QAAA,EAAE,CAAC,EACjD;gBACA,MAAA,KAAI,CAAC,UAAU,0CAAE,gBAAgB,CAAC,MAAM,CAAC,CAAC;aAC3C;QACH,CAAC,CAAC;QAEF,mBAAc,GAAG,UAAC,MAAc;YAC9B,IAAI,CAAC,KAAI,CAAC,UAAU,EAAE;gBACpB,OAAO,IAAI,CAAC;aACb;YAED,IAAM,uBAAuB,GAC3B,CAAC,KAAI,CAAC,aAAa,IAAI,KAAI,CAAC,aAAa,CAAC,WAAW,IAAI,CAAC,CAAC;YAE7D,IAAM,mBAAmB,GAAG,MAAM,IAAI,CAAC,IAAI,KAAI,CAAC,UAAU,CAAC,WAAW,IAAI,CAAC,CAAC;YAE5E,OAAO,mBAAmB,IAAI,uBAAuB,CAAC;QACxD,CAAC,CAAC;QAEF,oBAAe,GAAG,UAAC,MAAc;;YAC/B,IAAI,CAAC,KAAI,CAAC,UAAU,EAAE;gBACpB,OAAO,IAAI,CAAC;aACb;YAED,IAAM,aAAa,GAAG,KAAI,CAAC,WAAW,CAAC,iBAAiB,EAAE;gBACxD,CAAC,CAAC,MAAA,KAAI,CAAC,SAAS,0CAAE,KAAK;gBACvB,CAAC,CAAC,MAAA,KAAI,CAAC,SAAS,0CAAE,IAAI,CAAC;YAEzB,IAAM,wBAAwB,GAC5B,CAAC,KAAI,CAAC,aAAa;gBACnB,KAAI,CAAC,aAAa,CAAC,WAAW,GAAG,KAAI,CAAC,aAAa,CAAC,QAAQ;oBAC1D,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC;YAE1B,IAAM,oBAAoB,GACxB,KAAI,CAAC,UAAU,CAAC,WAAW,GAAG,KAAI,CAAC,UAAU,CAAC,QAAQ,IAAI,aAAa,CAAC;YAE1E,OAAO,MAAM,IAAI,CAAC,IAAI,oBAAoB,IAAI,wBAAwB,CAAC;QACzE,CAAC,CAAC;QAEF,kBAAa,GAAG,UAAC,MAAc;;YAC7B,IAAI,CAAC,KAAI,CAAC,UAAU,EAAE;gBACpB,OAAO,IAAI,CAAC;aACb;YACD,OAAO,MAAM,IAAI,CAAC,IAAI,CAAA,MAAA,KAAI,CAAC,UAAU,0CAAE,WAAW,KAAI,CAAC,CAAC;QAC1D,CAAC,CAAC;QAEF,qBAAgB,GAAG,UAAC,MAAc;;YAChC,IAAI,CAAC,KAAI,CAAC,UAAU,EAAE;gBACpB,OAAO,IAAI,CAAC;aACb;YACD,OAAO,CACL,MAAM,IAAI,CAAC;gBACX,CAAA,MAAA,KAAI,CAAC,UAAU,0CAAE,WAAW,KAAG,MAAA,KAAI,CAAC,UAAU,0CAAE,QAAQ,CAAA;qBACtD,MAAA,KAAI,CAAC,SAAS,0CAAE,MAAM,CAAA,CACzB,CAAC;QACJ,CAAC,CAAC;QAEF,oCAA+B,GAAG,UAAC,MAAc;YAC/C,OAAO,CAAC,KAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;QACvE,CAAC,CAAC;QAEF,sCAAiC,GAAG,UAAC,MAAc;YACjD,OAAO,CAAC,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QACvE,CAAC,CAAC;QAEF;;;;;;UAME;QACF,4BAAuB,GAAG,UACxB,MAAc,EACd,MAAc,EACd,MAAc;YAEd,IAAM,qBAAqB,GAAG,MAAM,IAAI,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC;YAC7D,uBAAuB;YACvB,IAAI,qBAAqB,EAAE;gBACzB,OAAO,KAAK,CAAC;aACd;YACD,IAAI,MAAM,KAAK,CAAC,EAAE;gBAChB,OAAO,KAAI,CAAC,+BAA+B,CAAC,MAAM,CAAC,CAAC;aACrD;YACD,IAAI,MAAM,KAAK,CAAC,EAAE;gBAChB,OAAO,KAAI,CAAC,iCAAiC,CAAC,MAAM,CAAC,CAAC;aACvD;YACD,OAAO,KAAK,CAAC;QACf,CAAC,CAAC;QAEF,sBAAiB,GAAG;YAClB,IAAI,QAAQ,EAAE,IAAI,KAAI,CAAC,aAAa,EAAE;gBACpC,OAAO,KAAK,CAAC;aACd;YACD,oBAAoB,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC;YACzC,OAAO,IAAI,CAAC;QACd,CAAC,CAAC;QAEF,+BAA0B,GAAG;YAC3B,IAAI,QAAQ,EAAE,EAAE;gBACd,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC3B;QACH,CAAC,CAAC;QAEF,YAAO,GAAG,UAAC,KAAmB;;YAC5B,IAAM,KAAK,GAAG,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,gBAAgB,CAAC;YAC5D,IAAA,MAAM,GAA6B,KAAK,OAAlC,EAAE,MAAM,GAAqB,KAAK,OAA1B,EAAE,MAAM,GAAa,KAAK,OAAlB,EAAE,MAAM,GAAK,KAAK,OAAV,CAAW;YAC3C,IAAA,KAAA,OAAqC,gBAAgB,CACzD,MAAM,EACN,MAAM,EACN,KAAK,CACN,IAAA,EAJM,eAAe,QAAA,EAAE,eAAe,QAItC,CAAC;YAEF,KAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;YAC/B,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;YAE/C,IACE,CAAC,KAAI,CAAC,uBAAuB,CAAC,eAAe,EAAE,eAAe,EAAE,MAAM,CAAC,EACvE;gBACA,OAAO;aACR;YAED,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,cAAc,qDAAI,CAAC;YAC1B,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;YAElE,IAAI,CAAC,KAAI,CAAC,iBAAiB,EAAE,EAAE;gBAC7B,OAAO;aACR;YAED,KAAI,CAAC,aAAa,GAAG,qBAAqB,CAAC;;gBACnC,IAAA,KAIF,KAAI,CAAC,eAAe,EAAE,EAHf,cAAc,aAAA,EACd,cAAc,aAAA,EACvB,WAAW,iBACa,CAAC;gBAE3B,IAAI,eAAe,KAAK,CAAC,EAAE;oBACzB,KAAI,CAAC,uBAAuB,EAAE,CAAC;oBAC/B,KAAI,CAAC,+BAA+B,CAAC;wBACnC,MAAM,QAAA;wBACN,MAAM,QAAA;wBACN,MAAM,EAAE,eAAe,GAAG,WAAW;qBACtC,CAAC,CAAC;oBACH,KAAI,CAAC,4BAA4B,CAAC;wBAChC,MAAM,QAAA;wBACN,MAAM,QAAA;wBACN,MAAM,EAAE,eAAe,GAAG,cAAc;qBACzC,CAAC,CAAC;iBACJ;gBAED,IAAI,eAAe,KAAK,CAAC,EAAE;oBACzB,KAAI,CAAC,qBAAqB,EAAE,CAAC;oBAC7B,MAAA,KAAI,CAAC,UAAU,0CAAE,gBAAgB,CAAC,eAAe,GAAG,cAAc,CAAC,CAAC;iBACrE;gBAED,KAAI,CAAC,0BAA0B,EAAE,CAAC;gBAClC,KAAI,CAAC,0BAA0B,EAAE,CAAC;YACpC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAuDF,YAAO,GAAG,UAAC,IAA0B;YAC3B,IAAA,gBAAgB,GAAK,KAAI,CAAC,WAAW,iBAArB,CAAsB;YAE9C,gBAAgB,aAAhB,gBAAgB,uBAAhB,gBAAgB,CAAE,GAAG,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC,CAAC;QAEF,mBAAc,GAAG,UAAC,OAAe,EAAE,OAAe;YAChD,IAAM,OAAO,GAAG,KAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YAC1D,YAAY,CAAC,WAAW,EAAE,CAAC,MAAM,CAC/B,cAAc,EACd,KAAI,CAAC,cAAc,EACnB,OAAO,CACR,CAAC;YACI,IAAA,KAAkB,gBAAgB,CAAC,KAAI,CAAC,cAAc,EAAE,OAAO,CAAC,EAA9D,GAAG,SAAA,EAAE,MAAM,YAAmD,CAAC;YAEvE,YAAY,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,iBAAiB,EAAE;gBAC1D,4BAA4B;gBAC5B,IAAI,CAAC,GAAG,EAAE,UAAC,EAAM;wBAAN,KAAA,aAAM,EAAL,CAAC,QAAA,EAAE,CAAC,QAAA;oBACd,IAAM,QAAQ,GAAG,KAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBACrD,IAAI,QAAQ,EAAE;wBACZ,IAAM,IAAI,GAAG,KAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;wBACzC,yBAAyB;wBACzB,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,UAAG,CAAC,cAAI,CAAC,CAAE,CAAC,CAAC;wBAC9B,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;qBACpB;gBACH,CAAC,CAAC,CAAC;gBACH,IAAM,QAAQ,GAAG,gBAAgB,CAC/B,KAAI,CAAC,UAAU,CAAC,WAAW,EAAgB,EAC3C,QAAQ,CACT,CAAC;gBACF,6BAA6B;gBAC7B,IAAI,CAAC,MAAM,EAAE,UAAC,EAAM;wBAAN,KAAA,aAAM,EAAL,CAAC,QAAA,EAAE,CAAC,QAAA;oBACjB,IAAM,OAAO,GAAG,IAAI,CAClB,QAAQ,EACR,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,UAAG,CAAC,cAAI,CAAC,CAAE,EAAhC,CAAgC,CAC3C,CAAC;oBACF,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,MAAM,CAAC,IAAI,CAAC,CAAC;gBACxB,CAAC,CAAC,CAAC;gBACH,iBAAiB,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;gBACpC,YAAY,CAAC,WAAW,EAAE,CAAC,MAAM,CAC/B,6BAAsB,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,MAAM,oBAAU,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,MAAM,uBAAa,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,CAAE,CACzF,CAAC;YACJ,CAAC,CAAC,CAAC;YACH,KAAI,CAAC,cAAc,GAAG,OAAO,CAAC;QAChC,CAAC,CAAC;QAEF;;;;WAIG;QACH,uBAAkB,GAAG,UAAC,OAAe,EAAE,OAAe;YACpD,KAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACxC,CAAC,CAAC;QA0NQ,kBAAa,GAAG,QAAQ,CAAC;YACzB,IAAA,WAAW,GAAK,KAAI,CAAC,WAAW,YAArB,CAAsB;YACzC,kDAAkD;YAClD,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,EAAE;gBAClC,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;aACtE;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;QAjlCN,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC;QACnC,IAAI,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAdD,sBAAI,qCAAc;aAAlB;YACE,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC;QAC1C,CAAC;;;OAAA;IAED,sBAAI,oCAAa;aAAjB;YACE,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;QAClC,CAAC;;;OAAA;IAmED;;OAEG;IACI,0BAAM,GAAb;QACE,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IAChC,CAAC;IAED;;;;;;OAMG;IACO,sCAAkB,GAA5B;QACQ,IAAA,KAAoC,IAAI,CAAC,uBAAuB,CACpE,IAAI,CAAC,eAAe,EAAE,CACvB,EAFO,OAAO,aAAA,EAAE,OAAO,aAAA,EAAE,WAAW,iBAEpC,CAAC;QACF,IAAI,CAAC,eAAe,CAAC;YACnB,OAAO,SAAA;YACP,OAAO,SAAA;YACP,WAAW,aAAA;SACZ,CAAC,CAAC;IACL,CAAC;IAEM,wCAAoB,GAA3B;QACU,IAAA,gBAAgB,GAAK,IAAI,CAAC,GAAG,iBAAb,CAAc;QACtC,OAAO,gBAAgB;YACrB,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,iBAAiB;YAClD,CAAC,CAAC,CAAC,CAAC;IACR,CAAC;IAEM,+BAAW,GAAlB;QACE,OAAO;YACL,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK;YACrB,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM;SACxB,CAAC;IACJ,CAAC;IAEM,oCAAgB,GAAvB;QACQ,IAAA,KAAmC,IAAI,CAAC,YAAY,EAAlD,aAAa,mBAAA,EAAE,aAAa,mBAAsB,CAAC;QAC3D,OAAO,aAAa,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;IACrD,CAAC;IAEM,sCAAkB,GAAzB,UAA0B,YAA0B;QAClD,IAAI,YAAY,CAAC,OAAO,CAAC,KAAK,KAAK,SAAS,EAAE;YAC5C,IAAI,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE;gBAChC,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC;aACxC;iBAAM;gBACL,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;aACtC;YACD,OAAO;SACR;QAED,IAAI,YAAY,CAAC,OAAO,CAAC,KAAK,KAAK,SAAS,EAAE;YAC5C,IAAI,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE;gBAChC,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC;aACxC;iBAAM;gBACL,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;aACtC;SACF;IACH,CAAC;IAEM,wCAAoB,GAA3B;QACU,IAAA,UAAU,GAAK,IAAI,CAAC,GAAG,WAAb,CAAc;QAChC,IAAI,UAAU,EAAE;YACN,IAAA,OAAO,GAAe,UAAU,QAAzB,EAAE,QAAQ,GAAK,UAAU,SAAf,CAAgB;YACzC,IAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC;YACrC,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,QAAQ,EAAE,CAAC,CAAC,CAAC;YACrD,OAAO,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;SACvC;QACD,OAAO,CAAC,CAAC;IACX,CAAC;IAEM,2BAAO,GAAd;QACE,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,oBAAoB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC3C,CAAC;IA2ED;;;;;;OAMG;IACI,sCAAkB,GAAzB,UAA0B,OAAe,EAAE,OAAe;QAClD,IAAA,KAAmD,IAAI,CAAC,SAAS,EAA/C,MAAM,oBAAA,EAAiB,KAAK,mBAAmB,CAAC;QAExE,IAAM,OAAO,GAAG,sBAAsB,CACpC,OAAO,EACP,OAAO,EACP,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,eAAe,EACpB;YACE,KAAK,OAAA;YACL,MAAM,QAAA;YACN,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,CAAC;SACL,EACD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAC3C,CAAC;QAEF,OAAO;YACL,MAAM,EAAE,OAAO;SAChB,CAAC;IACJ,CAAC;IAQS,uCAAmB,GAA7B;QACE,IAAI,CAAC,UAAU,GAAG,IAAI,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC/C,CAAC;IAUD,gCAAY,GAAZ;QACU,IAAA,UAAU,GAAK,IAAI,CAAC,GAAG,WAAb,CAAc;QAChC,OAAO,YAAY,CAAC,IAAI,CAAC,eAAe,EAAE,UAAU,CAAC,CAAC;IACxD,CAAC;IAyfS,wBAAI,GAAd,UAAe,OAAe,EAAE,OAAe;;QAC7C,IAAM,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC;QACnE,MAAA,IAAI,CAAC,WAAW,CAAC,gBAAgB,0CAAE,OAAO,CAAC;YACzC,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE;gBACL,CAAC,EAAE,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;gBAClC,CAAC,EAAE,OAAO;gBACV,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;gBAC/D,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM;aAC9B;SACF,CAAC,CAAC;IACL,CAAC;IAED;;;;;;;OAOG;IACO,0CAAsB,GAAhC,UACE,OAAe,EACf,OAAe,EACf,UAAkB;;QAElB,cAAc,CACZ,IAAI,CAAC,WAAW,CAAC,gBAAgB,EACjC,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,OAAO,EAC/B,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,OAAO,CACjC,CAAC;QACF,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,CACxB,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,UAAU,CAAC,EACxC,OAAO,EACP,yBAAyB,CAC1B,CAAC;QACF,MAAA,IAAI,CAAC,cAAc,0CAAE,UAAU,CAC7B,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,UAAU,CAAC,EACxC,OAAO,EACP,+BAA+B,CAChC,CAAC;QACF,IAAI,CAAC,YAAY,CAAC,WAAW,CAC3B,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,UAAU,CAAC,EACxC,4BAA4B,CAC7B,CAAC;QACF,IAAI,CAAC,WAAW,CAAC,wBAAwB,CACvC,OAAO,EACP,IAAI,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAC3C,CAAC;QACF,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;QAC9D,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,OAAO,EAAE,yBAAyB,CAAC,CAAC;IACpE,CAAC;IAyDS,wBAAI,GAAd;QAAA,iBAkBC;QAjBC,SAAS;QACT,YAAY,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,mBAAmB,EAAE;YAC5D,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,QAAQ,EAAE,CAAC;YACpC,KAAI,CAAC,uBAAuB,CAAC,KAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;YAC7D,KAAI,CAAC,WAAW,CAAC,IAAI,CACnB,OAAO,CAAC,0BAA0B,EAClC,KAAI,CAAC,YAAY,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,0BAA0B;QAC1B,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAChC,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE1B,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAES,oCAAgB,GAA1B;QACQ,IAAA,KAAoB,IAAI,CAAC,WAAW,EAAE,EAApC,KAAK,WAAA,EAAE,MAAM,YAAuB,CAAC;QAC7C,IAAM,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,oCAAoC,CAAW,CAAC;QAC5E,IAAM,OAAO,GAAG,GAAG,CACjB,IAAI,CAAC,GAAG,EACR,sCAAsC,CAC7B,CAAC;QAEZ,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,MAAM,EAAE;YACpC,KAAK,EAAE;gBACL,IAAI,EAAE,KAAK;gBACX,OAAO,SAAA;gBACP,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;gBACJ,KAAK,OAAA;gBACL,MAAM,QAAA;aACP;SACF,CAAC,CAAC;IACL,CAAC;IAED;;;;;;OAMG;IACO,oCAAgB,GAA1B;QACQ,IAAA,KAAoC,IAAI,CAAC,eAAe,EAAE,EAAxD,OAAO,aAAA,EAAE,OAAO,aAAA,EAAE,WAAW,iBAA2B,CAAC;QAC3D,IAAA,KAAoB,IAAI,CAAC,SAAS,EAAhC,KAAK,WAAA,EAAE,MAAM,YAAmB,CAAC;QACzC,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC;QACxD,IAAM,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAExC,mDAAmD;QACnD,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;QAErC,gEAAgE;QAChE,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QAEjD,6BAA6B;QAC7B,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;IACrD,CAAC;IAED;;;;;;;OAOG;IACO,iCAAa,GAAvB;QACE,IAAM,iBAAiB,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAEtD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACrC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACxC,IAAI,iBAAiB,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACjD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;SACpD;QACD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC3C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QAEzC,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SAC/C;QACD,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAC1C;QACD,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC5C,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC5C,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC7C,CAAC;IAES,gCAAY,GAAtB;;QACE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACb,IAAA,KAA+C,IAAI,CAAC,SAAS,EAA3D,CAAC,OAAA,EAAE,cAAc,oBAAA,EAAE,aAAa,mBAAA,EAAE,MAAM,YAAmB,CAAC;YACpE,IAAM,iBAAiB,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;YACtD,OAAO,IAAI,SAAS,CAAC;gBACnB,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK;gBAC5B,MAAM,QAAA;gBACN,aAAa,eAAA;gBACb,cAAc,gBAAA;gBACd,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAA,EAAE;gBACrB,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,QAAQ;gBAChC,aAAa,EAAE,IAAI,CAAC,GAAG,CAAC,aAAa;gBACrC,UAAU,EAAE,MAAA,MAAA,MAAA,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,0CAAE,WAAW,0CAAE,UAAU,mCAAI,EAAE;gBACvE,iBAAiB,mBAAA;gBACjB,WAAW,EAAE,IAAI,CAAC,WAAW;aAC9B,CAAC,CAAC;SACJ;QACD,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAES,gCAAY,GAAtB;QACE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YAChB,IAAA,KAA8C,IAAI,CAAC,SAAS,EAA1D,CAAC,OAAA,EAAE,KAAK,WAAA,EAAE,cAAc,oBAAA,EAAE,aAAa,mBAAmB,CAAC;YACnE,OAAO,IAAI,SAAS,CAAC;gBACnB,KAAK,OAAA;gBACL,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK;gBAClC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM;gBAC9B,aAAa,eAAA;gBACb,cAAc,gBAAA;gBACd,QAAQ,EAAE,EAAE,CAAC,GAAA,EAAE,CAAC,EAAE,CAAC,EAAE;gBACrB,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,QAAQ;gBAChC,uBAAuB,EACrB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,yBAAyB,EAAE;gBAClD,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC;gBACtD,WAAW,EAAE,IAAI,CAAC,WAAW;aAC9B,CAAC,CAAC;SACJ;QACD,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAES,mCAAe,GAAzB;QACE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,OAAO,YAAY,CAAC,eAAe,CACjC,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,oBAAoB,EAAE,EAC3B,IAAI,CAAC,GAAG,EACR,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,WAAW,CACjB,CAAC;SACH;QACD,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAES,yCAAqB,GAA/B;QACE,OAAO,kBAAkB,CAAC,qBAAqB,CAC7C,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,oBAAoB,EAAE,EAC3B,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,EAC3C,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,UAAU,CAAC,KAAK,CACtB,CAAC;IACJ,CAAC;IAES,kCAAc,GAAxB;;QACE,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACf,IAAA,KAAoC,IAAI,CAAC,SAAS,EAAhD,aAAa,mBAAA,EAAE,cAAc,oBAAmB,CAAC;YACzD,IAAM,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;YAC1C,IAAM,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YAC5C,IAAM,KAAK,GAAG,MAAA,IAAI,CAAC,GAAG,0CAAE,KAAK,CAAC;YAC9B,IAAM,QAAQ,GAAgB;gBAC5B,QAAQ,EAAE;oBACR,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;oBACpB,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;iBACrB;gBACD,KAAK,EAAE,WAAW;gBAClB,MAAM,EAAE,YAAY;gBACpB,aAAa,eAAA;gBACb,cAAc,gBAAA;gBACd,sBAAsB,EAAE,KAAK;gBAC7B,uBAAuB,EAAE,KAAK;gBAC9B,uBAAuB,EACrB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,yBAAyB,EAAE;gBAClD,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,WAAW,EAAE;gBAC/C,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW;aAClC,CAAC;YACF,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAC;SACtD;QACD,OAAO,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAED;;;;;OAKG;IACO,qCAAiB,GAA3B,UAA4B,KAAY;QAAZ,sBAAA,EAAA,YAAY;QAChC,IAAA,KAAwC,IAAI,CAAC,eAAe,EAAE,EAA5D,OAAO,aAAA,EAAW,EAAE,aAAA,EAAE,WAAW,iBAA2B,CAAC;QACrE,IAAI,OAAO,GAAG,EAAE,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAE/C,IAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CACzB,CAAC,EACD,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,CACtE,CAAC;QAEF,IAAI,OAAO,GAAG,UAAU,EAAE;YACxB,OAAO,GAAG,UAAU,CAAC;SACtB;QAED,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;SAC3C;aAAM;YACL,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;SACvC;QAED,IAAI,CAAC,sBAAsB,CAAC,OAAO,EAAE,OAAO,EAAE,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAE5B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE,EAAE,OAAO,SAAA,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;QACxE,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAUS,2CAAuB,GAAjC,UAAkC,WAAwB;QAAxB,4BAAA,EAAA,gBAAwB;QAClD,IAAA,KAAqB,IAAI,CAAC,WAAW,EAAnC,KAAK,WAAA,EAAE,OAAO,aAAqB,CAAC;QACpC,IAAA,kBAAkB,GAAK,OAAO,CAAC,WAAW,mBAAxB,CAAyB;QAEnD,eAAe;QACf,IAAM,qBAAqB,GACzB,WAAW,CAAC,MAAM,GAAG,kBAAkB,CAAC,MAAM,CAAC;QACjD,IAAM,mBAAmB,GAAG,KAAK,CAAC,GAAG,CAAC,qBAAqB,EAAE,EAAE,CAAC,CAAC;QAEjE,IAAI,qBAAqB,KAAK,mBAAmB,CAAC,MAAM,EAAE;YACxD,KAAK,CAAC,GAAG,CAAC,qBAAqB,EAAE,WAAW,CAAC,CAAC;SAC/C;IACH,CAAC;IACH,gBAAC;AAAD,CAAC,AAlqCD,IAkqCC\"}"}
