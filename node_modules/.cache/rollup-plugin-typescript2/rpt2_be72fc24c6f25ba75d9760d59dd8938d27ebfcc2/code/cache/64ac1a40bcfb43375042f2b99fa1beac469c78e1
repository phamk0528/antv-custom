{"code":"import { __assign, __extends, __read } from \"tslib\";\r\nimport { first, map, includes, find, isEqual, get, forEach } from 'lodash';\r\nimport { shouldShowActionIcons } from \"../utils/cell/header-cell\";\r\nimport { EXTRA_FIELD } from \"../common/constant/basic\";\r\nimport { BaseCell } from \"./base-cell\";\r\nimport { InteractionStateName } from \"../common/constant/interaction\";\r\nimport { GuiIcon } from \"../common/icons\";\r\nimport { includeCell } from \"../utils/cell/data-cell\";\r\nimport { S2Event } from \"../common/constant\";\r\nimport { CellTypes } from \"../common/constant\";\r\nimport { getSortTypeIcon } from \"../utils/sort-action\";\r\nvar HeaderCell = /** @class */ (function (_super) {\r\n    __extends(HeaderCell, _super);\r\n    function HeaderCell() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    HeaderCell.prototype.handleRestOptions = function () {\r\n        var _a = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            _a[_i] = arguments[_i];\r\n        }\r\n        var _b = __read(_a, 1), headerConfig = _b[0];\r\n        this.headerConfig = __assign({}, headerConfig);\r\n        var _c = this.meta, value = _c.value, query = _c.query;\r\n        var sortParams = this.spreadsheet.dataCfg.sortParams;\r\n        var isSortCell = this.isSortCell(); // 改单元格是否为需要展示排序 icon 单元格\r\n        var sortParam = find(sortParams.reverse(), function (item) {\r\n            return isSortCell &&\r\n                (item === null || item === void 0 ? void 0 : item.sortByMeasure) === value &&\r\n                isEqual(get(item, 'query'), query);\r\n        });\r\n        var type = getSortTypeIcon(sortParam, isSortCell);\r\n        this.headerConfig.sortParam = __assign(__assign(__assign({}, this.headerConfig.sortParam), (sortParam || { query: query })), { type: type });\r\n    };\r\n    HeaderCell.prototype.initCell = function () {\r\n        this.actionIcons = [];\r\n    };\r\n    // 头部cell不需要使用formatter进行格式化，formatter只针对于data cell\r\n    HeaderCell.prototype.getFormattedFieldValue = function () {\r\n        var _a = this.meta, label = _a.label, field = _a.field;\r\n        if (!isEqual(field, EXTRA_FIELD)) {\r\n            return {\r\n                formattedValue: label,\r\n                value: label,\r\n            };\r\n        }\r\n        var fieldName = this.spreadsheet.dataSet.getFieldName(label);\r\n        return {\r\n            formattedValue: fieldName || label,\r\n            value: label,\r\n        };\r\n    };\r\n    HeaderCell.prototype.showActionIcons = function (actionIconCfg) {\r\n        return shouldShowActionIcons(actionIconCfg, this.meta, this.cellType);\r\n    };\r\n    HeaderCell.prototype.getActionIconCfg = function () {\r\n        var _this = this;\r\n        return find(this.spreadsheet.options.headerActionIcons, function (headerActionIcon) {\r\n            return _this.showActionIcons(headerActionIcon);\r\n        });\r\n    };\r\n    HeaderCell.prototype.showSortIcon = function () {\r\n        if (this.spreadsheet.options.showDefaultHeaderActionIcon) {\r\n            var sortParam = this.headerConfig.sortParam;\r\n            var query = this.meta.query;\r\n            // sortParam的query，和type本身可能会 undefined\r\n            return (query &&\r\n                isEqual(get(sortParam, 'query'), query) &&\r\n                get(sortParam, 'type') &&\r\n                get(sortParam, 'type') !== 'none');\r\n        }\r\n        return false;\r\n    };\r\n    HeaderCell.prototype.getActionIconsCount = function () {\r\n        if (this.showSortIcon()) {\r\n            return 1;\r\n        }\r\n        var actionIconCfg = this.getActionIconCfg();\r\n        if (actionIconCfg) {\r\n            var iconNames = actionIconCfg.iconNames;\r\n            return iconNames.length;\r\n        }\r\n        return 0;\r\n    };\r\n    HeaderCell.prototype.getActionIconsWidth = function () {\r\n        var _a = this.getStyle().icon, size = _a.size, margin = _a.margin;\r\n        return (size + margin.left) * this.getActionIconsCount();\r\n    };\r\n    // 绘制排序icon\r\n    HeaderCell.prototype.drawSortIcons = function () {\r\n        var _this = this;\r\n        if (!this.showSortIcon()) {\r\n            return;\r\n        }\r\n        var _a = this.getStyle(), icon = _a.icon, text = _a.text;\r\n        var sortParam = this.headerConfig.sortParam;\r\n        var position = this.getIconPosition();\r\n        var sortIcon = new GuiIcon(__assign(__assign({ name: get(sortParam, 'type', 'none') }, position), { width: icon.size, height: icon.size, fill: text.fill }));\r\n        sortIcon.on('click', function (event) {\r\n            _this.spreadsheet.emit(S2Event.GLOBAL_ACTION_ICON_CLICK, event);\r\n            _this.spreadsheet.handleGroupSort(event, _this.meta);\r\n        });\r\n        this.add(sortIcon);\r\n        this.actionIcons.push(sortIcon);\r\n    };\r\n    // 是否设置为默认隐藏 action icon，默认隐藏的交互为 hover 后可见\r\n    HeaderCell.prototype.hasDefaultHideActionIcon = function () {\r\n        var actionIconCfg = this.getActionIconCfg();\r\n        return actionIconCfg === null || actionIconCfg === void 0 ? void 0 : actionIconCfg.defaultHide;\r\n    };\r\n    HeaderCell.prototype.addActionIcon = function (iconName, x, y, size, action, defaultHide) {\r\n        var _this = this;\r\n        var text = this.getStyle().text;\r\n        var icon = new GuiIcon({\r\n            name: iconName,\r\n            x: x,\r\n            y: y,\r\n            width: size,\r\n            height: size,\r\n            fill: text.fill,\r\n        });\r\n        // 默认隐藏，hover 可见\r\n        icon.set('visible', !defaultHide);\r\n        icon.on('mouseover', function (event) {\r\n            _this.spreadsheet.emit(S2Event.GLOBAL_ACTION_ICON_HOVER, event);\r\n        });\r\n        icon.on('click', function (event) {\r\n            _this.spreadsheet.emit(S2Event.GLOBAL_ACTION_ICON_CLICK, event);\r\n            action({\r\n                iconName: iconName,\r\n                meta: _this.meta,\r\n                event: event,\r\n            });\r\n        });\r\n        this.actionIcons.push(icon);\r\n        this.add(icon);\r\n    };\r\n    HeaderCell.prototype.drawActionIcons = function () {\r\n        var _this = this;\r\n        if (this.showSortIcon()) {\r\n            this.drawSortIcons();\r\n            return;\r\n        }\r\n        var actionIconCfg = this.getActionIconCfg();\r\n        if (!actionIconCfg)\r\n            return;\r\n        var iconNames = actionIconCfg.iconNames, action = actionIconCfg.action, defaultHide = actionIconCfg.defaultHide;\r\n        var position = this.getIconPosition(iconNames.length);\r\n        var _a = this.getStyle().icon, size = _a.size, margin = _a.margin;\r\n        forEach(iconNames, function (iconName, key) {\r\n            var x = position.x + key * size + key * margin.left;\r\n            _this.addActionIcon(iconName, x, position.y, size, action, defaultHide);\r\n        });\r\n    };\r\n    HeaderCell.prototype.isSortCell = function () {\r\n        var _a, _b, _c;\r\n        // 数值置于列头, 排序 icon 绘制在列头叶子节点; 置于行头, 排序 icon 绘制在行头叶子节点\r\n        var isValueInCols = (_b = (_a = this.meta.spreadsheet) === null || _a === void 0 ? void 0 : _a.isValueInCols) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n        var isMaxLevel = this.meta.level === ((_c = this.meta.hierarchy) === null || _c === void 0 ? void 0 : _c.maxLevel);\r\n        if (isValueInCols) {\r\n            return isMaxLevel && this.cellType === CellTypes.COL_CELL;\r\n        }\r\n        return isMaxLevel && this.cellType === CellTypes.ROW_CELL;\r\n    };\r\n    HeaderCell.prototype.handleHover = function (cells) {\r\n        var _a;\r\n        if (includeCell(cells, this)) {\r\n            this.updateByState(InteractionStateName.HOVER);\r\n            if (this.hasDefaultHideActionIcon()) {\r\n                // hover 只会有一个 cell\r\n                this.toggleActionIcon((_a = cells === null || cells === void 0 ? void 0 : cells[0]) === null || _a === void 0 ? void 0 : _a.id);\r\n            }\r\n        }\r\n    };\r\n    HeaderCell.prototype.handleSelect = function (cells, nodes) {\r\n        if (includeCell(cells, this)) {\r\n            this.updateByState(InteractionStateName.SELECTED);\r\n        }\r\n        var selectedNodeIds = map(nodes, 'id');\r\n        if (includes(selectedNodeIds, this.meta.id)) {\r\n            this.updateByState(InteractionStateName.SELECTED);\r\n        }\r\n    };\r\n    HeaderCell.prototype.toggleActionIcon = function (id) {\r\n        if (this.getMeta().id === id) {\r\n            var visibleActionIcons_1 = [];\r\n            // 理论上每次只会显示一个 header cell 的所有 actionIcon（大部分情况下只会有一个）\r\n            forEach(this.actionIcons, function (icon) {\r\n                icon.set('visible', true);\r\n                visibleActionIcons_1.push(icon);\r\n            });\r\n            this.spreadsheet.store.set('visibleActionIcons', visibleActionIcons_1);\r\n        }\r\n    };\r\n    HeaderCell.prototype.update = function () {\r\n        var interaction = this.spreadsheet.interaction;\r\n        var stateInfo = interaction === null || interaction === void 0 ? void 0 : interaction.getState();\r\n        var cells = interaction === null || interaction === void 0 ? void 0 : interaction.getCells();\r\n        if (!first(cells))\r\n            return;\r\n        switch (stateInfo === null || stateInfo === void 0 ? void 0 : stateInfo.stateName) {\r\n            case InteractionStateName.SELECTED:\r\n                this.handleSelect(cells, stateInfo === null || stateInfo === void 0 ? void 0 : stateInfo.nodes);\r\n                break;\r\n            case InteractionStateName.HOVER_FOCUS:\r\n            case InteractionStateName.HOVER:\r\n                this.handleHover(cells);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n    HeaderCell.prototype.updateByState = function (stateName) {\r\n        _super.prototype.updateByState.call(this, stateName, this);\r\n    };\r\n    HeaderCell.prototype.hideInteractionShape = function () {\r\n        _super.prototype.hideInteractionShape.call(this);\r\n    };\r\n    return HeaderCell;\r\n}(BaseCell));\r\nexport { HeaderCell };\r\n//# sourceMappingURL=header-cell.js.map","references":["F:/Ismart/S2-master/node_modules/@antv/g-canvas/lib/index.d.ts","F:/Ismart/S2-master/node_modules/@types/lodash/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/cell/header-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/basic.ts","F:/Ismart/S2-master/packages/s2-core/src/cell/base-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/interaction.ts","F:/Ismart/S2-master/packages/s2-core/src/common/icons/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/index.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/header/base.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/layout/node.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/cell/data-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/index.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/sort-action.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/index.ts"],"map":"{\"version\":3,\"file\":\"header-cell.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/cell/header-cell.ts\"],\"names\":[],\"mappings\":\"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\"}"}
