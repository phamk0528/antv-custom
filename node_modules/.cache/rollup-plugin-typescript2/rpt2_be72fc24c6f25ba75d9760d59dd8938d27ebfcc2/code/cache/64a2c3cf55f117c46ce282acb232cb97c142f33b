{"code":"/**\r\n * 获取tooltip中需要显示的数据项\r\n */\r\nimport { __assign, __read, __spreadArray } from \"tslib\";\r\nimport { assign, concat, filter, find, forEach, get, isEmpty, isEqual, isNil, isNumber, map, pick, some, uniq, noop, mapKeys, every, isObject, isFunction, compact, } from 'lodash';\r\nimport { handleDataItem } from './cell/data-cell';\r\nimport { isMultiDataItem } from './data-item-type-checker';\r\nimport { customMerge } from './merge';\r\nimport { TOOLTIP_POSITION_OFFSET } from \"../common/constant/tooltip\";\r\nimport { i18n } from \"../common/i18n\";\r\nimport { CellTypes, EXTRA_FIELD, PRECISION, VALUE_FIELD, } from \"../common/constant\";\r\nimport { isNotNumber, getDataSumByField } from \"./number-calculate\";\r\n/** whether the data of hover is selected */\r\nexport var isHoverDataInSelectedData = function (selectedData, activeData) {\r\n    return some(selectedData, function (dataItem) {\r\n        return isEqual(dataItem, activeData);\r\n    });\r\n};\r\n/**\r\n * calculate tooltip show position\r\n */\r\nexport var getAutoAdjustPosition = function (_a) {\r\n    var spreadsheet = _a.spreadsheet, position = _a.position, tooltipContainer = _a.tooltipContainer, autoAdjustBoundary = _a.autoAdjustBoundary;\r\n    var x = position.x + TOOLTIP_POSITION_OFFSET.x;\r\n    var y = position.y + TOOLTIP_POSITION_OFFSET.y;\r\n    if (!autoAdjustBoundary) {\r\n        return {\r\n            x: x,\r\n            y: y,\r\n        };\r\n    }\r\n    var isAdjustBodyBoundary = autoAdjustBoundary === 'body';\r\n    var _b = spreadsheet.facet.panelBBox, maxX = _b.maxX, maxY = _b.maxY;\r\n    var _c = spreadsheet.options, width = _c.width, height = _c.height;\r\n    var canvas = spreadsheet.container.get('el');\r\n    var _d = canvas.getBoundingClientRect(), canvasOffsetTop = _d.top, canvasOffsetLeft = _d.left;\r\n    var _e = tooltipContainer.getBoundingClientRect(), tooltipWidth = _e.width, tooltipHeight = _e.height;\r\n    var _f = document.body.getBoundingClientRect(), viewportWidth = _f.width, viewportHeight = _f.height;\r\n    var maxWidth = isAdjustBodyBoundary\r\n        ? viewportWidth\r\n        : Math.min(width, maxX) + canvasOffsetLeft;\r\n    var maxHeight = isAdjustBodyBoundary\r\n        ? viewportHeight\r\n        : Math.min(height, maxY) + canvasOffsetTop;\r\n    if (x + tooltipWidth >= maxWidth) {\r\n        x = maxWidth - tooltipWidth;\r\n    }\r\n    if (y + tooltipHeight >= maxHeight) {\r\n        y = maxHeight - tooltipHeight;\r\n    }\r\n    return {\r\n        x: x,\r\n        y: y,\r\n    };\r\n};\r\nexport var getTooltipDefaultOptions = function (options) {\r\n    return __assign({ operator: { onClick: noop, menus: [] }, enterable: true, enableFormat: true }, options);\r\n};\r\nexport var getMergedQuery = function (meta) {\r\n    return __assign(__assign({}, meta === null || meta === void 0 ? void 0 : meta.colQuery), meta === null || meta === void 0 ? void 0 : meta.rowQuery);\r\n};\r\n/**\r\n * add style to container\r\n */\r\nexport var setContainerStyle = function (container, options) {\r\n    if (options === void 0) { options = {\r\n        className: '',\r\n    }; }\r\n    if (!container) {\r\n        return;\r\n    }\r\n    var style = options.style, className = options.className;\r\n    if (style) {\r\n        Object.keys(style).forEach(function (item) {\r\n            container.style[item] = style[item];\r\n        });\r\n    }\r\n    if (className) {\r\n        container.classList.add(className);\r\n    }\r\n};\r\n/* formate */\r\nexport var getFriendlyVal = function (val) {\r\n    var isInvalidNumber = isNumber(val) && Number.isNaN(val);\r\n    var isEmptyString = val === '';\r\n    return isNil(val) || isInvalidNumber || isEmptyString ? '-' : val;\r\n};\r\nexport var getFieldFormatter = function (spreadsheet, field) {\r\n    var _a;\r\n    var formatter = (_a = spreadsheet === null || spreadsheet === void 0 ? void 0 : spreadsheet.dataSet) === null || _a === void 0 ? void 0 : _a.getFieldFormatter(field);\r\n    return function (v, data) {\r\n        return getFriendlyVal(formatter(v, data));\r\n    };\r\n};\r\nexport var getListItem = function (spreadsheet, _a) {\r\n    var _b;\r\n    var data = _a.data, field = _a.field, valueField = _a.valueField, _c = _a.useCompleteDataForFormatter, useCompleteDataForFormatter = _c === void 0 ? true : _c;\r\n    var name = (_b = spreadsheet === null || spreadsheet === void 0 ? void 0 : spreadsheet.dataSet) === null || _b === void 0 ? void 0 : _b.getFieldName(field);\r\n    var formatter = getFieldFormatter(spreadsheet, field);\r\n    // 暂时对 object 类型 data 不作处理，上层通过自定义 tooltip 的方式去自行定制\r\n    var dataValue = isObject(data[field])\r\n        ? JSON.stringify(data[field])\r\n        : data[field];\r\n    var value = formatter(valueField || dataValue, useCompleteDataForFormatter ? data : undefined);\r\n    return {\r\n        name: name,\r\n        value: value,\r\n    };\r\n};\r\nexport var getFieldList = function (spreadsheet, fields, activeData) {\r\n    var currFields = filter(concat([], fields), function (field) { return field !== EXTRA_FIELD && activeData[field]; });\r\n    var fieldList = map(currFields, function (field) {\r\n        return getListItem(spreadsheet, {\r\n            data: activeData,\r\n            field: field,\r\n            useCompleteDataForFormatter: false,\r\n        });\r\n    });\r\n    return fieldList;\r\n};\r\n/**\r\n * 获取选中格行/列头信息\r\n * @param spreadsheet\r\n * @param activeData\r\n */\r\nexport var getHeadInfo = function (spreadsheet, activeData, options) {\r\n    var _a, _b, _c, _d;\r\n    var isTotals = (options || {}).isTotals;\r\n    var colList = [];\r\n    var rowList = [];\r\n    if (activeData) {\r\n        var colFields = (_b = (_a = spreadsheet === null || spreadsheet === void 0 ? void 0 : spreadsheet.dataSet) === null || _a === void 0 ? void 0 : _a.fields) === null || _b === void 0 ? void 0 : _b.columns;\r\n        var rowFields = (_d = (_c = spreadsheet === null || spreadsheet === void 0 ? void 0 : spreadsheet.dataSet) === null || _c === void 0 ? void 0 : _c.fields) === null || _d === void 0 ? void 0 : _d.rows;\r\n        colList = getFieldList(spreadsheet, colFields, activeData);\r\n        rowList = getFieldList(spreadsheet, rowFields, activeData);\r\n    }\r\n    // 此时是总计-总计\r\n    if (isEmpty(colList) && isEmpty(rowList) && isTotals) {\r\n        colList = [{ value: i18n('总计') }];\r\n    }\r\n    return { cols: colList, rows: rowList };\r\n};\r\n/**\r\n * 获取数据明细\r\n * @param spreadsheet\r\n * @param activeData\r\n * @param options\r\n */\r\nexport var getDetailList = function (spreadsheet, activeData, options) {\r\n    if (activeData) {\r\n        var isTotals = options.isTotals;\r\n        var field = activeData[EXTRA_FIELD];\r\n        var value = activeData[field];\r\n        var valItem_1 = [];\r\n        if (isTotals) {\r\n            // total/subtotal\r\n            valItem_1.push(getListItem(spreadsheet, {\r\n                data: activeData,\r\n                field: field,\r\n                valueField: get(activeData, VALUE_FIELD),\r\n            }));\r\n        }\r\n        // the value hangs at the head of the column, match the displayed fields according to the metric itself\r\n        // 1、multiple derivative indicators\r\n        // 2、only one column scene\r\n        // 3、the clicked cell belongs to the derived index column\r\n        // tooltip need to show all derivative indicators\r\n        else if (isMultiDataItem(value) &&\r\n            spreadsheet.getTooltipDataItemMappingCallback()) {\r\n            var mappedResult_1 = handleDataItem(activeData, spreadsheet.getTooltipDataItemMappingCallback());\r\n            forEach(mappedResult_1, function (_, key) {\r\n                valItem_1.push(getListItem(spreadsheet, { data: mappedResult_1, field: key }));\r\n            });\r\n        }\r\n        else {\r\n            valItem_1.push(getListItem(spreadsheet, { data: activeData, field: field }));\r\n        }\r\n        return valItem_1;\r\n    }\r\n};\r\nexport var getSummaryName = function (spreadsheet, currentField, isTotals) {\r\n    var _a;\r\n    if (isTotals) {\r\n        return i18n('总计');\r\n    }\r\n    var name = (_a = spreadsheet === null || spreadsheet === void 0 ? void 0 : spreadsheet.dataSet) === null || _a === void 0 ? void 0 : _a.getFieldName(currentField);\r\n    return name && name !== 'undefined' ? name : '';\r\n};\r\nexport var getSelectedValueFields = function (selectedData, field) {\r\n    return uniq(selectedData.map(function (d) { return get(d, field); }));\r\n};\r\nvar getRowOrColSelectedIndexes = function (nodes, leafNodes, isRow) {\r\n    if (isRow === void 0) { isRow = true; }\r\n    var selectedIndexes = [];\r\n    forEach(leafNodes, function (leaf, index) {\r\n        forEach(nodes, function (item) {\r\n            if (!isRow && item.colIndex !== -1) {\r\n                selectedIndexes.push([index, item.colIndex]);\r\n            }\r\n            else if (isRow && item.rowIndex !== -1) {\r\n                selectedIndexes.push([item.rowIndex, index]);\r\n            }\r\n        });\r\n    });\r\n    return selectedIndexes;\r\n};\r\nexport var getSelectedCellIndexes = function (spreadsheet, layoutResult) {\r\n    var _a;\r\n    var rowLeafNodes = layoutResult.rowLeafNodes, colLeafNodes = layoutResult.colLeafNodes;\r\n    var _b = spreadsheet.interaction.getState().nodes, nodes = _b === void 0 ? [] : _b;\r\n    var cells = spreadsheet.interaction.getCells();\r\n    var cellType = (_a = cells === null || cells === void 0 ? void 0 : cells[0]) === null || _a === void 0 ? void 0 : _a.type;\r\n    if (cellType === CellTypes.COL_CELL) {\r\n        return getRowOrColSelectedIndexes(nodes, rowLeafNodes, false);\r\n    }\r\n    if (cellType === CellTypes.ROW_CELL) {\r\n        return getRowOrColSelectedIndexes(nodes, colLeafNodes);\r\n    }\r\n    return [];\r\n};\r\nexport var getSelectedCellsData = function (spreadsheet, showSingleTips) {\r\n    var _a;\r\n    var layoutResult = (_a = spreadsheet.facet) === null || _a === void 0 ? void 0 : _a.layoutResult;\r\n    // 列头选择和行头选择没有存所有selected的cell，因此要遍历index对比，而selected则不需要\r\n    if (showSingleTips) {\r\n        // 行头列头单选多选\r\n        // TODO：行头是树形时，state里没有nodes了，得重新兼容下\r\n        var selectedCellIndexes = getSelectedCellIndexes(spreadsheet, layoutResult);\r\n        return map(selectedCellIndexes, function (_a) {\r\n            var _b = __read(_a, 2), i = _b[0], j = _b[1];\r\n            var viewMeta = layoutResult.getCellMeta(i, j);\r\n            return (viewMeta === null || viewMeta === void 0 ? void 0 : viewMeta.data) || getMergedQuery(viewMeta);\r\n        });\r\n    }\r\n    // 其他（刷选，data cell多选）\r\n    var cells = spreadsheet.interaction.getActiveCells();\r\n    return map(cells, function (cell) { var _a; return ((_a = cell.getMeta()) === null || _a === void 0 ? void 0 : _a.data) || getMergedQuery(cell.getMeta()); });\r\n};\r\nexport var getSummaries = function (params) {\r\n    var spreadsheet = params.spreadsheet, getShowValue = params.getShowValue, _a = params.options, options = _a === void 0 ? {} : _a;\r\n    var summaries = [];\r\n    var summary = {};\r\n    var isTableMode = spreadsheet.isTableMode();\r\n    if (isTableMode && (options === null || options === void 0 ? void 0 : options.showSingleTips)) {\r\n        var selectedCellsData_1 = spreadsheet.dataSet.getMultiData({});\r\n        return [{ selectedData: selectedCellsData_1, name: '', value: '' }];\r\n    }\r\n    var selectedCellsData = getSelectedCellsData(spreadsheet, options.showSingleTips); // 拿到选择的所有data-cell的数据\r\n    forEach(selectedCellsData, function (item) {\r\n        var _a;\r\n        if (summary[item === null || item === void 0 ? void 0 : item[EXTRA_FIELD]]) {\r\n            (_a = summary[item === null || item === void 0 ? void 0 : item[EXTRA_FIELD]]) === null || _a === void 0 ? void 0 : _a.push(item);\r\n        }\r\n        else {\r\n            summary[item === null || item === void 0 ? void 0 : item[EXTRA_FIELD]] = [item];\r\n        }\r\n    });\r\n    mapKeys(summary, function (selected, field) {\r\n        var currentFormatter = getFieldFormatter(spreadsheet, field);\r\n        var name = getSummaryName(spreadsheet, field, options === null || options === void 0 ? void 0 : options.isTotals);\r\n        var value;\r\n        if (getShowValue) {\r\n            value = getShowValue(selected, VALUE_FIELD);\r\n        }\r\n        if (isTableMode) {\r\n            value = '';\r\n        }\r\n        else if (every(selected, function (item) { return isNotNumber(get(item, VALUE_FIELD)); })) {\r\n            // 如果选中的单元格都无数据，则显示\"-\"\r\n            value = spreadsheet.options.placeholder;\r\n        }\r\n        else {\r\n            var dataSum = getDataSumByField(selected, VALUE_FIELD);\r\n            value = parseFloat(dataSum.toPrecision(PRECISION)); // solve accuracy problems\r\n            if (currentFormatter) {\r\n                value = currentFormatter(dataSum, selected);\r\n            }\r\n        }\r\n        summaries.push({\r\n            selectedData: selected,\r\n            name: name,\r\n            value: value,\r\n        });\r\n    });\r\n    return summaries;\r\n};\r\nexport var getTooltipData = function (params) {\r\n    var spreadsheet = params.spreadsheet, _a = params.cellInfos, cellInfos = _a === void 0 ? [] : _a, _b = params.options, options = _b === void 0 ? {} : _b, getShowValue = params.getShowValue;\r\n    var summaries = null;\r\n    var headInfo = null;\r\n    var details = null;\r\n    var firstCellInfo = cellInfos[0] || {};\r\n    if (!(options === null || options === void 0 ? void 0 : options.hideSummary)) {\r\n        // 计算多项的sum（默认为sum，可自定义）\r\n        summaries = getSummaries({\r\n            spreadsheet: spreadsheet,\r\n            options: options,\r\n            getShowValue: getShowValue,\r\n        });\r\n    }\r\n    else if (options.showSingleTips) {\r\n        // 行列头hover & 明细表所有hover\r\n        var getFieldName = function (field) { var _a, _b; return (_b = find((_a = spreadsheet.dataCfg) === null || _a === void 0 ? void 0 : _a.meta, function (item) { return (item === null || item === void 0 ? void 0 : item.field) === field; })) === null || _b === void 0 ? void 0 : _b.name; };\r\n        var currentFormatter = getFieldFormatter(spreadsheet, firstCellInfo.valueField);\r\n        var formattedValue = currentFormatter(firstCellInfo.value);\r\n        var cellName = options.enableFormat\r\n            ? getFieldName(firstCellInfo.value) || formattedValue\r\n            : getFieldName(firstCellInfo.valueField);\r\n        firstCellInfo.name = cellName || '';\r\n    }\r\n    else {\r\n        headInfo = getHeadInfo(spreadsheet, firstCellInfo, options);\r\n        details = getDetailList(spreadsheet, firstCellInfo, options);\r\n    }\r\n    var _c = firstCellInfo || {}, interpretation = _c.interpretation, infos = _c.infos, tips = _c.tips, name = _c.name;\r\n    return { summaries: summaries, interpretation: interpretation, infos: infos, tips: tips, name: name, headInfo: headInfo, details: details };\r\n};\r\nexport var mergeCellInfo = function (cells) {\r\n    return map(cells, function (stateCell) {\r\n        var stateCellMeta = stateCell.getMeta();\r\n        return assign({}, stateCellMeta.query || {}, pick(stateCellMeta, ['colIndex', 'rowIndex']));\r\n    });\r\n};\r\nexport var getActiveCellsTooltipData = function (spreadsheet) {\r\n    var cellInfos = [];\r\n    if (!spreadsheet.interaction.isSelectedState()) {\r\n        return [];\r\n    }\r\n    spreadsheet.interaction.getActiveCells().forEach(function (cell) {\r\n        var valueInCols = spreadsheet.dataCfg.fields.valueInCols;\r\n        var meta = cell.getMeta();\r\n        var query = getMergedQuery(meta);\r\n        if (isEmpty(meta) || isEmpty(query)) {\r\n            return;\r\n        }\r\n        var currentCellInfo = __assign(__assign({}, query), { colIndex: valueInCols ? meta.colIndex : null, rowIndex: !valueInCols ? meta.rowIndex : null });\r\n        var isEqualCellInfo = cellInfos.find(function (cellInfo) {\r\n            return isEqual(currentCellInfo, cellInfo);\r\n        });\r\n        if (!isEqualCellInfo) {\r\n            cellInfos.push(currentCellInfo);\r\n        }\r\n    });\r\n    return cellInfos;\r\n};\r\nexport var getTooltipOptionsByCellType = function (cellTooltipConfig, cellType) {\r\n    if (cellTooltipConfig === void 0) { cellTooltipConfig = {}; }\r\n    var getOptionsByCell = function (cellConfig) {\r\n        return customMerge(cellTooltipConfig, cellConfig);\r\n    };\r\n    var col = cellTooltipConfig.col, row = cellTooltipConfig.row, data = cellTooltipConfig.data, corner = cellTooltipConfig.corner;\r\n    if (cellType === CellTypes.COL_CELL) {\r\n        return getOptionsByCell(col);\r\n    }\r\n    if (cellType === CellTypes.ROW_CELL) {\r\n        return getOptionsByCell(row);\r\n    }\r\n    if (cellType === CellTypes.DATA_CELL) {\r\n        return getOptionsByCell(data);\r\n    }\r\n    if (cellType === CellTypes.CORNER_CELL) {\r\n        return getOptionsByCell(corner);\r\n    }\r\n    return __assign({}, cellTooltipConfig);\r\n};\r\nexport var getTooltipOptions = function (spreadsheet, event) {\r\n    var _a;\r\n    var cellType = (_a = spreadsheet.getCellType) === null || _a === void 0 ? void 0 : _a.call(spreadsheet, event.target);\r\n    return getTooltipOptionsByCellType(spreadsheet.options.tooltip, cellType);\r\n};\r\nexport var getTooltipVisibleOperator = function (operation, options) {\r\n    var _a = options.defaultMenus, defaultMenus = _a === void 0 ? [] : _a, cell = options.cell;\r\n    var getDisplayMenus = function (menus) {\r\n        if (menus === void 0) { menus = []; }\r\n        return menus\r\n            .filter(function (menu) {\r\n            var _a;\r\n            return isFunction(menu.visible)\r\n                ? menu.visible(cell)\r\n                : (_a = menu.visible) !== null && _a !== void 0 ? _a : true;\r\n        })\r\n            .map(function (menu) {\r\n            if (menu.children) {\r\n                menu.children = getDisplayMenus(menu.children);\r\n            }\r\n            return menu;\r\n        });\r\n    };\r\n    var displayMenus = getDisplayMenus(operation.menus);\r\n    return {\r\n        onClick: operation.onClick,\r\n        menus: compact(__spreadArray(__spreadArray([], __read(defaultMenus), false), __read(displayMenus), false)),\r\n    };\r\n};\r\n//# sourceMappingURL=tooltip.js.map","references":["F:/Ismart/S2-master/node_modules/@types/lodash/index.d.ts","F:/Ismart/S2-master/node_modules/csstype/index.d.ts","F:/Ismart/S2-master/node_modules/@antv/g-canvas/lib/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/cell/data-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/data-item-type-checker.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/merge.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/basic.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/tooltip.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/tooltip.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/interaction.ts","F:/Ismart/S2-master/packages/s2-core/src/sheet-type/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/i18n/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/index.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/number-calculate.ts"],"map":"{\"version\":3,\"file\":\"tooltip.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/tooltip.ts\"],\"names\":[],\"mappings\":\"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\"}"}
