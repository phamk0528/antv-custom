{"code":"import { __extends, __read } from \"tslib\";\r\nimport { clone, isEmpty, throttle, get } from 'lodash';\r\nimport { BaseEvent } from './base-interaction';\r\nimport { InterceptType, MIN_CELL_HEIGHT, MIN_CELL_WIDTH, RESIZE_MASK_ID, RESIZE_START_GUIDE_LINE_ID, RESIZE_END_GUIDE_LINE_ID, S2Event, ResizeDirectionType, ResizeAreaEffect, ResizeType, } from \"../common/constant\";\r\nvar RowColumnResize = /** @class */ (function (_super) {\r\n    __extends(RowColumnResize, _super);\r\n    function RowColumnResize() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.resizeStartPosition = {};\r\n        _this.resizeMouseMove = function (event) {\r\n            var _a, _b;\r\n            if (!((_a = _this.resizeReferenceGroup) === null || _a === void 0 ? void 0 : _a.get('visible'))) {\r\n                return;\r\n            }\r\n            (_b = event === null || event === void 0 ? void 0 : event.preventDefault) === null || _b === void 0 ? void 0 : _b.call(event);\r\n            var originalEvent = event.originalEvent;\r\n            var resizeInfo = _this.getResizeInfo();\r\n            var resizeShapes = _this.resizeReferenceGroup.get('children');\r\n            if (isEmpty(resizeShapes)) {\r\n                return;\r\n            }\r\n            var _c = __read(resizeShapes, 2), endGuideLineShape = _c[1];\r\n            var _d = __read(clone(endGuideLineShape.attr('path')), 2), guideLineStart = _d[0], guideLineEnd = _d[1];\r\n            if (resizeInfo.type === ResizeDirectionType.Horizontal) {\r\n                _this.updateHorizontalResizingEndGuideLinePosition(originalEvent, resizeInfo, guideLineStart, guideLineEnd);\r\n            }\r\n            else {\r\n                _this.updateVerticalResizingEndGuideLinePosition(originalEvent, resizeInfo, guideLineStart, guideLineEnd);\r\n            }\r\n            endGuideLineShape.attr('path', [guideLineStart, guideLineEnd]);\r\n        };\r\n        return _this;\r\n    }\r\n    RowColumnResize.prototype.bindEvents = function () {\r\n        this.bindMouseDown();\r\n        this.bindMouseMove();\r\n        this.bindMouseUp();\r\n    };\r\n    RowColumnResize.prototype.initResizeGroup = function () {\r\n        if (this.resizeReferenceGroup) {\r\n            return;\r\n        }\r\n        this.resizeReferenceGroup = this.spreadsheet.foregroundGroup.addGroup();\r\n        var _a = this.spreadsheet.options, width = _a.width, height = _a.height;\r\n        var _b = this.getResizeAreaTheme(), guideLineColor = _b.guideLineColor, guideLineDash = _b.guideLineDash, size = _b.size;\r\n        var attrs = {\r\n            path: '',\r\n            lineDash: guideLineDash,\r\n            stroke: guideLineColor,\r\n            strokeWidth: size,\r\n        };\r\n        // 起始参考线\r\n        this.resizeReferenceGroup.addShape('path', {\r\n            id: RESIZE_START_GUIDE_LINE_ID,\r\n            attrs: attrs,\r\n        });\r\n        // 结束参考线\r\n        this.resizeReferenceGroup.addShape('path', {\r\n            id: RESIZE_END_GUIDE_LINE_ID,\r\n            attrs: attrs,\r\n        });\r\n        // Resize 蒙层\r\n        this.resizeReferenceGroup.addShape('rect', {\r\n            id: RESIZE_MASK_ID,\r\n            attrs: {\r\n                appendInfo: {\r\n                    isResizeArea: true,\r\n                },\r\n                x: 0,\r\n                y: 0,\r\n                width: width,\r\n                height: height,\r\n                fill: 'transparent',\r\n            },\r\n        });\r\n    };\r\n    RowColumnResize.prototype.getResizeAreaTheme = function () {\r\n        return this.spreadsheet.theme.resizeArea;\r\n    };\r\n    RowColumnResize.prototype.setResizeTarget = function (target) {\r\n        this.resizeTarget = target;\r\n    };\r\n    RowColumnResize.prototype.getGuideLineWidthAndHeight = function () {\r\n        var _a = this.spreadsheet.options, canvasWidth = _a.width, canvasHeight = _a.height;\r\n        var _b = this.spreadsheet.facet.panelBBox, maxY = _b.maxY, maxX = _b.maxX;\r\n        var width = Math.min(maxX, canvasWidth);\r\n        var height = Math.min(maxY, canvasHeight);\r\n        return {\r\n            width: width,\r\n            height: height,\r\n        };\r\n    };\r\n    RowColumnResize.prototype.updateResizeGuideLinePosition = function (event, resizeInfo) {\r\n        var resizeShapes = this.resizeReferenceGroup.get('children');\r\n        if (isEmpty(resizeShapes)) {\r\n            return;\r\n        }\r\n        var _a = __read(resizeShapes, 3), startResizeGuideLineShape = _a[0], endResizeGuideLineShape = _a[1], resizeMask = _a[2];\r\n        var type = resizeInfo.type, offsetX = resizeInfo.offsetX, offsetY = resizeInfo.offsetY, width = resizeInfo.width, height = resizeInfo.height;\r\n        var _b = this.getGuideLineWidthAndHeight(), guideLineMaxWidth = _b.width, guideLineMaxHeight = _b.height;\r\n        resizeMask.attr('cursor', \"\".concat(type, \"-resize\"));\r\n        if (type === ResizeDirectionType.Horizontal) {\r\n            startResizeGuideLineShape.attr('path', [\r\n                ['M', offsetX, offsetY],\r\n                ['L', offsetX, guideLineMaxHeight],\r\n            ]);\r\n            endResizeGuideLineShape.attr('path', [\r\n                ['M', offsetX + width, offsetY],\r\n                ['L', offsetX + width, guideLineMaxHeight],\r\n            ]);\r\n            this.resizeStartPosition.offsetX = event.offsetX;\r\n            return;\r\n        }\r\n        startResizeGuideLineShape.attr('path', [\r\n            ['M', offsetX, offsetY],\r\n            ['L', guideLineMaxWidth, offsetY],\r\n        ]);\r\n        endResizeGuideLineShape.attr('path', [\r\n            ['M', offsetX, offsetY + height],\r\n            ['L', guideLineMaxWidth, offsetY + height],\r\n        ]);\r\n        this.resizeStartPosition.offsetY = event.offsetY;\r\n    };\r\n    RowColumnResize.prototype.bindMouseDown = function () {\r\n        var _this = this;\r\n        this.spreadsheet.on(S2Event.LAYOUT_RESIZE_MOUSE_DOWN, function (event) {\r\n            var shape = event.target;\r\n            var resizeInfo = shape === null || shape === void 0 ? void 0 : shape.attr('appendInfo');\r\n            var originalEvent = event.originalEvent;\r\n            _this.spreadsheet.store.set('resized', false);\r\n            if (!(resizeInfo === null || resizeInfo === void 0 ? void 0 : resizeInfo.isResizeArea)) {\r\n                return;\r\n            }\r\n            // 鼠标在 resize 热区 按下时, 将 tooltip 关闭, 避免造成干扰\r\n            _this.spreadsheet.hideTooltip();\r\n            _this.spreadsheet.interaction.addIntercepts([InterceptType.RESIZE]);\r\n            _this.setResizeTarget(shape);\r\n            _this.showResizeGroup();\r\n            _this.updateResizeGuideLinePosition(originalEvent, resizeInfo);\r\n        });\r\n    };\r\n    RowColumnResize.prototype.bindMouseMove = function () {\r\n        var _this = this;\r\n        this.spreadsheet.on(S2Event.LAYOUT_RESIZE_MOUSE_MOVE, function (event) {\r\n            throttle(_this.resizeMouseMove, 33)(event);\r\n        });\r\n    };\r\n    // 将 SVG 的 path 转成更可读的坐标对象\r\n    RowColumnResize.prototype.getResizeGuideLinePosition = function () {\r\n        var _a = __read(this.resizeReferenceGroup.getChildren() || [], 2), startGuideLineShape = _a[0], endGuideLineShape = _a[1];\r\n        var startGuideLinePath = (startGuideLineShape === null || startGuideLineShape === void 0 ? void 0 : startGuideLineShape.attr('path')) || [];\r\n        var endGuideLinePath = (endGuideLineShape === null || endGuideLineShape === void 0 ? void 0 : endGuideLineShape.attr('path')) || [];\r\n        var _b = __read(startGuideLinePath[0] || [], 3), _c = _b[1], startX = _c === void 0 ? 0 : _c, _d = _b[2], startY = _d === void 0 ? 0 : _d;\r\n        var _e = __read(endGuideLinePath[0] || [], 3), _f = _e[1], endX = _f === void 0 ? 0 : _f, _g = _e[2], endY = _g === void 0 ? 0 : _g;\r\n        return {\r\n            start: {\r\n                x: startX,\r\n                y: startY,\r\n            },\r\n            end: {\r\n                x: endX,\r\n                y: endY,\r\n            },\r\n        };\r\n    };\r\n    RowColumnResize.prototype.getResizeWidthDetail = function () {\r\n        var _a, _b;\r\n        var _c = this.getResizeGuideLinePosition(), start = _c.start, end = _c.end;\r\n        var width = Math.floor(end.x - start.x);\r\n        var resizeInfo = this.getResizeInfo();\r\n        switch (resizeInfo.effect) {\r\n            case ResizeAreaEffect.Field:\r\n                return {\r\n                    eventType: S2Event.LAYOUT_RESIZE_ROW_WIDTH,\r\n                    style: {\r\n                        rowCfg: {\r\n                            widthByField: (_a = {},\r\n                                _a[resizeInfo.id] = width,\r\n                                _a),\r\n                        },\r\n                    },\r\n                };\r\n            case ResizeAreaEffect.Tree:\r\n                return {\r\n                    eventType: S2Event.LAYOUT_RESIZE_TREE_WIDTH,\r\n                    style: {\r\n                        rowCfg: {\r\n                            treeRowsWidth: width,\r\n                        },\r\n                    },\r\n                };\r\n            case ResizeAreaEffect.Cell:\r\n                return {\r\n                    eventType: S2Event.LAYOUT_RESIZE_COL_WIDTH,\r\n                    style: {\r\n                        colCfg: {\r\n                            widthByFieldValue: (_b = {},\r\n                                _b[resizeInfo.id] = width,\r\n                                _b),\r\n                        },\r\n                    },\r\n                };\r\n            case ResizeAreaEffect.Series:\r\n                return {\r\n                    eventType: S2Event.LAYOUT_RESIZE_SERIES_WIDTH,\r\n                    seriesNumberWidth: width,\r\n                };\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n    RowColumnResize.prototype.getResizeHeightDetail = function () {\r\n        var _a, _b;\r\n        var _c = this.spreadsheet.options, resize = _c.interaction.resize, heightByField = _c.style.rowCfg.heightByField;\r\n        var rowCellPadding = this.spreadsheet.theme.rowCell.cell.padding;\r\n        var _d = this.getResizeGuideLinePosition(), start = _d.start, end = _d.end;\r\n        var baseHeight = Math.floor(end.y - start.y);\r\n        var height = baseHeight - rowCellPadding.top - rowCellPadding.bottom;\r\n        var resizeInfo = this.getResizeInfo();\r\n        var rowCellStyle;\r\n        switch (resizeInfo.effect) {\r\n            case ResizeAreaEffect.Field:\r\n                return {\r\n                    eventType: S2Event.LAYOUT_RESIZE_COL_HEIGHT,\r\n                    style: {\r\n                        colCfg: {\r\n                            heightByField: (_a = {},\r\n                                _a[resizeInfo.id] = baseHeight,\r\n                                _a),\r\n                        },\r\n                    },\r\n                };\r\n            case ResizeAreaEffect.Cell:\r\n                if (heightByField[String(resizeInfo.id)] ||\r\n                    get(resize, 'rowResizeType') === ResizeType.CURRENT) {\r\n                    rowCellStyle = {\r\n                        rowCfg: {\r\n                            heightByField: (_b = {},\r\n                                _b[resizeInfo.id] = height,\r\n                                _b),\r\n                        },\r\n                    };\r\n                }\r\n                else {\r\n                    rowCellStyle = {\r\n                        cellCfg: {\r\n                            height: height,\r\n                        },\r\n                    };\r\n                }\r\n                return {\r\n                    eventType: S2Event.LAYOUT_RESIZE_ROW_HEIGHT,\r\n                    style: rowCellStyle,\r\n                };\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n    RowColumnResize.prototype.getResizeDetail = function () {\r\n        var resizeInfo = this.getResizeInfo();\r\n        return resizeInfo.type === ResizeDirectionType.Horizontal\r\n            ? this.getResizeWidthDetail()\r\n            : this.getResizeHeightDetail();\r\n    };\r\n    RowColumnResize.prototype.showResizeGroup = function () {\r\n        this.initResizeGroup();\r\n        this.resizeReferenceGroup.set('visible', true);\r\n    };\r\n    RowColumnResize.prototype.hideResizeGroup = function () {\r\n        this.resizeReferenceGroup.set('visible', false);\r\n    };\r\n    RowColumnResize.prototype.bindMouseUp = function () {\r\n        var _this = this;\r\n        this.spreadsheet.on(S2Event.GLOBAL_MOUSE_UP, function () {\r\n            var _a;\r\n            if (!_this.resizeReferenceGroup ||\r\n                isEmpty((_a = _this.resizeReferenceGroup) === null || _a === void 0 ? void 0 : _a.getChildren())) {\r\n                return;\r\n            }\r\n            _this.hideResizeGroup();\r\n            _this.renderResizedResult();\r\n        });\r\n    };\r\n    RowColumnResize.prototype.updateHorizontalResizingEndGuideLinePosition = function (originalEvent, resizeInfo, guideLineStart, guideLineEnd) {\r\n        var offsetX = originalEvent.offsetX - this.resizeStartPosition.offsetX;\r\n        if (resizeInfo.width + offsetX < MIN_CELL_WIDTH) {\r\n            // 禁止拖到最小宽度\r\n            offsetX = -(resizeInfo.width - MIN_CELL_WIDTH);\r\n        }\r\n        var resizedOffsetX = resizeInfo.offsetX + resizeInfo.width + offsetX;\r\n        guideLineStart[1] = resizedOffsetX;\r\n        guideLineEnd[1] = resizedOffsetX;\r\n        this.resizeTarget.attr({\r\n            x: resizedOffsetX - resizeInfo.size / 2,\r\n        });\r\n    };\r\n    RowColumnResize.prototype.updateVerticalResizingEndGuideLinePosition = function (originalEvent, resizeInfo, guideLineStart, guideLineEnd) {\r\n        var offsetY = originalEvent.offsetY - this.resizeStartPosition.offsetY;\r\n        if (resizeInfo.height + offsetY < MIN_CELL_HEIGHT) {\r\n            offsetY = -(resizeInfo.height - MIN_CELL_HEIGHT);\r\n        }\r\n        var resizedOffsetY = resizeInfo.offsetY + resizeInfo.height + offsetY;\r\n        guideLineStart[2] = resizedOffsetY;\r\n        guideLineEnd[2] = resizedOffsetY;\r\n        this.resizeTarget.attr({\r\n            y: resizedOffsetY - resizeInfo.size / 2,\r\n        });\r\n    };\r\n    RowColumnResize.prototype.renderResizedResult = function () {\r\n        var resizeInfo = this.getResizeInfo();\r\n        var _a = this.getResizeDetail() || {}, style = _a.style, seriesNumberWidth = _a.seriesNumberWidth, resizeEventType = _a.eventType;\r\n        var resizeDetail = {\r\n            info: resizeInfo,\r\n            style: style,\r\n        };\r\n        this.spreadsheet.emit(S2Event.LAYOUT_RESIZE, resizeDetail);\r\n        this.spreadsheet.emit(resizeEventType, resizeDetail);\r\n        if (style) {\r\n            this.spreadsheet.setOptions({ style: style });\r\n        }\r\n        else {\r\n            this.spreadsheet.theme.rowCell.seriesNumberWidth = seriesNumberWidth;\r\n        }\r\n        this.spreadsheet.store.set('resized', true);\r\n        this.render();\r\n    };\r\n    RowColumnResize.prototype.getResizeInfo = function () {\r\n        var _a;\r\n        return (_a = this.resizeTarget) === null || _a === void 0 ? void 0 : _a.attr('appendInfo');\r\n    };\r\n    RowColumnResize.prototype.render = function () {\r\n        this.resizeStartPosition = {};\r\n        this.resizeTarget = null;\r\n        this.resizeReferenceGroup = null;\r\n        this.spreadsheet.render(false);\r\n    };\r\n    return RowColumnResize;\r\n}(BaseEvent));\r\nexport { RowColumnResize };\r\n//# sourceMappingURL=row-column-resize.js.map","references":["F:/Ismart/S2-master/node_modules/@antv/g-canvas/lib/index.d.ts","F:/Ismart/S2-master/node_modules/@types/lodash/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/interaction/base-interaction/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/resize.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/index.ts"],"map":"{\"version\":3,\"file\":\"row-column-resize.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/interaction/row-column-resize.ts\"],\"names\":[],\"mappings\":\"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\"}"}
