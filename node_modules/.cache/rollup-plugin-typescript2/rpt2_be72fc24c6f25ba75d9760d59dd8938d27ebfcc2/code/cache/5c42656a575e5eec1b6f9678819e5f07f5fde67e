{"code":"import { __extends, __read } from \"tslib\";\r\nimport { isEmpty, isObject } from 'lodash';\r\nimport { CellTypes } from '../common/constant';\r\nimport { DataCell } from './data-cell';\r\nimport { getPolygonPoints } from \"../utils/interaction/merge-cell\";\r\nimport { renderPolygon } from \"../utils/g-renders\";\r\nimport { drawObjectText } from \"../utils/text\";\r\n/**\r\n * Cell for panelGroup area\r\n */\r\nvar MergedCell = /** @class */ (function (_super) {\r\n    __extends(MergedCell, _super);\r\n    function MergedCell(spreadsheet, cells, meta, isPartiallyVisible) {\r\n        if (isPartiallyVisible === void 0) { isPartiallyVisible = true; }\r\n        var _this = _super.call(this, meta, spreadsheet, cells) || this;\r\n        _this.isPartiallyVisible = isPartiallyVisible;\r\n        return _this;\r\n    }\r\n    MergedCell.prototype.handleRestOptions = function () {\r\n        var _a = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            _a[_i] = arguments[_i];\r\n        }\r\n        var _b = __read(_a, 1), cells = _b[0];\r\n        this.cells = cells;\r\n    };\r\n    Object.defineProperty(MergedCell.prototype, \"cellType\", {\r\n        get: function () {\r\n            return CellTypes.MERGED_CELL;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    MergedCell.prototype.update = function () { };\r\n    MergedCell.prototype.initCell = function () {\r\n        // TODO：1、条件格式支持； 2、交互态扩展； 3、合并后的单元格文字布局及文字内容（目前参考Excel合并后只保留第一个单元格子的数据）\r\n        this.drawBackgroundShape();\r\n        this.drawTextShape();\r\n    };\r\n    /**\r\n     * Draw merged cells background\r\n     */\r\n    MergedCell.prototype.drawBackgroundShape = function () {\r\n        var allPoints = getPolygonPoints(this.cells);\r\n        var cellTheme = this.theme.dataCell.cell;\r\n        this.backgroundShape = renderPolygon(this, {\r\n            points: allPoints,\r\n            stroke: cellTheme.horizontalBorderColor,\r\n            fill: cellTheme.backgroundColor,\r\n            lineHeight: cellTheme.horizontalBorderWidth,\r\n        });\r\n    };\r\n    /**\r\n     * Render data text\r\n     */\r\n    MergedCell.prototype.drawTextShape = function () {\r\n        if (isEmpty(this.meta)) {\r\n            return;\r\n        }\r\n        if (isObject(this.meta.fieldValue)) {\r\n            drawObjectText(this);\r\n        }\r\n        else {\r\n            _super.prototype.drawTextShape.call(this);\r\n        }\r\n    };\r\n    return MergedCell;\r\n}(DataCell));\r\nexport { MergedCell };\r\n//# sourceMappingURL=merged-cell.js.map","references":["F:/Ismart/S2-master/node_modules/@types/lodash/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/index.ts","F:/Ismart/S2-master/packages/s2-core/src/cell/data-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/interaction/merge-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/sheet-type/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/interaction.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/g-renders.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/text.ts"],"map":"{\"version\":3,\"file\":\"merged-cell.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/cell/merged-cell.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,QAAQ,CAAC;AAC3C,OAAO,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAC;AAE/C,OAAO,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAC;AACvC,OAAO,EAAE,gBAAgB,EAAE,wCAAuC;AAGlE,OAAO,EAAE,aAAa,EAAE,2BAA0B;AAClD,OAAO,EAAE,cAAc,EAAE,sBAAqB;AAE9C;;GAEG;AACH;IAAgC,8BAAQ;IAKtC,oBACE,WAAwB,EACxB,KAAmB,EACnB,IAAe,EACf,kBAAyB;QAAzB,mCAAA,EAAA,yBAAyB;QAJ3B,YAME,kBAAM,IAAI,EAAE,WAAW,EAAE,KAAK,CAAC,SAEhC;QADC,KAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;;IAC/C,CAAC;IAED,sCAAiB,GAAjB;QAAkB,YAA0B;aAA1B,UAA0B,EAA1B,qBAA0B,EAA1B,IAA0B;YAA1B,uBAA0B;;QAA1B,IAAA,KAAA,aAA0B,EAAtB,KAAK,QAAA,CAAiB;QAC1C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;IAED,sBAAW,gCAAQ;aAAnB;YACE,OAAO,SAAS,CAAC,WAAW,CAAC;QAC/B,CAAC;;;OAAA;IAEM,2BAAM,GAAb,cAAiB,CAAC;IAER,6BAAQ,GAAlB;QACE,wEAAwE;QACxE,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED;;OAEG;IACO,wCAAmB,GAA7B;QACE,IAAM,SAAS,GAAG,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/C,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC;QAC3C,IAAI,CAAC,eAAe,GAAG,aAAa,CAAC,IAAI,EAAE;YACzC,MAAM,EAAE,SAAS;YACjB,MAAM,EAAE,SAAS,CAAC,qBAAqB;YACvC,IAAI,EAAE,SAAS,CAAC,eAAe;YAC/B,UAAU,EAAE,SAAS,CAAC,qBAAqB;SAC5C,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACI,kCAAa,GAApB;QACE,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACtB,OAAO;SACR;QACD,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;YAClC,cAAc,CAAC,IAAI,CAAC,CAAC;SACtB;aAAM;YACL,iBAAM,aAAa,WAAE,CAAC;SACvB;IACH,CAAC;IACH,iBAAC;AAAD,CAAC,AA1DD,CAAgC,QAAQ,GA0DvC\"}"}
