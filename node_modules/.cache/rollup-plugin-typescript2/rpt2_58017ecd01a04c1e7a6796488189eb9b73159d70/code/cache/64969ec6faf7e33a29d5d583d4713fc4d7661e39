{"code":"import { __extends, __read } from \"tslib\";\r\nimport { BaseEvent } from './base-interaction';\r\nimport { InteractionKeyboardKey, S2Event } from \"../common/constant\";\r\nimport { CellTypes } from \"../common\";\r\nimport { getDataCellId } from \"../utils\";\r\nimport { calculateInViewIndexes } from \"../facet/utils\";\r\nimport { selectCells, getRangeIndex } from \"../utils/interaction/select-event\";\r\nvar SelectedCellMoveMap = [\r\n    InteractionKeyboardKey.ARROW_LEFT,\r\n    InteractionKeyboardKey.ARROW_RIGHT,\r\n    InteractionKeyboardKey.ARROW_UP,\r\n    InteractionKeyboardKey.ARROW_DOWN,\r\n];\r\nvar SelectedCellMove = /** @class */ (function (_super) {\r\n    __extends(SelectedCellMove, _super);\r\n    function SelectedCellMove(spreadsheet) {\r\n        return _super.call(this, spreadsheet) || this;\r\n    }\r\n    SelectedCellMove.prototype.bindEvents = function () {\r\n        var _this = this;\r\n        this.spreadsheet.on(S2Event.GLOBAL_KEYBOARD_DOWN, function (event) {\r\n            var isShift = event.shiftKey;\r\n            var isMeta = event.metaKey;\r\n            var hasDirection = SelectedCellMoveMap.includes(event.key);\r\n            var changeStartCell = false;\r\n            var isJumpMode = false;\r\n            var isSingleSelection = false;\r\n            if (hasDirection) {\r\n                if (isMeta && isShift) {\r\n                    // META + SHIFT + Direction\r\n                    changeStartCell = false;\r\n                    isJumpMode = true;\r\n                    isSingleSelection = false;\r\n                }\r\n                else if (isMeta) {\r\n                    // META + Direction\r\n                    changeStartCell = true;\r\n                    isJumpMode = true;\r\n                    isSingleSelection = true;\r\n                }\r\n                else if (isShift) {\r\n                    // SHIFT + Direction\r\n                    changeStartCell = false;\r\n                    isJumpMode = false;\r\n                    isSingleSelection = false;\r\n                }\r\n                else {\r\n                    // Only Direction\r\n                    changeStartCell = true;\r\n                    isJumpMode = false;\r\n                    isSingleSelection = true;\r\n                }\r\n                _this.handleMove({\r\n                    event: event,\r\n                    changeStartCell: changeStartCell,\r\n                    isJumpMode: isJumpMode,\r\n                    isSingleSelection: isSingleSelection,\r\n                });\r\n            }\r\n        });\r\n        this.spreadsheet.on(S2Event.DATA_CELL_CLICK, function (event) {\r\n            var cell = _this.spreadsheet.getCell(event.target).getMeta();\r\n            if (cell) {\r\n                _this.startCell = _this.getCellMetaFromViewMeta(cell);\r\n                _this.endCell = _this.startCell;\r\n            }\r\n        });\r\n    };\r\n    SelectedCellMove.prototype.getCellMetaFromViewMeta = function (meta) {\r\n        return {\r\n            rowIndex: meta.rowIndex,\r\n            colIndex: meta.colIndex,\r\n            id: meta.id,\r\n            type: CellTypes.DATA_CELL,\r\n        };\r\n    };\r\n    // core move function\r\n    SelectedCellMove.prototype.handleMove = function (_a) {\r\n        var event = _a.event, changeStartCell = _a.changeStartCell, isJumpMode = _a.isJumpMode, isSingleSelection = _a.isSingleSelection;\r\n        var _b = this, spreadsheet = _b.spreadsheet, startCell = _b.startCell, endCell = _b.endCell;\r\n        var cell = changeStartCell ? startCell : endCell;\r\n        var rowCol = this.getMoveInfo(event.key, cell, isJumpMode);\r\n        if (!rowCol) {\r\n            return;\r\n        }\r\n        var _c = __read([rowCol.row, rowCol.col], 2), rowIndex = _c[0], colIndex = _c[1];\r\n        this.scrollToActiveCell(spreadsheet, rowIndex, colIndex);\r\n        var movedCell = this.generateCellMeta(spreadsheet, rowIndex, colIndex);\r\n        var selectedCells = isSingleSelection\r\n            ? [movedCell]\r\n            : this.getRangeCells(spreadsheet, startCell, movedCell);\r\n        selectCells(spreadsheet, selectedCells);\r\n        if (changeStartCell) {\r\n            this.startCell = movedCell;\r\n        }\r\n        this.endCell = movedCell;\r\n    };\r\n    SelectedCellMove.prototype.generateCellMeta = function (spreadsheet, row, col) {\r\n        var isTableMode = spreadsheet.isTableMode, _a = spreadsheet.facet.layoutResult, colLeafNodes = _a.colLeafNodes, rowLeafNodes = _a.rowLeafNodes;\r\n        var rowId = isTableMode() ? String(row) : rowLeafNodes[row].id;\r\n        var colId = colLeafNodes[col].id;\r\n        return {\r\n            rowIndex: row,\r\n            colIndex: col,\r\n            id: getDataCellId(rowId, colId),\r\n            type: CellTypes.DATA_CELL,\r\n        };\r\n    };\r\n    SelectedCellMove.prototype.getRangeCells = function (spreadsheet, start, end) {\r\n        var _a = getRangeIndex(start, end), _b = _a.start, startRowIndex = _b.rowIndex, startColIndex = _b.colIndex, _c = _a.end, endRowIndex = _c.rowIndex, endColIndex = _c.colIndex;\r\n        var cells = [];\r\n        for (var row = startRowIndex; row <= endRowIndex; row++) {\r\n            for (var col = startColIndex; col <= endColIndex; col++) {\r\n                cells.push(this.generateCellMeta(spreadsheet, row, col));\r\n            }\r\n        }\r\n        return cells;\r\n    };\r\n    SelectedCellMove.prototype.getMoveInfo = function (code, cell, isJump) {\r\n        var spreadsheet = this.spreadsheet;\r\n        var _a = spreadsheet.options, _b = _a.frozenColCount, frozenColCount = _b === void 0 ? 0 : _b, _c = _a.frozenRowCount, frozenRowCount = _c === void 0 ? 0 : _c, _d = _a.frozenTrailingColCount, frozenTrailingColCount = _d === void 0 ? 0 : _d, _e = _a.frozenTrailingRowCount, frozenTrailingRowCount = _e === void 0 ? 0 : _e;\r\n        var _f = spreadsheet.facet.layoutResult, rowLeafNodes = _f.rowLeafNodes, colLeafNodes = _f.colLeafNodes;\r\n        var _g = __read([\r\n            0 + frozenColCount,\r\n            colLeafNodes.length - frozenTrailingColCount - 1,\r\n        ], 2), minCol = _g[0], maxCol = _g[1];\r\n        var _h = __read([\r\n            0 + frozenRowCount,\r\n            (spreadsheet.isTableMode()\r\n                ? spreadsheet.dataSet.getDisplayDataSet().length\r\n                : rowLeafNodes.length) -\r\n                frozenTrailingRowCount -\r\n                1,\r\n        ], 2), minRow = _h[0], maxRow = _h[1];\r\n        if (!cell)\r\n            return;\r\n        switch (code) {\r\n            case InteractionKeyboardKey.ARROW_RIGHT:\r\n                if (cell.colIndex + 1 > maxCol) {\r\n                    return;\r\n                }\r\n                return {\r\n                    row: cell.rowIndex,\r\n                    col: isJump ? maxCol : cell.colIndex + 1,\r\n                };\r\n            case InteractionKeyboardKey.ARROW_LEFT:\r\n                if (cell.colIndex - 1 < minCol) {\r\n                    return;\r\n                }\r\n                return {\r\n                    row: cell.rowIndex,\r\n                    col: isJump ? minCol : cell.colIndex - 1,\r\n                };\r\n            case InteractionKeyboardKey.ARROW_UP:\r\n                if (cell.rowIndex - 1 < minRow) {\r\n                    return;\r\n                }\r\n                return {\r\n                    row: isJump ? minRow : cell.rowIndex - 1,\r\n                    col: cell.colIndex,\r\n                };\r\n            case InteractionKeyboardKey.ARROW_DOWN:\r\n                if (cell.rowIndex + 1 > maxRow) {\r\n                    return;\r\n                }\r\n                return {\r\n                    row: isJump ? maxRow : cell.rowIndex + 1,\r\n                    col: cell.colIndex,\r\n                };\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n    // 计算需要滚动的offset\r\n    SelectedCellMove.prototype.calculateOffset = function (spreadsheet, rowIndex, colIndex) {\r\n        var _a = spreadsheet.options, _b = _a.frozenRowCount, frozenRowCount = _b === void 0 ? 0 : _b, _c = _a.frozenTrailingRowCount, frozenTrailingRowCount = _c === void 0 ? 0 : _c;\r\n        var facet = spreadsheet.facet, frozenColGroup = spreadsheet.frozenColGroup, frozenTrailingColGroup = spreadsheet.frozenTrailingColGroup, frozenRowGroup = spreadsheet.frozenRowGroup, frozenTrailingRowGroup = spreadsheet.frozenTrailingRowGroup;\r\n        var colLeafNodes = facet.layoutResult.colLeafNodes;\r\n        var _d = facet.getScrollOffset(), scrollX = _d.scrollX, scrollY = _d.scrollY;\r\n        var _e = facet.panelBBox, height = _e.viewportHeight, width = _e.viewportWidth;\r\n        var frozenColWidth = frozenColGroup\r\n            ? Math.floor(frozenColGroup.getBBox().width)\r\n            : 0;\r\n        var frozenTrailingColWidth = frozenTrailingColGroup\r\n            ? Math.floor(frozenTrailingColGroup.getBBox().width)\r\n            : 0;\r\n        var frozenRowHeight = frozenRowGroup\r\n            ? Math.floor(frozenRowGroup.getBBox().height)\r\n            : 0;\r\n        var frozenTrailingRowHeight = frozenTrailingRowGroup\r\n            ? Math.floor(frozenTrailingRowGroup.getBBox().height)\r\n            : 0;\r\n        var indexes = calculateInViewIndexes(scrollX, scrollY, facet.viewCellWidths, facet.viewCellHeights, {\r\n            width: width - frozenColWidth - frozenTrailingColWidth,\r\n            height: height - frozenRowHeight - frozenTrailingRowHeight,\r\n            x: frozenColWidth,\r\n            y: frozenRowHeight,\r\n        }, facet.getRealScrollX(facet.cornerBBox.width));\r\n        // 小于0的初始值\r\n        var offsetX = -1;\r\n        var offsetY = -1;\r\n        var targetNode = colLeafNodes.find(function (node) { return node.colIndex === colIndex; });\r\n        // offsetX\r\n        if (colIndex <= indexes[0]) {\r\n            // scroll left\r\n            offsetX = targetNode.x - frozenColWidth;\r\n        }\r\n        else if (colIndex >= indexes[1] &&\r\n            colIndex < colLeafNodes.length - frozenTrailingRowCount) {\r\n            // scroll right\r\n            offsetX =\r\n                targetNode.x + targetNode.width - width + frozenTrailingColWidth;\r\n        }\r\n        // offsetY\r\n        if (rowIndex <= indexes[2]) {\r\n            // scroll top\r\n            offsetY = facet.viewCellHeights.getCellOffsetY(rowIndex - frozenRowCount);\r\n        }\r\n        else if (rowIndex >= indexes[3]) {\r\n            // scroll bottom\r\n            var y = facet.viewCellHeights.getCellOffsetY(rowIndex + 1);\r\n            offsetY = y + frozenTrailingRowHeight - height;\r\n        }\r\n        return { offsetX: offsetX, offsetY: offsetY };\r\n    };\r\n    SelectedCellMove.prototype.scrollToActiveCell = function (spreadsheet, rowIndex, colIndex) {\r\n        var _a = this.calculateOffset(spreadsheet, rowIndex, colIndex), offsetX = _a.offsetX, offsetY = _a.offsetY;\r\n        var facet = spreadsheet.facet;\r\n        var _b = spreadsheet.facet.getScrollOffset(), scrollX = _b.scrollX, scrollY = _b.scrollY;\r\n        facet.scrollWithAnimation({\r\n            offsetX: { value: offsetX > -1 ? offsetX : scrollX },\r\n            offsetY: { value: offsetY > -1 ? offsetY : scrollY },\r\n        });\r\n    };\r\n    return SelectedCellMove;\r\n}(BaseEvent));\r\nexport { SelectedCellMove };\r\n//# sourceMappingURL=selected-cell-move.js.map","references":["F:/Ismart/S2-master/node_modules/@antv/g-canvas/lib/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/interaction/base-interaction/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/index.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/index.ts","F:/Ismart/S2-master/packages/s2-core/src/sheet-type/index.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/utils.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/interaction/select-event.ts"],"map":"{\"version\":3,\"file\":\"selected-cell-move.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/interaction/selected-cell-move.ts\"],\"names\":[],\"mappings\":\"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\"}"}
