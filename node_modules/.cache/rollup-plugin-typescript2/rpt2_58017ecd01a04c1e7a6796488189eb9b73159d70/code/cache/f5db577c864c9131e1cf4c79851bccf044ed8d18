{"code":"import { __assign, __extends, __read } from \"tslib\";\r\nimport { find, get } from 'lodash';\r\nimport { ColCell } from \"./col-cell\";\r\nimport { HORIZONTAL_RESIZE_AREA_KEY_PRE, KEY_GROUP_FROZEN_COL_RESIZE_AREA, } from \"../common/constant\";\r\nimport { isFrozenCol, isFrozenTrailingCol } from \"../facet/utils\";\r\nimport { getContentArea } from \"../utils/cell/cell\";\r\nimport { getExtraPaddingForExpandIcon } from \"../utils/cell/table-col-cell\";\r\nimport { renderRect } from \"../utils/g-renders\";\r\nimport { getOrCreateResizeAreaGroupById } from \"../utils/interaction/resize\";\r\nimport { getSortTypeIcon } from \"../utils/sort-action\";\r\nvar TableColCell = /** @class */ (function (_super) {\r\n    __extends(TableColCell, _super);\r\n    function TableColCell() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TableColCell.prototype.handleRestOptions = function () {\r\n        var _a = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            _a[_i] = arguments[_i];\r\n        }\r\n        var _b = __read(_a, 1), headerConfig = _b[0];\r\n        this.headerConfig = __assign({}, headerConfig);\r\n        var field = this.meta.field;\r\n        var sortParams = this.spreadsheet.dataCfg.sortParams;\r\n        var sortParam = find(sortParams, function (item) { return (item === null || item === void 0 ? void 0 : item.sortFieldId) === field; });\r\n        var type = getSortTypeIcon(sortParam, true);\r\n        this.headerConfig.sortParam = __assign(__assign(__assign({}, this.headerConfig.sortParam), (sortParam || {})), { type: type });\r\n    };\r\n    TableColCell.prototype.isFrozenCell = function () {\r\n        var _a = this.spreadsheet.options, frozenColCount = _a.frozenColCount, frozenTrailingColCount = _a.frozenTrailingColCount;\r\n        var colIndex = this.meta.colIndex;\r\n        var colLeafNodes = this.spreadsheet.facet.layoutResult.colLeafNodes;\r\n        return (isFrozenCol(colIndex, frozenColCount) ||\r\n            isFrozenTrailingCol(colIndex, frozenTrailingColCount, colLeafNodes.length));\r\n    };\r\n    TableColCell.prototype.getColResizeArea = function () {\r\n        var isFrozenCell = this.isFrozenCell();\r\n        if (!isFrozenCell) {\r\n            return _super.prototype.getColResizeArea.call(this);\r\n        }\r\n        return getOrCreateResizeAreaGroupById(this.spreadsheet, KEY_GROUP_FROZEN_COL_RESIZE_AREA);\r\n    };\r\n    TableColCell.prototype.isSortCell = function () {\r\n        return true;\r\n    };\r\n    TableColCell.prototype.showSortIcon = function () {\r\n        return this.spreadsheet.options.showDefaultHeaderActionIcon;\r\n    };\r\n    TableColCell.prototype.getTextStyle = function () {\r\n        var style = this.getStyle();\r\n        return get(style, 'bolderText');\r\n    };\r\n    TableColCell.prototype.getContentArea = function () {\r\n        var _a;\r\n        var padding = (((_a = this.getStyle()) === null || _a === void 0 ? void 0 : _a.cell) || this.theme.dataCell.cell).padding;\r\n        var newPadding = __assign({}, padding);\r\n        var extraPadding = getExtraPaddingForExpandIcon(this.spreadsheet, this.meta.field, this.getStyle());\r\n        if (extraPadding.left) {\r\n            newPadding.left = (newPadding.left || 0) + extraPadding.left;\r\n        }\r\n        if (extraPadding.right) {\r\n            newPadding.right = (newPadding.right || 0) + extraPadding.right;\r\n        }\r\n        return getContentArea(this.getCellArea(), newPadding);\r\n    };\r\n    TableColCell.prototype.getHorizontalResizeAreaName = function () {\r\n        return \"\".concat(HORIZONTAL_RESIZE_AREA_KEY_PRE).concat('table-col-cell');\r\n    };\r\n    TableColCell.prototype.drawBackgroundShape = function () {\r\n        var backgroundColor = this.getStyle().cell.backgroundColor;\r\n        this.backgroundShape = renderRect(this, __assign(__assign({}, this.getCellArea()), { fill: backgroundColor }));\r\n    };\r\n    return TableColCell;\r\n}(ColCell));\r\nexport { TableColCell };\r\n//# sourceMappingURL=table-col-cell.js.map","references":["F:/Ismart/S2-master/node_modules/@types/lodash/index.d.ts","F:/Ismart/S2-master/node_modules/@antv/g-canvas/lib/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/cell/col-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/common/constant/index.ts","F:/Ismart/S2-master/packages/s2-core/src/common/interface/index.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/utils.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/cell/cell.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/cell/table-col-cell.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/g-renders.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/interaction/resize.ts","F:/Ismart/S2-master/packages/s2-core/src/utils/sort-action.ts"],"map":"{\"version\":3,\"file\":\"table-col-cell.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/cell/table-col-cell.ts\"],\"names\":[],\"mappings\":\"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\"}"}
