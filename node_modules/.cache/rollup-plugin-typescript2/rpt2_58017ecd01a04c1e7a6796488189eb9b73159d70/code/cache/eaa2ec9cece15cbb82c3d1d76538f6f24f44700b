{"code":"import { findIndex } from 'lodash';\r\nexport var getSubTotalNodeWidthOrHeightByLevel = function (sampleNodesForAllLevels, level, key) {\r\n    return sampleNodesForAllLevels\r\n        .filter(function (node) { return node.level >= level; })\r\n        .map(function (value) { return value[key]; })\r\n        .reduce(function (sum, current) { return sum + current; }, 0);\r\n};\r\n/**\r\n * 根据视窗高度计算需要展示的数据数组下标\r\n * 如有2个节点，每个高度30\r\n * @param heights 所有单元格的高度偏移量数组 [0, 30, 60]\r\n * @param minHeight 视窗高度起点\r\n * @param maxHeight 视窗高度终点\r\n * @returns\r\n */\r\nexport var getIndexRangeWithOffsets = function (heights, minHeight, maxHeight) {\r\n    if (maxHeight <= 0) {\r\n        return {\r\n            start: 0,\r\n            end: 0,\r\n        };\r\n    }\r\n    var yMin = findIndex(heights, function (height, idx) {\r\n        var y = minHeight;\r\n        return y >= height && y < heights[idx + 1];\r\n    }, 0);\r\n    yMin = Math.max(yMin, 0);\r\n    var yMax = findIndex(heights, function (height, idx) {\r\n        var y = maxHeight;\r\n        return y > height && y <= heights[idx + 1];\r\n    }, yMin);\r\n    yMax = Math.min(yMax === -1 ? Infinity : yMax, heights.length - 2);\r\n    return {\r\n        start: yMin,\r\n        end: yMax,\r\n    };\r\n};\r\n//# sourceMappingURL=facet.js.map","references":["F:/Ismart/S2-master/node_modules/@types/lodash/index.d.ts","F:/Ismart/S2-master/packages/s2-core/src/facet/layout/node.ts"],"map":"{\"version\":3,\"file\":\"facet.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/facet.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,QAAQ,CAAC;AAGnC,MAAM,CAAC,IAAM,mCAAmC,GAAG,UACjD,uBAA+B,EAC/B,KAAa,EACb,GAAuB;IAEvB,OAAO,uBAAuB;SAC3B,MAAM,CAAC,UAAC,IAAU,IAAK,OAAA,IAAI,CAAC,KAAK,IAAI,KAAK,EAAnB,CAAmB,CAAC;SAC3C,GAAG,CAAC,UAAC,KAAK,IAAK,OAAA,KAAK,CAAC,GAAG,CAAC,EAAV,CAAU,CAAC;SAC1B,MAAM,CAAC,UAAC,GAAG,EAAE,OAAO,IAAK,OAAA,GAAG,GAAG,OAAO,EAAb,CAAa,EAAE,CAAC,CAAC,CAAC;AAChD,CAAC,CAAC;AAEF;;;;;;;GAOG;AACH,MAAM,CAAC,IAAM,wBAAwB,GAAG,UACtC,OAAiB,EACjB,SAAiB,EACjB,SAAiB;IAEjB,IAAI,SAAS,IAAI,CAAC,EAAE;QAClB,OAAO;YACL,KAAK,EAAE,CAAC;YACR,GAAG,EAAE,CAAC;SACP,CAAC;KACH;IAED,IAAI,IAAI,GAAG,SAAS,CAClB,OAAO,EACP,UAAC,MAAc,EAAE,GAAW;QAC1B,IAAM,CAAC,GAAG,SAAS,CAAC;QACpB,OAAO,CAAC,IAAI,MAAM,IAAI,CAAC,GAAG,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAC7C,CAAC,EACD,CAAC,CACF,CAAC;IAEF,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAEzB,IAAI,IAAI,GAAG,SAAS,CAClB,OAAO,EACP,UAAC,MAAc,EAAE,GAAW;QAC1B,IAAM,CAAC,GAAG,SAAS,CAAC;QACpB,OAAO,CAAC,GAAG,MAAM,IAAI,CAAC,IAAI,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAC7C,CAAC,EACD,IAAI,CACL,CAAC;IACF,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAEnE,OAAO;QACL,KAAK,EAAE,IAAI;QACX,GAAG,EAAE,IAAI;KACV,CAAC;AACJ,CAAC,CAAC\"}"}
