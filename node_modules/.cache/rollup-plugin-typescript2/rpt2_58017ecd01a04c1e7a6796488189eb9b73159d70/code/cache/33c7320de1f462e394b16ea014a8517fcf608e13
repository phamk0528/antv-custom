{"code":"/**\r\n * 文本吸附定位计算\r\n * @param rectLeft       矩形左边\r\n * @param rectWidth      矩形宽度\r\n * @param viewportLeft   视窗左边\r\n * @param viewportWidth  视窗宽度\r\n * @param textWidth\r\n * @returns 文本定位坐标 x 或者 y\r\n *\r\n * 画布元素：视窗矩形、矩形、文本，其中文本放置在矩形中\r\n * 矩形从右进入视窗时，交互流程为：\r\n *  1. 文本开始显示，文本贴左边\r\n *  2. 文本还未达到矩形中心位置，继续贴左边\r\n *  3. 文本显示全时，文本贴右边\r\n *  4. 文本居于矩形中心时，文本贴中间\r\n *  5. 文本贴近视窗左边还能显示全，文本贴左边\r\n *  6. 文本开始显示不全时，文本贴右边\r\n * **************************************************************\r\n *                    viewportLeft               rectLeft\r\n *                    ▲                          ▲   centerTextLeft\r\n *                    |                          |   ▲\r\n *                    +------------------+       |   |\r\n *                    |                  |       +------------+\r\n *                    |                  |       |   +----+   |\r\n *                    |                  |       |   |Text|   |\r\n *                    |                  |       |   +----+   |\r\n *                    |                  |       +------------+\r\n *                    +------------------+       ◀- rectWidth -▶\r\n *                    ◀- viewportWidth  -▶\r\n * ****************************************************************\r\n */\r\nexport var getAdjustPosition = function (rectLeft, rectWidth, viewportLeft, viewportWidth, textWidth) {\r\n    var textX = 0;\r\n    // 文本居于矩形中间时的坐标\r\n    var centerTextLeft = rectLeft + (rectWidth - textWidth) / 2;\r\n    var centerTextRight = rectLeft + (rectWidth + textWidth) / 2;\r\n    var viewportRight = viewportLeft + viewportWidth;\r\n    if (rectLeft + textWidth >= viewportRight) {\r\n        // 1. 文本开始显示，文本贴左边\r\n        textX = rectLeft;\r\n    }\r\n    else if (viewportRight < centerTextRight) {\r\n        // 2. 文本还未达到矩形中心位置，继续贴左边\r\n        textX = viewportLeft + viewportWidth - textWidth;\r\n    }\r\n    else if (viewportLeft > centerTextLeft) {\r\n        // 3. 文本显示全时，文本贴右边\r\n        if (rectLeft + rectWidth - viewportLeft > textWidth) {\r\n            // 5. 文本贴近视窗左边还能显示全，文本贴左边\r\n            textX = viewportLeft;\r\n        }\r\n        else {\r\n            // 6. 文本开始显示不全时，文本贴右边\r\n            textX = rectLeft + rectWidth - textWidth;\r\n        }\r\n    }\r\n    else {\r\n        // 4. 文本居于矩形中心时，文本贴中间\r\n        textX = rectLeft + (rectWidth - textWidth) / 2;\r\n    }\r\n    return textX;\r\n};\r\n//# sourceMappingURL=text-absorption.js.map","references":[],"map":"{\"version\":3,\"file\":\"text-absorption.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/text-absorption.ts\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA8BG;AACH,MAAM,CAAC,IAAM,iBAAiB,GAAG,UAC/B,QAAgB,EAChB,SAAiB,EACjB,YAAoB,EACpB,aAAqB,EACrB,SAAiB;IAEjB,IAAI,KAAK,GAAG,CAAC,CAAC;IAEd,eAAe;IACf,IAAM,cAAc,GAAG,QAAQ,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;IAC9D,IAAM,eAAe,GAAG,QAAQ,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;IAC/D,IAAM,aAAa,GAAG,YAAY,GAAG,aAAa,CAAC;IAEnD,IAAI,QAAQ,GAAG,SAAS,IAAI,aAAa,EAAE;QACzC,kBAAkB;QAClB,KAAK,GAAG,QAAQ,CAAC;KAClB;SAAM,IAAI,aAAa,GAAG,eAAe,EAAE;QAC1C,wBAAwB;QACxB,KAAK,GAAG,YAAY,GAAG,aAAa,GAAG,SAAS,CAAC;KAClD;SAAM,IAAI,YAAY,GAAG,cAAc,EAAE;QACxC,kBAAkB;QAClB,IAAI,QAAQ,GAAG,SAAS,GAAG,YAAY,GAAG,SAAS,EAAE;YACnD,yBAAyB;YACzB,KAAK,GAAG,YAAY,CAAC;SACtB;aAAM;YACL,qBAAqB;YACrB,KAAK,GAAG,QAAQ,GAAG,SAAS,GAAG,SAAS,CAAC;SAC1C;KACF;SAAM;QACL,qBAAqB;QACrB,KAAK,GAAG,QAAQ,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;KAChD;IAED,OAAO,KAAK,CAAC;AACf,CAAC,CAAC\"}"}
